parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"w8ch":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof e&&e.amd?e(n):(t=t||self).bsCustomFileInput=n()}(this,function(){"use strict";var e={CUSTOMFILE:'.custom-file input[type="file"]',CUSTOMFILELABEL:".custom-file-label",FORM:"form",INPUT:"input"},t=function(t){var n="",r=t.parentNode.querySelector(e.CUSTOMFILELABEL);return r&&(n=r.textContent),n},n=function(e){if(e.childNodes.length>0)for(var t=[].slice.call(e.childNodes),n=0;n<t.length;n++){var r=t[n];if(3!==r.nodeType)return r}return e},r=function(t){var r=t.bsCustomFileInput.defaultText,l=t.parentNode.querySelector(e.CUSTOMFILELABEL);l&&(n(l).textContent=r)},l=!!window.File,i=function(e){if(e.hasAttribute("multiple")&&l)return[].slice.call(e.files).map(function(e){return e.name}).join(", ");if(-1!==e.value.indexOf("fakepath")){var t=e.value.split("\\");return t[t.length-1]}return e.value};function u(){var t=this.parentNode.querySelector(e.CUSTOMFILELABEL);if(t){var l=n(t),u=i(this);u.length?l.textContent=u:r(this)}}function o(){for(var t=[].slice.call(this.querySelectorAll(e.INPUT)).filter(function(e){return!!e.bsCustomFileInput}),n=0,l=t.length;n<l;n++)r(t[n])}var c="reset",s="change";return{init:function(n,r){void 0===n&&(n=e.CUSTOMFILE),void 0===r&&(r=e.FORM);for(var l=[].slice.call(document.querySelectorAll(n)),i=[].slice.call(document.querySelectorAll(r)),a=0,f=l.length;a<f;a++){var d=l[a];Object.defineProperty(d,"bsCustomFileInput",{value:{defaultText:t(d)},writable:!0}),u.call(d),d.addEventListener(s,u)}for(var v=0,p=i.length;v<p;v++)i[v].addEventListener(c,o),Object.defineProperty(i[v],"bsCustomFileInput",{value:!0,writable:!0})},destroy:function(){for(var t=[].slice.call(document.querySelectorAll(e.FORM)).filter(function(e){return!!e.bsCustomFileInput}),n=[].slice.call(document.querySelectorAll(e.INPUT)).filter(function(e){return!!e.bsCustomFileInput}),l=0,i=n.length;l<i;l++){var a=n[l];r(a),a.bsCustomFileInput=void 0,a.removeEventListener(s,u)}for(var f=0,d=t.length;f<d;f++)t[f].removeEventListener(c,o),t[f].bsCustomFileInput=void 0}}});
},{}],"GqTT":[function(require,module,exports) {
"use strict";const e="bold|bolder|lighter|[1-9]00",a="italic|oblique",s="small-caps",n="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",c="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",r="'([^']+)'|\"([^\"]+)\"|[\\w\\s-]+",i=new RegExp("("+e+") +","i"),t=new RegExp("("+a+") +","i"),l=new RegExp("(small-caps) +","i"),d=new RegExp("("+n+") +","i"),m=new RegExp("([\\d\\.]+)("+c+") *((?:"+r+")( *, *(?:"+r+"))*)"),p={},x=16;module.exports=function(e){if(p[e])return p[e];const a=m.exec(e);if(!a)return;const s={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(a[1]),unit:a[2],family:a[3].replace(/["']/g,"").replace(/ *, */g,",")};let n,c,r,x,o=e.substring(0,a.index);switch((n=i.exec(o))&&(s.weight=n[1]),(c=t.exec(o))&&(s.style=c[1]),(r=l.exec(o))&&(s.variant=r[1]),(x=d.exec(o))&&(s.stretch=x[1]),s.unit){case"pt":s.size/=.75;break;case"pc":s.size*=16;break;case"in":s.size*=96;break;case"cm":s.size*=96/2.54;break;case"mm":s.size*=96/25.4;break;case"%":break;case"em":case"rem":s.size*=16/.75;break;case"q":s.size*=96/25.4/4}return p[e]=s};
},{}],"MHvi":[function(require,module,exports) {
const e=require("./lib/parse-font");exports.parseFont=e,exports.createCanvas=function(e,n){return Object.assign(document.createElement("canvas"),{width:e,height:n})},exports.createImageData=function(e,n,t){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(e);case 2:return new ImageData(e,n);default:return new ImageData(e,n,t)}},exports.loadImage=function(e,n){return new Promise(function(t,a){const r=Object.assign(document.createElement("img"),n);function o(){r.onload=null,r.onerror=null}r.onload=function(){o(),t(r)},r.onerror=function(){o(),a(new Error('Failed to load the image "'+e+'"'))},r.src=e})};
},{"./lib/parse-font":"GqTT"}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"UUq2":[function(require,module,exports) {
var process = require("process");
var r=require("process");function t(r,t){for(var e=0,n=r.length-1;n>=0;n--){var o=r[n];"."===o?r.splice(n,1):".."===o?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function e(r){"string"!=typeof r&&(r+="");var t,e=0,n=-1,o=!0;for(t=r.length-1;t>=0;--t)if(47===r.charCodeAt(t)){if(!o){e=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":r.slice(e,n)}function n(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}exports.resolve=function(){for(var e="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var i=s>=0?arguments[s]:r.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,o="/"===i.charAt(0))}return(o?"/":"")+(e=t(n(e.split("/"),function(r){return!!r}),!o).join("/"))||"."},exports.normalize=function(r){var e=exports.isAbsolute(r),s="/"===o(r,-1);return(r=t(n(r.split("/"),function(r){return!!r}),!e).join("/"))||e||(r="."),r&&s&&(r+="/"),(e?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(n(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),o=e(t.split("/")),s=Math.min(n.length,o.length),i=s,u=0;u<s;u++)if(n[u]!==o[u]){i=u;break}var f=[];for(u=i;u<n.length;u++)f.push("..");return(f=f.concat(o.slice(i))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){if("string"!=typeof r&&(r+=""),0===r.length)return".";for(var t=r.charCodeAt(0),e=47===t,n=-1,o=!0,s=r.length-1;s>=1;--s)if(47===(t=r.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?e?"/":".":e&&1===n?"/":r.slice(0,n)},exports.basename=function(r,t){var n=e(r);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},exports.extname=function(r){"string"!=typeof r&&(r+="");for(var t=-1,e=0,n=-1,o=!0,s=0,i=r.length-1;i>=0;--i){var u=r.charCodeAt(i);if(47!==u)-1===n&&(o=!1,n=i+1),46===u?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){e=i+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===e+1?"":r.slice(t,n)};var o="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)};
},{"process":"pBGv"}],"kQeA":[function(require,module,exports) {
"use strict";var _;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageMode=void 0,function(_){_[_.ICF_TRUE_COLOR_332=0]="ICF_TRUE_COLOR_332",_[_.ICF_TRUE_COLOR_565=1]="ICF_TRUE_COLOR_565",_[_.ICF_TRUE_COLOR_565_SWAP=2]="ICF_TRUE_COLOR_565_SWAP",_[_.ICF_TRUE_COLOR_888=3]="ICF_TRUE_COLOR_888",_[_.CF_ALPHA_1_BIT=4]="CF_ALPHA_1_BIT",_[_.CF_ALPHA_2_BIT=5]="CF_ALPHA_2_BIT",_[_.CF_ALPHA_4_BIT=6]="CF_ALPHA_4_BIT",_[_.CF_ALPHA_8_BIT=7]="CF_ALPHA_8_BIT",_[_.CF_INDEXED_1_BIT=8]="CF_INDEXED_1_BIT",_[_.CF_INDEXED_2_BIT=9]="CF_INDEXED_2_BIT",_[_.CF_INDEXED_4_BIT=10]="CF_INDEXED_4_BIT",_[_.CF_INDEXED_8_BIT=11]="CF_INDEXED_8_BIT",_[_.CF_RAW=12]="CF_RAW",_[_.CF_RAW_ALPHA=13]="CF_RAW_ALPHA",_[_.CF_RAW_CHROMA=12]="CF_RAW_CHROMA",_[_.CF_TRUE_COLOR=100]="CF_TRUE_COLOR",_[_.CF_TRUE_COLOR_ALPHA=101]="CF_TRUE_COLOR_ALPHA",_[_.CF_TRUE_COLOR_CHROMA=102]="CF_TRUE_COLOR_CHROMA"}(_||(_={})),exports.ImageMode=_;
},{}],"B4OP":[function(require,module,exports) {
"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};module.exports=function(o){switch(void 0===o?"undefined":t(o)){case"number":return isNaN(o)||!isFinite(o)?0:o<0?Math.ceil(o):Math.floor(o);case"string":return parseInt(o,10)||0;case"boolean":default:return+!!o}};
},{}],"vd9n":[function(require,module,exports) {
"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};module.exports=function(o){switch(void 0===o?"undefined":t(o)){case"number":return o;case"string":return parseFloat(o)||0;case"boolean":default:return require("./_php_cast_int")(o)}};
},{"./_php_cast_int":"B4OP"}],"RLeF":[function(require,module,exports) {
"use strict";function t(t,r){var a=Math.floor(Math.abs(t)+.5);return("PHP_ROUND_HALF_DOWN"===r&&t===a-.5||"PHP_ROUND_HALF_EVEN"===r&&t===.5+2*Math.floor(a/2)||"PHP_ROUND_HALF_ODD"===r&&t===.5+2*Math.floor(a/2)-1)&&(a-=1),t<0?-a:a}module.exports=function(r){var a,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"PHP_ROUND_HALF_UP",e=require("../_helpers/_php_cast_float"),h=require("../_helpers/_php_cast_int");if(r=e(r),_=h(_),a=Math.pow(10,_),isNaN(r)||!isFinite(r))return r;if(Math.trunc(r)===r&&_>=0)return r;var i=14-Math.floor(Math.log10(Math.abs(r)));return i>_&&i-15<_?(r=t(r*Math.pow(10,i),o),r/=Math.pow(10,Math.abs(_-i))):r*=a,(r=t(r,o))/a};
},{"../_helpers/_php_cast_float":"vd9n","../_helpers/_php_cast_int":"B4OP"}],"riTk":[function(require,module,exports) {
"use strict";module.exports=function(t){return t<0&&(t=4294967295+t+1),parseInt(t,10).toString(16)};
},{}],"HRvD":[function(require,module,exports) {
"use strict";module.exports=function(T,_,t,r){var R,e="",n=function(T,_){for(var t="";t.length<_;)t+=T;return t=t.substr(0,_)};return t=void 0!==t?t:" ","STR_PAD_LEFT"!==r&&"STR_PAD_RIGHT"!==r&&"STR_PAD_BOTH"!==r&&(r="STR_PAD_RIGHT"),(R=_-(T+="").length)>0&&("STR_PAD_LEFT"===r?T=n(t,R)+T:"STR_PAD_RIGHT"===r?T+=n(t,R):"STR_PAD_BOTH"===r&&(T=(T=(e=n(t,Math.ceil(R/2)))+T+e).substr(0,_))),T};
},{}],"uZjm":[function(require,module,exports) {
"use strict";module.exports=function r(t,o){var c,n=0;if(null==t)return 0;if(t.constructor!==Array&&t.constructor!==Object)return 1;for(c in"COUNT_RECURSIVE"===o&&(o=1),1!==o&&(o=0),t)t.hasOwnProperty(c)&&(n++,1!==o||!t[c]||t[c].constructor!==Array&&t[c].constructor!==Object||(n+=r(t[c],1)));return n};
},{}],"fL8V":[function(require,module,exports) {
"use strict";var E,e,t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.y=exports.x=exports.Y=void 0,function(E){E[E.RED=.2126]="RED",E[E.GREEN=.7152]="GREEN",E[E.BLUE=.0722]="BLUE",E[E.WHITE=1]="WHITE"}(E=exports.Y||(exports.Y={})),function(E){E[E.RED=.64]="RED",E[E.GREEN=.3]="GREEN",E[E.BLUE=.15]="BLUE",E[E.WHITE=.3127]="WHITE"}(e=exports.x||(exports.x={})),function(E){E[E.RED=.33]="RED",E[E.GREEN=.6]="GREEN",E[E.BLUE=.06]="BLUE",E[E.WHITE=.329]="WHITE"}(t=exports.y||(exports.y={}));
},{}],"Hata":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var n in r)"default"!==n&&Object.hasOwnProperty.call(r,n)&&e(i,r,n);return t(i,r),i};Object.defineProperty(exports,"__esModule",{value:!0}),exports.bt709=void 0;var i=r(require("./bt709"));exports.bt709=i;
},{"./bt709":"fL8V"}],"xMMP":[function(require,module,exports) {
"use strict";function e(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92}function r(r,t,o){return{x:.4124*(r=e(r/255))+.3576*(t=e(t/255))+.1805*(o=e(o/255)),y:.2126*r+.7152*t+.0722*o,z:.0193*r+.1192*t+.9505*o}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgb2xyz=void 0,exports.rgb2xyz=r;
},{}],"DzPw":[function(require,module,exports) {
"use strict";function e(e){return e*(Math.PI/180)}function t(e,t,n){var r=e;return r<t&&(r=t),r<n&&(r=n),r}function n(e,t,n){var r=e;return r>t&&(r=t),r>n&&(r=n),r}function r(e,t,n){return e>n&&(e=n),e<t&&(e=t),0|e}function o(e){return(e=Math.round(e))>255?e=255:e<0&&(e=0),e}function s(e){return e>255?e=255:e<0&&(e=0),e}function i(e,t){var n,r=typeof e[0];if("number"===r||"string"===r){for(var o=Object.create(null),s=0,i=e.length;s<i;s++){var u=e[s];o[u]||0===o[u]||(o[u]=s)}n=e.sort(function(e,n){return t(e,n)||o[e]-o[n]})}else{var a=e.slice(0);n=e.sort(function(e,n){return t(e,n)||a.indexOf(e)-a.indexOf(n)})}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.stableSort=exports.inRange0to255=exports.inRange0to255Rounded=exports.intInRange=exports.min3=exports.max3=exports.degrees2radians=void 0,exports.degrees2radians=e,exports.max3=t,exports.min3=n,exports.intInRange=r,exports.inRange0to255Rounded=o,exports.inRange0to255=s,exports.stableSort=i;
},{}],"AUZx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgb2hsl=void 0;var r=require("../utils/arithmetic");function e(e,t,s){var i=r.min3(e,t,s),o=r.max3(e,t,s),u=o-i,a=(i+o)/510,l=0;a>0&&a<1&&(l=u/(a<.5?o+i:510-o-i));var n=0;return u>0&&(n=o===e?(t-s)/u:o===t?2+(s-e)/u:4+(e-t)/u,(n*=60)<0&&(n+=360)),{h:n,s:l,l:a}}exports.rgb2hsl=e;
},{"../utils/arithmetic":"DzPw"}],"cWdd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xyz2lab=void 0;var r=.95047,e=1,t=1.08883;function o(r){return r>.008856?Math.pow(r,1/3):7.787*r+16/116}function x(x,a,n){if(x=o(x/r),a=o(a/e),n=o(n/t),116*a-16<0)throw new Error("xxx");return{L:Math.max(0,116*a-16),a:500*(x-a),b:200*(a-n)}}exports.xyz2lab=x;
},{}],"fwXJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgb2lab=void 0;var r=require("./rgb2xyz"),e=require("./xyz2lab");function b(b,t,x){var a=r.rgb2xyz(b,t,x);return e.xyz2lab(a.x,a.y,a.z)}exports.rgb2lab=b;
},{"./rgb2xyz":"xMMP","./xyz2lab":"cWdd"}],"fzej":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lab2xyz=void 0;var e=.95047,r=1,t=1.08883;function o(e){return e>.206893034?Math.pow(e,3):(e-16/116)/7.787}function n(n,u,a){var s=(n+16)/116,x=s-a/200;return{x:e*o(u/500+s),y:r*o(s),z:t*o(x)}}exports.lab2xyz=n;
},{}],"sM5F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xyz2rgb=void 0;var e=require("../utils/arithmetic");function r(e){return e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e}function t(t,n,o){var i=r(3.2406*t+-1.5372*n+-.4986*o),u=r(-.9689*t+1.8758*n+.0415*o),d=r(.0557*t+-.204*n+1.057*o);return{r:e.inRange0to255Rounded(255*i),g:e.inRange0to255Rounded(255*u),b:e.inRange0to255Rounded(255*d)}}exports.xyz2rgb=t;
},{"../utils/arithmetic":"DzPw"}],"S0gQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lab2rgb=void 0;var r=require("./lab2xyz"),e=require("./xyz2rgb");function b(b,t,x){var a=r.lab2xyz(b,t,x);return e.xyz2rgb(a.x,a.y,a.z)}exports.lab2rgb=b;
},{"./lab2xyz":"fzej","./xyz2rgb":"sM5F"}],"vOfS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./rgb2xyz");Object.defineProperty(exports,"rgb2xyz",{enumerable:!0,get:function(){return e.rgb2xyz}});var r=require("./rgb2hsl");Object.defineProperty(exports,"rgb2hsl",{enumerable:!0,get:function(){return r.rgb2hsl}});var t=require("./rgb2lab");Object.defineProperty(exports,"rgb2lab",{enumerable:!0,get:function(){return t.rgb2lab}});var b=require("./lab2xyz");Object.defineProperty(exports,"lab2xyz",{enumerable:!0,get:function(){return b.lab2xyz}});var n=require("./lab2rgb");Object.defineProperty(exports,"lab2rgb",{enumerable:!0,get:function(){return n.lab2rgb}});var u=require("./xyz2lab");Object.defineProperty(exports,"xyz2lab",{enumerable:!0,get:function(){return u.xyz2lab}});var a=require("./xyz2rgb");Object.defineProperty(exports,"xyz2rgb",{enumerable:!0,get:function(){return a.xyz2rgb}});
},{"./rgb2xyz":"xMMP","./rgb2hsl":"AUZx","./rgb2lab":"fwXJ","./lab2xyz":"fzej","./lab2rgb":"S0gQ","./xyz2lab":"cWdd","./xyz2rgb":"sM5F"}],"ECoR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractDistanceCalculator=void 0;var t=function(){function t(){this._setDefaults(),this.setWhitePoint(255,255,255,255)}return t.prototype.setWhitePoint=function(t,e,a,i){this._whitePoint={r:t>0?255/t:0,g:e>0?255/e:0,b:a>0?255/a:0,a:i>0?255/i:0},this._maxDistance=this.calculateRaw(t,e,a,i,0,0,0,0)},t.prototype.calculateNormalized=function(t,e){return this.calculateRaw(t.r,t.g,t.b,t.a,e.r,e.g,e.b,e.a)/this._maxDistance},t}();exports.AbstractDistanceCalculator=t;
},{}],"cjgF":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(i,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])})(i,r)};return function(i,r){function n(){this.constructor=i}t(i,r),i.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.CIE94GraphicArts=exports.CIE94Textiles=exports.AbstractCIE94=void 0;var i=require("./distanceCalculator"),r=require("../conversion/rgb2lab"),n=require("../utils/arithmetic"),e=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return t(e,i),e.prototype.calculateRaw=function(t,i,e,o,s,a,h,u){var c=r.rgb2lab(n.inRange0to255(t*this._whitePoint.r),n.inRange0to255(i*this._whitePoint.g),n.inRange0to255(e*this._whitePoint.b)),p=r.rgb2lab(n.inRange0to255(s*this._whitePoint.r),n.inRange0to255(a*this._whitePoint.g),n.inRange0to255(h*this._whitePoint.b)),_=c.L-p.L,l=c.a-p.a,f=c.b-p.b,b=Math.sqrt(c.a*c.a+c.b*c.b),w=b-Math.sqrt(p.a*p.a+p.b*p.b),y=l*l+f*f-w*w;y=y<0?0:Math.sqrt(y);var g=(u-o)*this._whitePoint.a*this._kA;return Math.sqrt(Math.pow(_/this._Kl,2)+Math.pow(w/(1+this._K1*b),2)+Math.pow(y/(1+this._K2*b),2)+Math.pow(g,2))},e}(i.AbstractDistanceCalculator);exports.AbstractCIE94=e;var o=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return t(r,i),r.prototype._setDefaults=function(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=12.5/255},r}(e);exports.CIE94Textiles=o;var s=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return t(r,i),r.prototype._setDefaults=function(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=25/255},r}(e);exports.CIE94GraphicArts=s;
},{"./distanceCalculator":"ECoR","../conversion/rgb2lab":"fwXJ","../utils/arithmetic":"DzPw"}],"YUpy":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(a,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var e in a)a.hasOwnProperty(e)&&(t[e]=a[e])})(a,e)};return function(a,e){function n(){this.constructor=a}t(a,e),a.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.CIEDE2000=void 0;var a=require("./distanceCalculator"),e=require("../conversion/rgb2lab"),n=require("../utils/arithmetic"),r=function(a){function r(){return null!==a&&a.apply(this,arguments)||this}return t(r,a),r.prototype._setDefaults=function(){},r._calculatehp=function(t,a){var e=Math.atan2(t,a);return e>=0?e:e+r._deg360InRad},r._calculateRT=function(t,a){var e=Math.pow(a,7),n=2*Math.sqrt(e/(e+r._pow25to7)),o=r._deg30InRad*Math.exp(-Math.pow((t-r._deg275InRad)/r._deg25InRad,2));return-Math.sin(2*o)*n},r._calculateT=function(t){return 1-.17*Math.cos(t-r._deg30InRad)+.24*Math.cos(2*t)+.32*Math.cos(3*t+r._deg6InRad)-.2*Math.cos(4*t-r._deg63InRad)},r._calculate_ahp=function(t,a,e,n){var o=e+n;return 0===t?o:a<=r._deg180InRad?o/2:o<r._deg360InRad?(o+r._deg360InRad)/2:(o-r._deg360InRad)/2},r._calculate_dHp=function(t,a,e,n){var o;return o=0===t?0:a<=r._deg180InRad?e-n:e<=n?e-n+r._deg360InRad:e-n-r._deg360InRad,2*Math.sqrt(t)*Math.sin(o/2)},r.prototype.calculateRaw=function(t,a,o,i,c,d,s,_){var u=e.rgb2lab(n.inRange0to255(t*this._whitePoint.r),n.inRange0to255(a*this._whitePoint.g),n.inRange0to255(o*this._whitePoint.b)),h=e.rgb2lab(n.inRange0to255(c*this._whitePoint.r),n.inRange0to255(d*this._whitePoint.g),n.inRange0to255(s*this._whitePoint.b)),l=(_-i)*this._whitePoint.a*r._kA,p=this.calculateRawInLab(u,h);return Math.sqrt(p+l*l)},r.prototype.calculateRawInLab=function(t,a){var e=t.L,n=t.a,o=t.b,i=a.L,c=a.a,d=a.b,s=Math.sqrt(n*n+o*o),_=Math.sqrt(c*c+d*d),u=Math.pow((s+_)/2,7),h=.5*(1-Math.sqrt(u/(u+r._pow25to7))),l=(1+h)*n,p=(1+h)*c,g=Math.sqrt(l*l+o*o),R=Math.sqrt(p*p+d*d),M=g*R,I=r._calculatehp(o,l),w=r._calculatehp(d,p),f=Math.abs(I-w),b=i-e,v=R-g,q=r._calculate_dHp(M,f,w,I),y=r._calculate_ahp(M,f,I,w),P=r._calculateT(y),x=(g+R)/2,O=Math.pow((e+i)/2-50,2),A=1+.015*O/Math.sqrt(20+O),C=1+.045*x,D=1+.015*P*x,E=r._calculateRT(y,x),L=b/A,T=v/C,j=q/D;return Math.pow(L,2)+Math.pow(T,2)+Math.pow(j,2)+E*T*j},r._kA=25/255,r._pow25to7=Math.pow(25,7),r._deg360InRad=n.degrees2radians(360),r._deg180InRad=n.degrees2radians(180),r._deg30InRad=n.degrees2radians(30),r._deg6InRad=n.degrees2radians(6),r._deg63InRad=n.degrees2radians(63),r._deg275InRad=n.degrees2radians(275),r._deg25InRad=n.degrees2radians(25),r}(a.AbstractDistanceCalculator);exports.CIEDE2000=r;
},{"./distanceCalculator":"ECoR","../conversion/rgb2lab":"fwXJ","../utils/arithmetic":"DzPw"}],"u42b":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.CMetric=void 0;var r=require("./distanceCalculator"),e=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return t(e,r),e.prototype.calculateRaw=function(t,r,e,o,n,i,c,s){var u=(t+n)/2*this._whitePoint.r,a=(t-n)*this._whitePoint.r,p=(r-i)*this._whitePoint.g,_=(e-c)*this._whitePoint.b,h=((512+u)*a*a>>8)+4*p*p+((767-u)*_*_>>8),f=(s-o)*this._whitePoint.a;return Math.sqrt(h+f*f)},e.prototype._setDefaults=function(){},e}(r.AbstractDistanceCalculator);exports.CMetric=e;
},{"./distanceCalculator":"ECoR"}],"HW99":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(n,r)};return function(n,r){function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.EuclideanBT709NoAlpha=exports.EuclideanBT709=exports.Euclidean=exports.AbstractEuclidean=void 0;var n=require("./distanceCalculator"),r=require("../constants/bt709"),e=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return t(r,n),r.prototype.calculateRaw=function(t,n,r,e,i,o,s,u){var a=i-t,c=o-n,p=s-r,l=u-e;return Math.sqrt(this._kR*a*a+this._kG*c*c+this._kB*p*p+this._kA*l*l)},r}(n.AbstractDistanceCalculator);exports.AbstractEuclidean=e;var i=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return t(r,n),r.prototype._setDefaults=function(){this._kR=1,this._kG=1,this._kB=1,this._kA=1},r}(e);exports.Euclidean=i;var o=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return t(e,n),e.prototype._setDefaults=function(){this._kR=r.Y.RED,this._kG=r.Y.GREEN,this._kB=r.Y.BLUE,this._kA=1},e}(e);exports.EuclideanBT709=o;var s=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return t(e,n),e.prototype._setDefaults=function(){this._kR=r.Y.RED,this._kG=r.Y.GREEN,this._kB=r.Y.BLUE,this._kA=0},e}(e);exports.EuclideanBT709NoAlpha=s;
},{"./distanceCalculator":"ECoR","../constants/bt709":"fL8V"}],"h74p":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(n,r)};return function(n,r){function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.ManhattanBT709=exports.ManhattanNommyde=exports.Manhattan=exports.AbstractManhattan=void 0;var n=require("./distanceCalculator"),r=require("../constants/bt709"),e=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return t(r,n),r.prototype.calculateRaw=function(t,n,r,e,o,a,s,i){var u=o-t,c=a-n,h=s-r,p=i-e;return u<0&&(u=0-u),c<0&&(c=0-c),h<0&&(h=0-h),p<0&&(p=0-p),this._kR*u+this._kG*c+this._kB*h+this._kA*p},r}(n.AbstractDistanceCalculator);exports.AbstractManhattan=e;var o=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return t(r,n),r.prototype._setDefaults=function(){this._kR=1,this._kG=1,this._kB=1,this._kA=1},r}(e);exports.Manhattan=o;var a=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return t(r,n),r.prototype._setDefaults=function(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1},r}(e);exports.ManhattanNommyde=a;var s=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return t(e,n),e.prototype._setDefaults=function(){this._kR=r.Y.RED,this._kG=r.Y.GREEN,this._kB=r.Y.BLUE,this._kA=1},e}(e);exports.ManhattanBT709=s;
},{"./distanceCalculator":"ECoR","../constants/bt709":"fL8V"}],"YN08":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.PNGQuant=void 0;var e=require("./distanceCalculator"),o=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t(o,e),o.prototype.calculateRaw=function(t,e,o,r,n,i,c,s){var u=(s-r)*this._whitePoint.a;return this._colordifferenceCh(t*this._whitePoint.r,n*this._whitePoint.r,u)+this._colordifferenceCh(e*this._whitePoint.g,i*this._whitePoint.g,u)+this._colordifferenceCh(o*this._whitePoint.b,c*this._whitePoint.b,u)},o.prototype._colordifferenceCh=function(t,e,o){var r=t-e,n=r+o;return r*r+n*n},o.prototype._setDefaults=function(){},o}(e.AbstractDistanceCalculator);exports.PNGQuant=o;
},{"./distanceCalculator":"ECoR"}],"C2FF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./distanceCalculator");Object.defineProperty(exports,"AbstractDistanceCalculator",{enumerable:!0,get:function(){return e.AbstractDistanceCalculator}});var t=require("./cie94");Object.defineProperty(exports,"CIE94Textiles",{enumerable:!0,get:function(){return t.CIE94Textiles}}),Object.defineProperty(exports,"CIE94GraphicArts",{enumerable:!0,get:function(){return t.CIE94GraphicArts}});var r=require("./ciede2000");Object.defineProperty(exports,"CIEDE2000",{enumerable:!0,get:function(){return r.CIEDE2000}});var n=require("./cmetric");Object.defineProperty(exports,"CMetric",{enumerable:!0,get:function(){return n.CMetric}});var a=require("./euclidean");Object.defineProperty(exports,"AbstractEuclidean",{enumerable:!0,get:function(){return a.AbstractEuclidean}}),Object.defineProperty(exports,"Euclidean",{enumerable:!0,get:function(){return a.Euclidean}}),Object.defineProperty(exports,"EuclideanBT709NoAlpha",{enumerable:!0,get:function(){return a.EuclideanBT709NoAlpha}}),Object.defineProperty(exports,"EuclideanBT709",{enumerable:!0,get:function(){return a.EuclideanBT709}});var u=require("./manhattan");Object.defineProperty(exports,"AbstractManhattan",{enumerable:!0,get:function(){return u.AbstractManhattan}}),Object.defineProperty(exports,"Manhattan",{enumerable:!0,get:function(){return u.Manhattan}}),Object.defineProperty(exports,"ManhattanBT709",{enumerable:!0,get:function(){return u.ManhattanBT709}}),Object.defineProperty(exports,"ManhattanNommyde",{enumerable:!0,get:function(){return u.ManhattanNommyde}});var c=require("./pngQuant");Object.defineProperty(exports,"PNGQuant",{enumerable:!0,get:function(){return c.PNGQuant}});
},{"./distanceCalculator":"ECoR","./cie94":"cjgF","./ciede2000":"YUpy","./cmetric":"u42b","./euclidean":"HW99","./manhattan":"h74p","./pngQuant":"YN08"}],"huLG":[function(require,module,exports) {
"use strict";var t=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractPaletteQuantizer=void 0;var e=function(){function e(){}return e.prototype.quantizeSync=function(){var e,r;try{for(var n=t(this.quantize()),o=n.next();!o.done;o=n.next()){var a=o.value;if(a.palette)return a.palette}}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}throw new Error("unreachable")},e}();exports.AbstractPaletteQuantizer=e;
},{}],"NqCT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Point=void 0;var t=require("../constants/bt709"),i=function(){function i(){this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}return i.createByQuadruplet=function(t){var r=new i;return r.r=0|t[0],r.g=0|t[1],r.b=0|t[2],r.a=0|t[3],r._loadUINT32(),r._loadQuadruplet(),r},i.createByRGBA=function(t,r,s,a){var h=new i;return h.r=0|t,h.g=0|r,h.b=0|s,h.a=0|a,h._loadUINT32(),h._loadQuadruplet(),h},i.createByUint32=function(t){var r=new i;return r.uint32=t>>>0,r._loadRGBA(),r._loadQuadruplet(),r},i.prototype.from=function(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this.uint32=t.uint32,this.rgba[0]=t.r,this.rgba[1]=t.g,this.rgba[2]=t.b,this.rgba[3]=t.a},i.prototype.getLuminosity=function(i){var r=this.r,s=this.g,a=this.b;return i&&(r=Math.min(255,255-this.a+this.a*r/255),s=Math.min(255,255-this.a+this.a*s/255),a=Math.min(255,255-this.a+this.a*a/255)),r*t.Y.RED+s*t.Y.GREEN+a*t.Y.BLUE},i.prototype._loadUINT32=function(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0},i.prototype._loadRGBA=function(){this.r=255&this.uint32,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255},i.prototype._loadQuadruplet=function(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a},i}();exports.Point=i;
},{"../constants/bt709":"fL8V"}],"MCKH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointContainer=void 0;var t=require("./point"),r=function(){function r(){this._width=0,this._height=0,this._pointArray=[]}return r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.setWidth=function(t){this._width=t},r.prototype.setHeight=function(t){this._height=t},r.prototype.getPointArray=function(){return this._pointArray},r.prototype.clone=function(){var n=new r;n._width=this._width,n._height=this._height;for(var e=0,i=this._pointArray.length;e<i;e++)n._pointArray[e]=t.Point.createByUint32(0|this._pointArray[e].uint32);return n},r.prototype.toUint32Array=function(){for(var t=this._pointArray.length,r=new Uint32Array(t),n=0;n<t;n++)r[n]=this._pointArray[n].uint32;return r},r.prototype.toUint8Array=function(){return new Uint8Array(this.toUint32Array().buffer)},r.fromHTMLImageElement=function(t){var n=t.naturalWidth,e=t.naturalHeight,i=document.createElement("canvas");return i.width=n,i.height=e,i.getContext("2d").drawImage(t,0,0,n,e,0,0,n,e),r.fromHTMLCanvasElement(i)},r.fromHTMLCanvasElement=function(t){var n=t.width,e=t.height,i=t.getContext("2d").getImageData(0,0,n,e);return r.fromImageData(i)},r.fromImageData=function(t){var n=t.width,e=t.height;return r.fromUint8Array(t.data,n,e)},r.fromUint8Array=function(t,n,e){switch(Object.prototype.toString.call(t)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:t=new Uint8Array(t)}var i=new Uint32Array(t.buffer);return r.fromUint32Array(i,n,e)},r.fromUint32Array=function(n,e,i){var o=new r;o._width=e,o._height=i;for(var a=0,h=n.length;a<h;a++)o._pointArray[a]=t.Point.createByUint32(0|n[a]);return o},r.fromBuffer=function(t,n,e){var i=new Uint32Array(t.buffer,t.byteOffset,t.byteLength/Uint32Array.BYTES_PER_ELEMENT);return r.fromUint32Array(i,n,e)},r}();exports.PointContainer=r;
},{"./point":"NqCT"}],"eYYC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Palette=exports.hueGroup=void 0;var t=require("./pointContainer"),r=require("../conversion/rgb2hsl"),i=10;function n(t,r){for(var i=360/r,n=1,e=i-i/2;n<r;n++,e+=i)if(t>=e&&t<e+i)return n;return 0}exports.hueGroup=n;var e=function(){function e(){this._pointArray=[],this._i32idx={},this._pointContainer=new t.PointContainer,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}return e.prototype.add=function(t){this._pointArray.push(t),this._pointContainer.setWidth(this._pointArray.length)},e.prototype.has=function(t){for(var r=this._pointArray.length-1;r>=0;r--)if(t.uint32===this._pointArray[r].uint32)return!0;return!1},e.prototype.getNearestColor=function(t,r){return this._pointArray[0|this._getNearestIndex(t,r)]},e.prototype.getPointContainer=function(){return this._pointContainer},e.prototype._nearestPointFromCache=function(t){return"number"==typeof this._i32idx[t]?this._i32idx[t]:-1},e.prototype._getNearestIndex=function(t,r){var i=this._nearestPointFromCache(""+r.uint32);if(i>=0)return i;var n=Number.MAX_VALUE;i=0;for(var e=0,o=this._pointArray.length;e<o;e++){var s=this._pointArray[e],a=t.calculateRaw(r.r,r.g,r.b,r.a,s.r,s.g,s.b,s.a);a<n&&(n=a,i=e)}return this._i32idx[r.uint32]=i,i},e.prototype.sort=function(){this._i32idx={},this._pointArray.sort(function(t,e){var o=r.rgb2hsl(t.r,t.g,t.b),s=r.rgb2hsl(e.r,e.g,e.b),a=t.r===t.g&&t.g===t.b?0:1+n(o.h,i),u=(e.r===e.g&&e.g===e.b?0:1+n(s.h,i))-a;if(u)return-u;var p=t.getLuminosity(!0),h=e.getLuminosity(!0);if(h-p!=0)return h-p;var _=(100*s.s|0)-(100*o.s|0);return _?-_:0})},e}();exports.Palette=e;
},{"./pointContainer":"MCKH","../conversion/rgb2hsl":"AUZx"}],"eZXw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HueStatistics=void 0;var t=require("../conversion/rgb2hsl"),s=require("./palette"),i=function(){return function(){this.num=0,this.cols=[]}}(),o=function(){function o(t,s){this._numGroups=t,this._minCols=s,this._stats=[];for(var o=0;o<=t;o++)this._stats[o]=new i;this._groupsFull=0}return o.prototype.check=function(i){this._groupsFull===this._numGroups+1&&(this.check=function(){});var o=255&i,n=i>>>8&255,u=i>>>16&255,r=o===n&&n===u?0:1+s.hueGroup(t.rgb2hsl(o,n,u).h,this._numGroups),h=this._stats[r],e=this._minCols;h.num++,h.num>e||(h.num===e&&this._groupsFull++,h.num<=e&&this._stats[r].cols.push(i))},o.prototype.injectIntoDictionary=function(t){for(var s=0;s<=this._numGroups;s++)this._stats[s].num<=this._minCols&&this._stats[s].cols.forEach(function(s){t[s]?t[s]++:t[s]=1})},o.prototype.injectIntoArray=function(t){for(var s=0;s<=this._numGroups;s++)this._stats[s].num<=this._minCols&&this._stats[s].cols.forEach(function(s){-1===t.indexOf(s)&&t.push(s)})},o}();exports.HueStatistics=o;
},{"../conversion/rgb2hsl":"AUZx","./palette":"eYYC"}],"jPXC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProgressTracker=void 0;var s=function(){function s(t,e){this._range=t,this._progressRange=e,this._step=Math.max(1,this._range/(s.steps+1)|0),this._last=-this._step,this.progress=0}return s.prototype.shouldNotify=function(s){return s-this._last>=this._step&&(this._last=s,this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange),!0)},s.steps=100,s}();exports.ProgressTracker=s;
},{}],"IVlr":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var n in r)"default"!==n&&Object.hasOwnProperty.call(r,n)&&e(i,r,n);return t(i,r),i};Object.defineProperty(exports,"__esModule",{value:!0}),exports.arithmetic=exports.ProgressTracker=exports.HueStatistics=exports.Palette=exports.PointContainer=exports.Point=void 0;var i=r(require("./arithmetic"));exports.arithmetic=i;var n=require("./hueStatistics");Object.defineProperty(exports,"HueStatistics",{enumerable:!0,get:function(){return n.HueStatistics}});var o=require("./palette");Object.defineProperty(exports,"Palette",{enumerable:!0,get:function(){return o.Palette}});var a=require("./point");Object.defineProperty(exports,"Point",{enumerable:!0,get:function(){return a.Point}});var u=require("./pointContainer");Object.defineProperty(exports,"PointContainer",{enumerable:!0,get:function(){return u.PointContainer}});var s=require("./progressTracker");Object.defineProperty(exports,"ProgressTracker",{enumerable:!0,get:function(){return s.ProgressTracker}});
},{"./arithmetic":"DzPw","./hueStatistics":"eZXw","./palette":"eYYC","./point":"NqCT","./pointContainer":"MCKH","./progressTracker":"jPXC"}],"qdcX":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function r(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),i=this&&this.__generator||function(t,i){var e,r,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(n){return function(o){return function(n){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(a=2&n[0]?r.return:n[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=i.call(t,s)}catch(o){n=[6,o],r=0}finally{e=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}},e=this&&this.__values||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NeuQuant=void 0;var r=require("../../utils/palette"),a=require("../../utils/point"),n=require("../paletteQuantizer"),s=require("../../utils"),o=3,_=function(){function t(t){this.r=this.g=this.b=this.a=t}return t.prototype.toPoint=function(){return a.Point.createByRGBA(this.r>>o,this.g>>o,this.b>>o,this.a>>o)},t.prototype.subtract=function(t,i,e,r){this.r-=0|t,this.g-=0|i,this.b-=0|e,this.a-=0|r},t}(),h=function(a){function n(t,i){void 0===i&&(i=256);var e=a.call(this)||this;return e._distance=t,e._pointArray=[],e._sampleFactor=1,e._networkSize=i,e._distance.setWhitePoint(255<<o,255<<o,255<<o,255<<o),e}return t(n,a),n.prototype.sample=function(t){this._pointArray=this._pointArray.concat(t.getPointArray())},n.prototype.quantize=function(){return i(this,function(t){switch(t.label){case 0:return this._init(),[5,e(this._learn())];case 1:return t.sent(),[4,{palette:this._buildPalette(),progress:100}];case 2:return t.sent(),[2]}})},n.prototype._init=function(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(var t=0;t<this._networkSize;t++)this._network[t]=new _((t<<o+8)/this._networkSize|0),this._freq[t]=n._initialBias/this._networkSize|0,this._bias[t]=0},n.prototype._learn=function(){var t,e,r,a,_,h,u,l,c,p,f,b,y,d,S,m,w,v,B;return i(this,function(i){switch(i.label){case 0:for(t=this._sampleFactor,(e=this._pointArray.length)<n._minpicturebytes&&(t=1),r=30+(t-1)/3|0,_=(a=e/t|0)/n._nCycles|0,h=n._initAlpha,u=(this._networkSize>>3)*n._radiusBias,(l=u>>n._radiusBiasShift)<=1&&(l=0),f=0;f<l;f++)this._radPower[f]=h*((l*l-f*f)*n._radBias/(l*l))>>>0;c=e<n._minpicturebytes?1:e%n._prime1!=0?n._prime1:e%n._prime2!=0?n._prime2:e%n._prime3!=0?n._prime3:n._prime4,p=new s.ProgressTracker(a,99),f=0,b=0,i.label=1;case 1:return f<a?p.shouldNotify(f)?[4,{progress:p.progress}]:[3,3]:[3,5];case 2:i.sent(),i.label=3;case 3:if(y=this._pointArray[b],d=y.b<<o,S=y.g<<o,m=y.r<<o,w=y.a<<o,v=this._contest(d,S,m,w),this._alterSingle(h,v,d,S,m,w),0!==l&&this._alterNeighbour(l,v,d,S,m,w),(b+=c)>=e&&(b-=e),0===_&&(_=1),++f%_==0)for(h-=h/r|0,u-=u/n._radiusDecrease|0,(l=u>>n._radiusBiasShift)<=1&&(l=0),B=0;B<l;B++)this._radPower[B]=h*((l*l-B*B)*n._radBias/(l*l))>>>0;i.label=4;case 4:return[3,1];case 5:return[2]}})},n.prototype._buildPalette=function(){var t=new r.Palette;return this._network.forEach(function(i){t.add(i.toPoint())}),t.sort(),t},n.prototype._alterNeighbour=function(t,i,e,r,a,s){var o=i-t;o<-1&&(o=-1);var _=i+t;_>this._networkSize&&(_=this._networkSize);for(var h=i+1,u=i-1,l=1;h<_||u>o;){var c,p=this._radPower[l++]/n._alphaRadBias;if(h<_)(c=this._network[h++]).subtract(p*(c.r-a),p*(c.g-r),p*(c.b-e),p*(c.a-s));if(u>o)(c=this._network[u--]).subtract(p*(c.r-a),p*(c.g-r),p*(c.b-e),p*(c.a-s))}},n.prototype._alterSingle=function(t,i,e,r,a,s){t/=n._initAlpha;var o=this._network[i];o.subtract(t*(o.r-a),t*(o.g-r),t*(o.b-e),t*(o.a-s))},n.prototype._contest=function(t,i,e,r){for(var a=1020<<o,s=~(1<<31),_=s,h=-1,u=h,l=0;l<this._networkSize;l++){var c=this._network[l],p=this._distance.calculateNormalized(c,{r:e,g:i,b:t,a:r})*a|0;p<s&&(s=p,h=l);var f=p-(this._bias[l]>>n._initialBiasShift-o);f<_&&(_=f,u=l);var b=this._freq[l]>>n._betaShift;this._freq[l]-=b,this._bias[l]+=b<<n._gammaShift}return this._freq[h]+=n._beta,this._bias[h]-=n._betaGamma,u},n._prime1=499,n._prime2=491,n._prime3=487,n._prime4=503,n._minpicturebytes=n._prime4,n._nCycles=100,n._initialBiasShift=16,n._initialBias=1<<n._initialBiasShift,n._gammaShift=10,n._betaShift=10,n._beta=n._initialBias>>n._betaShift,n._betaGamma=n._initialBias<<n._gammaShift-n._betaShift,n._radiusBiasShift=6,n._radiusBias=1<<n._radiusBiasShift,n._radiusDecrease=30,n._alphaBiasShift=10,n._initAlpha=1<<n._alphaBiasShift,n._radBiasShift=8,n._radBias=1<<n._radBiasShift,n._alphaRadBiasShift=n._alphaBiasShift+n._radBiasShift,n._alphaRadBias=1<<n._alphaRadBiasShift,n}(n.AbstractPaletteQuantizer);exports.NeuQuant=h;
},{"../../utils/palette":"eYYC","../../utils/point":"NqCT","../paletteQuantizer":"huLG","../../utils":"IVlr"}],"Kvxg":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function r(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),i=this&&this.__generator||function(t,i){var e,r,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(n){return function(o){return function(n){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(a=2&n[0]?r.return:n[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=i.call(t,s)}catch(o){n=[6,o],r=0}finally{e=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}},e=this&&this.__values||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NeuQuantFloat=void 0;var r=require("../../utils/palette"),a=require("../../utils/point"),n=require("../paletteQuantizer"),s=require("../../utils"),o=3,_=function(){function t(t){this.r=this.g=this.b=this.a=t}return t.prototype.toPoint=function(){return a.Point.createByRGBA(this.r>>o,this.g>>o,this.b>>o,this.a>>o)},t.prototype.subtract=function(t,i,e,r){this.r-=t,this.g-=i,this.b-=e,this.a-=r},t}(),h=function(a){function n(t,i){void 0===i&&(i=256);var e=a.call(this)||this;return e._distance=t,e._pointArray=[],e._sampleFactor=1,e._networkSize=i,e._distance.setWhitePoint(255<<o,255<<o,255<<o,255<<o),e}return t(n,a),n.prototype.sample=function(t){this._pointArray=this._pointArray.concat(t.getPointArray())},n.prototype.quantize=function(){return i(this,function(t){switch(t.label){case 0:return this._init(),[5,e(this._learn())];case 1:return t.sent(),[4,{palette:this._buildPalette(),progress:100}];case 2:return t.sent(),[2]}})},n.prototype._init=function(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(var t=0;t<this._networkSize;t++)this._network[t]=new _((t<<o+8)/this._networkSize),this._freq[t]=n._initialBias/this._networkSize,this._bias[t]=0},n.prototype._learn=function(){var t,e,r,a,_,h,u,l,c,p,f,b,y,d,S,m,w,v,B;return i(this,function(i){switch(i.label){case 0:for(t=this._sampleFactor,(e=this._pointArray.length)<n._minpicturebytes&&(t=1),r=30+(t-1)/3,_=(a=e/t)/n._nCycles|0,h=n._initAlpha,u=(this._networkSize>>3)*n._radiusBias,(l=u>>n._radiusBiasShift)<=1&&(l=0),f=0;f<l;f++)this._radPower[f]=h*((l*l-f*f)*n._radBias/(l*l));c=e<n._minpicturebytes?1:e%n._prime1!=0?n._prime1:e%n._prime2!=0?n._prime2:e%n._prime3!=0?n._prime3:n._prime4,p=new s.ProgressTracker(a,99),f=0,b=0,i.label=1;case 1:return f<a?p.shouldNotify(f)?[4,{progress:p.progress}]:[3,3]:[3,5];case 2:i.sent(),i.label=3;case 3:if(y=this._pointArray[b],d=y.b<<o,S=y.g<<o,m=y.r<<o,w=y.a<<o,v=this._contest(d,S,m,w),this._alterSingle(h,v,d,S,m,w),0!==l&&this._alterNeighbour(l,v,d,S,m,w),(b+=c)>=e&&(b-=e),0===_&&(_=1),++f%_==0)for(h-=h/r,u-=u/n._radiusDecrease,(l=u>>n._radiusBiasShift)<=1&&(l=0),B=0;B<l;B++)this._radPower[B]=h*((l*l-B*B)*n._radBias/(l*l));i.label=4;case 4:return[3,1];case 5:return[2]}})},n.prototype._buildPalette=function(){var t=new r.Palette;return this._network.forEach(function(i){t.add(i.toPoint())}),t.sort(),t},n.prototype._alterNeighbour=function(t,i,e,r,a,s){var o=i-t;o<-1&&(o=-1);var _=i+t;_>this._networkSize&&(_=this._networkSize);for(var h=i+1,u=i-1,l=1;h<_||u>o;){var c,p=this._radPower[l++]/n._alphaRadBias;if(h<_)(c=this._network[h++]).subtract(p*(c.r-a),p*(c.g-r),p*(c.b-e),p*(c.a-s));if(u>o)(c=this._network[u--]).subtract(p*(c.r-a),p*(c.g-r),p*(c.b-e),p*(c.a-s))}},n.prototype._alterSingle=function(t,i,e,r,a,s){t/=n._initAlpha;var o=this._network[i];o.subtract(t*(o.r-a),t*(o.g-r),t*(o.b-e),t*(o.a-s))},n.prototype._contest=function(t,i,e,r){for(var a=1020<<o,s=~(1<<31),_=s,h=-1,u=h,l=0;l<this._networkSize;l++){var c=this._network[l],p=this._distance.calculateNormalized(c,{r:e,g:i,b:t,a:r})*a;p<s&&(s=p,h=l);var f=p-(this._bias[l]>>n._initialBiasShift-o);f<_&&(_=f,u=l);var b=this._freq[l]>>n._betaShift;this._freq[l]-=b,this._bias[l]+=b<<n._gammaShift}return this._freq[h]+=n._beta,this._bias[h]-=n._betaGamma,u},n._prime1=499,n._prime2=491,n._prime3=487,n._prime4=503,n._minpicturebytes=n._prime4,n._nCycles=100,n._initialBiasShift=16,n._initialBias=1<<n._initialBiasShift,n._gammaShift=10,n._betaShift=10,n._beta=n._initialBias>>n._betaShift,n._betaGamma=n._initialBias<<n._gammaShift-n._betaShift,n._radiusBiasShift=6,n._radiusBias=1<<n._radiusBiasShift,n._radiusDecrease=30,n._alphaBiasShift=10,n._initAlpha=1<<n._alphaBiasShift,n._radBiasShift=8,n._radBias=1<<n._radBiasShift,n._alphaRadBiasShift=n._alphaBiasShift+n._radBiasShift,n._alphaRadBias=1<<n._alphaRadBiasShift,n}(n.AbstractPaletteQuantizer);exports.NeuQuantFloat=h;
},{"../../utils/palette":"eYYC","../../utils/point":"NqCT","../paletteQuantizer":"huLG","../../utils":"IVlr"}],"odoH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorHistogram=void 0;var t=require("../../utils/hueStatistics"),o=require("../../utils/arithmetic"),e=function(){function e(o,r){this._method=o,this._minHueCols=r<<2,this._initColors=r<<2,this._hueStats=new t.HueStatistics(e._hueGroups,this._minHueCols),this._histogram=Object.create(null)}return e.prototype.sample=function(t){switch(this._method){case 1:this._colorStats1D(t);break;case 2:this._colorStats2D(t)}},e.prototype.getImportanceSortedColorsIDXI32=function(){var t,e=this,r=o.stableSort(Object.keys(this._histogram),function(t,o){return e._histogram[o]-e._histogram[t]});if(0===r.length)return[];switch(this._method){case 1:var i=Math.min(r.length,this._initColors),s=r[i-1],h=this._histogram[s];t=r.slice(0,i);for(var a=i,n=r.length;a<n&&this._histogram[r[a]]===h;)t.push(r[a++]);this._hueStats.injectIntoArray(t);break;case 2:t=r;break;default:throw new Error("Incorrect method")}return t.map(function(t){return+t})},e.prototype._colorStats1D=function(t){for(var o=this._histogram,e=t.getPointArray(),r=e.length,i=0;i<r;i++){var s=e[i].uint32;this._hueStats.check(s),s in o?o[s]++:o[s]=1}},e.prototype._colorStats2D=function(t){var o=this,r=t.getWidth(),i=t.getHeight(),s=t.getPointArray(),h=e._boxSize[0],a=e._boxSize[1],n=h*a,u=this._makeBoxes(r,i,h,a),c=this._histogram;u.forEach(function(t){var i=Math.round(t.w*t.h/n)*e._boxPixels;i<2&&(i=2);var h={};o._iterateBox(t,r,function(t){var e=s[t].uint32;o._hueStats.check(e),e in c?c[e]++:e in h?++h[e]>=i&&(c[e]=h[e]):h[e]=1})}),this._hueStats.injectIntoDictionary(c)},e.prototype._iterateBox=function(t,o,e){var r=t,i=r.y*o+r.x,s=(r.y+r.h-1)*o+(r.x+r.w-1),h=o-r.w+1,a=0,n=i;do{e.call(this,n),n+=++a%r.w==0?h:1}while(n<=s)},e.prototype._makeBoxes=function(t,o,e,r){for(var i=t%e,s=o%r,h=t-i,a=o-s,n=[],u=0;u<o;u+=r)for(var c=0;c<t;c+=e)n.push({x:c,y:u,w:c===h?i:e,h:u===a?s:r});return n},e._boxSize=[64,64],e._boxPixels=2,e._hueGroups=10,e}();exports.ColorHistogram=e;
},{"../../utils/hueStatistics":"eZXw","../../utils/arithmetic":"DzPw"}],"O3wz":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e=this&&this.__generator||function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RGBQuant=void 0;var n=require("../../utils/palette"),o=require("../../utils/point"),i=require("./colorHistogram"),s=require("../paletteQuantizer"),a=require("../../utils/arithmetic"),l=require("../../utils"),u=function(){return function(t,e,r){this.index=t,this.color=e,this.distance=r}}(),c=function(s){function c(t,e,r){void 0===e&&(e=256),void 0===r&&(r=2);var n=s.call(this)||this;return n._distance=t,n._colors=e,n._histogram=new i.ColorHistogram(r,e),n._initialDistance=.01,n._distanceIncrement=.005,n}return t(c,s),c.prototype.sample=function(t){this._histogram.sample(t)},c.prototype.quantize=function(){var t;return e(this,function(e){switch(e.label){case 0:if(0===(t=this._histogram.getImportanceSortedColorsIDXI32()).length)throw new Error("No colors in image");return[5,r(this._buildPalette(t))];case 1:return e.sent(),[2]}})},c.prototype._buildPalette=function(t){var r,i,s,c,h,f,p,_,b,y,d,g,v,w,m,P,x;return e(this,function(e){switch(e.label){case 0:for(r=new n.Palette,i=r.getPointContainer().getPointArray(),s=new Array(t.length),b=0;b<t.length;b++)i.push(o.Point.createByUint32(t[b])),s[b]=1;c=i.length,h=[],f=c,p=this._initialDistance,_=new l.ProgressTracker(f-this._colors,99),e.label=1;case 1:if(!(f>this._colors))return[3,7];h.length=0,b=0,e.label=2;case 2:return b<c?_.shouldNotify(c-f)?[4,{progress:_.progress}]:[3,4]:[3,6];case 3:e.sent(),e.label=4;case 4:if(0===s[b])return[3,5];for(y=i[b],d=b+1;d<c;d++)0!==s[d]&&(g=i[d],(v=this._distance.calculateNormalized(y,g))<p&&(h.push(new u(d,g,v)),s[d]=0,f--));e.label=5;case 5:return b++,[3,2];case 6:return p+=f>3*this._colors?this._initialDistance:this._distanceIncrement,[3,1];case 7:if(f<this._colors)for(a.stableSort(h,function(t,e){return e.distance-t.distance}),w=0;f<this._colors&&w<h.length;)m=h[w],s[m.index]=1,f++,w++;for(P=i.length,x=P-1;x>=0;x--)0===s[x]&&(x!==P-1&&(i[x]=i[P-1]),--P);return i.length=P,r.sort(),[4,{palette:r,progress:100}];case 8:return e.sent(),[2]}})},c}(s.AbstractPaletteQuantizer);exports.RGBQuant=c;
},{"../../utils/palette":"eYYC","../../utils/point":"NqCT","./colorHistogram":"odoH","../paletteQuantizer":"huLG","../../utils/arithmetic":"DzPw","../../utils":"IVlr"}],"pct4":[function(require,module,exports) {
"use strict";var i=this&&this.__extends||function(){var i=function(e,m){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var m in e)e.hasOwnProperty(m)&&(i[m]=e[m])})(e,m)};return function(e,m){function u(){this.constructor=e}i(e,m),e.prototype=null===m?Object.create(m):(u.prototype=m.prototype,new u)}}(),e=this&&this.__generator||function(i,e){var m,u,a,n,t={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function r(n){return function(r){return function(n){if(m)throw new TypeError("Generator is already executing.");for(;t;)try{if(m=1,u&&(a=2&n[0]?u.return:n[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,n[1])).done)return a;switch(u=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(!(a=(a=t.trys).length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){t=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){t.label=n[1];break}if(6===n[0]&&t.label<a[1]){t.label=a[1],a=n;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(n);break}a[2]&&t.ops.pop(),t.trys.pop();continue}n=e.call(i,t)}catch(r){n=[6,r],u=0}finally{m=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,r])}}},m=this&&this.__values||function(i){var e="function"==typeof Symbol&&Symbol.iterator,m=e&&i[e],u=0;if(m)return m.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&u>=i.length&&(i=void 0),{value:i&&i[u++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WuQuant=exports.WuColorCube=void 0;var u=require("../../utils/palette"),a=require("../../utils/point"),n=require("../paletteQuantizer"),t=require("../../utils");function r(i){for(var e=[],m=0;m<i;m++)e[m]=0;return e}function s(i,e,m,u){for(var a=new Array(i),n=0;n<i;n++){a[n]=new Array(e);for(var t=0;t<e;t++){a[n][t]=new Array(m);for(var r=0;r<m;r++){a[n][t][r]=new Array(u);for(var s=0;s<u;s++)a[n][t][r][s]=0}}}return a}function h(i,e,m){for(var u=new Array(i),a=0;a<i;a++){u[a]=new Array(e);for(var n=0;n<e;n++){u[a][n]=new Array(m);for(var t=0;t<m;t++)u[a][n][t]=0}}return u}function l(i,e,m,u,a){for(var n=0;n<e;n++){i[n]=[];for(var t=0;t<m;t++){i[n][t]=[];for(var r=0;r<u;r++)i[n][t][r]=a}}}function M(i,e,m){for(var u=0;u<e;u++)i[u]=m}var o=function(){return function(){}}();exports.WuColorCube=o;var _=function(n){function _(i,e,m){void 0===e&&(e=256),void 0===m&&(m=5);var u=n.call(this)||this;return u._distance=i,u._setQuality(m),u._initialize(e),u}return i(_,n),_.prototype.sample=function(i){for(var e=i.getPointArray(),m=0,u=e.length;m<u;m++)this._addColor(e[m]);this._pixels=this._pixels.concat(e)},_.prototype.quantize=function(){var i,n,t,r,s,h,l,M;return e(this,function(e){switch(e.label){case 0:return[5,m(this._preparePalette())];case 1:for(e.sent(),i=new u.Palette,n=0;n<this._colors;n++)this._sums[n]>0&&(t=this._sums[n],r=this._reds[n]/t,s=this._greens[n]/t,h=this._blues[n]/t,l=this._alphas[n]/t,M=a.Point.createByRGBA(0|r,0|s,0|h,0|l),i.add(M));return i.sort(),[4,{palette:i,progress:100}];case 2:return e.sent(),[2]}})},_.prototype._preparePalette=function(){var i,u,a,n,t,s,h,l,M,o,d,x,p,b,c,g,f,S,z,v,y;return e(this,function(e){switch(e.label){case 0:return[5,m(this._calculateMoments())];case 1:for(e.sent(),i=0,u=r(this._colors),a=1;a<this._colors;++a){for(this._cut(this._cubes[i],this._cubes[a])?(u[i]=this._cubes[i].volume>1?this._calculateVariance(this._cubes[i]):0,u[a]=this._cubes[a].volume>1?this._calculateVariance(this._cubes[a]):0):(u[i]=0,a--),i=0,n=u[0],d=1;d<=a;++d)u[d]>n&&(n=u[d],i=d);if(n<=0){this._colors=a+1;break}}for(t=[],s=[],h=[],l=[],M=0;M<this._colors;++M)(o=_._volume(this._cubes[M],this._weights))>0?(t[M]=_._volume(this._cubes[M],this._momentsRed)/o|0,s[M]=_._volume(this._cubes[M],this._momentsGreen)/o|0,h[M]=_._volume(this._cubes[M],this._momentsBlue)/o|0,l[M]=_._volume(this._cubes[M],this._momentsAlpha)/o|0):(t[M]=0,s[M]=0,h[M]=0,l[M]=0);for(this._reds=r(this._colors+1),this._greens=r(this._colors+1),this._blues=r(this._colors+1),this._alphas=r(this._colors+1),this._sums=r(this._colors+1),d=0,x=this._pixels.length;d<x;d++){for(p=this._pixels[d],-1,b=-1,c=Number.MAX_VALUE,g=0;g<this._colors;g++)f=t[g],S=s[g],z=h[g],v=l[g],(y=this._distance.calculateRaw(f,S,z,v,p.r,p.g,p.b,p.a))<c&&(c=y,b=g);this._reds[b]+=p.r,this._greens[b]+=p.g,this._blues[b]+=p.b,this._alphas[b]+=p.a,this._sums[b]++}return[2]}})},_.prototype._addColor=function(i){var e=8-this._significantBitsPerChannel,m=1+(i.r>>e),u=1+(i.g>>e),a=1+(i.b>>e),n=1+(i.a>>e);this._weights[n][m][u][a]++,this._momentsRed[n][m][u][a]+=i.r,this._momentsGreen[n][m][u][a]+=i.g,this._momentsBlue[n][m][u][a]+=i.b,this._momentsAlpha[n][m][u][a]+=i.a,this._moments[n][m][u][a]+=this._table[i.r]+this._table[i.g]+this._table[i.b]+this._table[i.a]},_.prototype._calculateMoments=function(){var i,m,u,a,n,r,s,o,_,d,x,p,b,c,g,f,S,z,v,y,w,A,B,I;return e(this,function(e){switch(e.label){case 0:i=[],m=[],u=[],a=[],n=[],r=[],s=h(this._sideSize,this._sideSize,this._sideSize),o=h(this._sideSize,this._sideSize,this._sideSize),_=h(this._sideSize,this._sideSize,this._sideSize),d=h(this._sideSize,this._sideSize,this._sideSize),x=h(this._sideSize,this._sideSize,this._sideSize),p=h(this._sideSize,this._sideSize,this._sideSize),b=0,c=new t.ProgressTracker(this._alphaMaxSideIndex*this._maxSideIndex,99),g=1,e.label=1;case 1:if(!(g<=this._alphaMaxSideIndex))return[3,7];l(s,this._sideSize,this._sideSize,this._sideSize,0),l(o,this._sideSize,this._sideSize,this._sideSize,0),l(_,this._sideSize,this._sideSize,this._sideSize,0),l(d,this._sideSize,this._sideSize,this._sideSize,0),l(x,this._sideSize,this._sideSize,this._sideSize,0),l(p,this._sideSize,this._sideSize,this._sideSize,0),f=1,e.label=2;case 2:return f<=this._maxSideIndex?c.shouldNotify(b)?[4,{progress:c.progress}]:[3,4]:[3,6];case 3:e.sent(),e.label=4;case 4:for(M(i,this._sideSize,0),M(m,this._sideSize,0),M(u,this._sideSize,0),M(a,this._sideSize,0),M(n,this._sideSize,0),M(r,this._sideSize,0),S=1;S<=this._maxSideIndex;++S)for(z=0,v=0,y=0,w=0,A=0,B=0,I=1;I<=this._maxSideIndex;++I)z+=this._weights[g][f][S][I],v+=this._momentsRed[g][f][S][I],y+=this._momentsGreen[g][f][S][I],w+=this._momentsBlue[g][f][S][I],A+=this._momentsAlpha[g][f][S][I],B+=this._moments[g][f][S][I],i[I]+=z,m[I]+=v,u[I]+=y,a[I]+=w,n[I]+=A,r[I]+=B,s[f][S][I]=s[f-1][S][I]+i[I],o[f][S][I]=o[f-1][S][I]+m[I],_[f][S][I]=_[f-1][S][I]+u[I],d[f][S][I]=d[f-1][S][I]+a[I],x[f][S][I]=x[f-1][S][I]+n[I],p[f][S][I]=p[f-1][S][I]+r[I],this._weights[g][f][S][I]=this._weights[g-1][f][S][I]+s[f][S][I],this._momentsRed[g][f][S][I]=this._momentsRed[g-1][f][S][I]+o[f][S][I],this._momentsGreen[g][f][S][I]=this._momentsGreen[g-1][f][S][I]+_[f][S][I],this._momentsBlue[g][f][S][I]=this._momentsBlue[g-1][f][S][I]+d[f][S][I],this._momentsAlpha[g][f][S][I]=this._momentsAlpha[g-1][f][S][I]+x[f][S][I],this._moments[g][f][S][I]=this._moments[g-1][f][S][I]+p[f][S][I];e.label=5;case 5:return++f,++b,[3,2];case 6:return++g,[3,1];case 7:return[2]}})},_._volumeFloat=function(i,e){return e[i.alphaMaximum][i.redMaximum][i.greenMaximum][i.blueMaximum]-e[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMaximum]-e[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMaximum]+e[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMaximum]-e[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMaximum]+e[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMaximum]+e[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMaximum]-e[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(e[i.alphaMaximum][i.redMaximum][i.greenMaximum][i.blueMinimum]-e[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMinimum]-e[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMinimum]+e[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]-e[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMinimum]+e[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]+e[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]-e[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum])},_._volume=function(i,e){return 0|_._volumeFloat(i,e)},_._top=function(i,e,m,u){var a;switch(e){case _._alpha:a=u[m][i.redMaximum][i.greenMaximum][i.blueMaximum]-u[m][i.redMaximum][i.greenMinimum][i.blueMaximum]-u[m][i.redMinimum][i.greenMaximum][i.blueMaximum]+u[m][i.redMinimum][i.greenMinimum][i.blueMaximum]-(u[m][i.redMaximum][i.greenMaximum][i.blueMinimum]-u[m][i.redMaximum][i.greenMinimum][i.blueMinimum]-u[m][i.redMinimum][i.greenMaximum][i.blueMinimum]+u[m][i.redMinimum][i.greenMinimum][i.blueMinimum]);break;case _._red:a=u[i.alphaMaximum][m][i.greenMaximum][i.blueMaximum]-u[i.alphaMaximum][m][i.greenMinimum][i.blueMaximum]-u[i.alphaMinimum][m][i.greenMaximum][i.blueMaximum]+u[i.alphaMinimum][m][i.greenMinimum][i.blueMaximum]-(u[i.alphaMaximum][m][i.greenMaximum][i.blueMinimum]-u[i.alphaMaximum][m][i.greenMinimum][i.blueMinimum]-u[i.alphaMinimum][m][i.greenMaximum][i.blueMinimum]+u[i.alphaMinimum][m][i.greenMinimum][i.blueMinimum]);break;case _._green:a=u[i.alphaMaximum][i.redMaximum][m][i.blueMaximum]-u[i.alphaMaximum][i.redMinimum][m][i.blueMaximum]-u[i.alphaMinimum][i.redMaximum][m][i.blueMaximum]+u[i.alphaMinimum][i.redMinimum][m][i.blueMaximum]-(u[i.alphaMaximum][i.redMaximum][m][i.blueMinimum]-u[i.alphaMaximum][i.redMinimum][m][i.blueMinimum]-u[i.alphaMinimum][i.redMaximum][m][i.blueMinimum]+u[i.alphaMinimum][i.redMinimum][m][i.blueMinimum]);break;case _._blue:a=u[i.alphaMaximum][i.redMaximum][i.greenMaximum][m]-u[i.alphaMaximum][i.redMaximum][i.greenMinimum][m]-u[i.alphaMaximum][i.redMinimum][i.greenMaximum][m]+u[i.alphaMaximum][i.redMinimum][i.greenMinimum][m]-(u[i.alphaMinimum][i.redMaximum][i.greenMaximum][m]-u[i.alphaMinimum][i.redMaximum][i.greenMinimum][m]-u[i.alphaMinimum][i.redMinimum][i.greenMaximum][m]+u[i.alphaMinimum][i.redMinimum][i.greenMinimum][m]);break;default:throw new Error("impossible")}return 0|a},_._bottom=function(i,e,m){switch(e){case _._alpha:return-m[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMaximum]+m[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMaximum]+m[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMaximum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(-m[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMinimum]+m[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]+m[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);case _._red:return-m[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMaximum]+m[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMaximum]+m[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMaximum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(-m[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMinimum]+m[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]+m[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);case _._green:return-m[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMaximum]+m[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMaximum]+m[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMaximum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(-m[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMinimum]+m[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]+m[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);case _._blue:return-m[i.alphaMaximum][i.redMaximum][i.greenMaximum][i.blueMinimum]+m[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMinimum]+m[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMinimum]-m[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]-(-m[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMinimum]+m[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]+m[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);default:return 0}},_.prototype._calculateVariance=function(i){var e=_._volume(i,this._momentsRed),m=_._volume(i,this._momentsGreen),u=_._volume(i,this._momentsBlue),a=_._volume(i,this._momentsAlpha);return _._volumeFloat(i,this._moments)-(e*e+m*m+u*u+a*a)/_._volume(i,this._weights)},_.prototype._maximize=function(i,e,m,u,a,n,t,r,s){for(var h=0|_._bottom(i,e,this._momentsRed),l=0|_._bottom(i,e,this._momentsGreen),M=0|_._bottom(i,e,this._momentsBlue),o=0|_._bottom(i,e,this._momentsAlpha),d=0|_._bottom(i,e,this._weights),x=0,p=-1,b=m;b<u;++b){var c=h+_._top(i,e,b,this._momentsRed),g=l+_._top(i,e,b,this._momentsGreen),f=M+_._top(i,e,b,this._momentsBlue),S=o+_._top(i,e,b,this._momentsAlpha),z=d+_._top(i,e,b,this._weights);if(0!==z){var v=c*c+g*g+f*f+S*S,y=v/z;c=a-c,g=n-g,f=t-f,S=r-S,0!==(z=s-z)&&(y+=(v=c*c+g*g+f*f+S*S)/z)>x&&(x=y,p=b)}}return{max:x,position:p}},_.prototype._cut=function(i,e){var m,u=_._volume(i,this._momentsRed),a=_._volume(i,this._momentsGreen),n=_._volume(i,this._momentsBlue),t=_._volume(i,this._momentsAlpha),r=_._volume(i,this._weights),s=this._maximize(i,_._red,i.redMinimum+1,i.redMaximum,u,a,n,t,r),h=this._maximize(i,_._green,i.greenMinimum+1,i.greenMaximum,u,a,n,t,r),l=this._maximize(i,_._blue,i.blueMinimum+1,i.blueMaximum,u,a,n,t,r),M=this._maximize(i,_._alpha,i.alphaMinimum+1,i.alphaMaximum,u,a,n,t,r);if(M.max>=s.max&&M.max>=h.max&&M.max>=l.max){if(m=_._alpha,M.position<0)return!1}else m=s.max>=M.max&&s.max>=h.max&&s.max>=l.max?_._red:h.max>=M.max&&h.max>=s.max&&h.max>=l.max?_._green:_._blue;switch(e.redMaximum=i.redMaximum,e.greenMaximum=i.greenMaximum,e.blueMaximum=i.blueMaximum,e.alphaMaximum=i.alphaMaximum,m){case _._red:e.redMinimum=i.redMaximum=s.position,e.greenMinimum=i.greenMinimum,e.blueMinimum=i.blueMinimum,e.alphaMinimum=i.alphaMinimum;break;case _._green:e.greenMinimum=i.greenMaximum=h.position,e.redMinimum=i.redMinimum,e.blueMinimum=i.blueMinimum,e.alphaMinimum=i.alphaMinimum;break;case _._blue:e.blueMinimum=i.blueMaximum=l.position,e.redMinimum=i.redMinimum,e.greenMinimum=i.greenMinimum,e.alphaMinimum=i.alphaMinimum;break;case _._alpha:e.alphaMinimum=i.alphaMaximum=M.position,e.blueMinimum=i.blueMinimum,e.redMinimum=i.redMinimum,e.greenMinimum=i.greenMinimum}return i.volume=(i.redMaximum-i.redMinimum)*(i.greenMaximum-i.greenMinimum)*(i.blueMaximum-i.blueMinimum)*(i.alphaMaximum-i.alphaMinimum),e.volume=(e.redMaximum-e.redMinimum)*(e.greenMaximum-e.greenMinimum)*(e.blueMaximum-e.blueMinimum)*(e.alphaMaximum-e.alphaMinimum),!0},_.prototype._initialize=function(i){this._colors=i,this._cubes=[];for(var e=0;e<i;e++)this._cubes[e]=new o;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(var m=0;m<256;++m)this._table[m]=m*m;this._pixels=[]},_.prototype._setQuality=function(i){void 0===i&&(i=5),this._significantBitsPerChannel=i,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1},_._alpha=3,_._red=2,_._green=1,_._blue=0,_}(n.AbstractPaletteQuantizer);exports.WuQuant=_;
},{"../../utils/palette":"eYYC","../../utils/point":"NqCT","../paletteQuantizer":"huLG","../../utils":"IVlr"}],"ubLl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"PQkN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./paletteQuantizer");Object.defineProperty(exports,"AbstractPaletteQuantizer",{enumerable:!0,get:function(){return e.AbstractPaletteQuantizer}});var t=require("./neuquant/neuquant");Object.defineProperty(exports,"NeuQuant",{enumerable:!0,get:function(){return t.NeuQuant}});var r=require("./neuquant/neuquantFloat");Object.defineProperty(exports,"NeuQuantFloat",{enumerable:!0,get:function(){return r.NeuQuantFloat}});var u=require("./rgbquant/rgbquant");Object.defineProperty(exports,"RGBQuant",{enumerable:!0,get:function(){return u.RGBQuant}});var n=require("./rgbquant/colorHistogram");Object.defineProperty(exports,"ColorHistogram",{enumerable:!0,get:function(){return n.ColorHistogram}});var a=require("./wu/wuQuant");Object.defineProperty(exports,"WuQuant",{enumerable:!0,get:function(){return a.WuQuant}}),Object.defineProperty(exports,"WuColorCube",{enumerable:!0,get:function(){return a.WuColorCube}});var o=require("./paletteQuantizerYieldValue");Object.defineProperty(exports,"PaletteQuantizerYieldValue",{enumerable:!0,get:function(){return o.PaletteQuantizerYieldValue}});
},{"./paletteQuantizer":"huLG","./neuquant/neuquant":"qdcX","./neuquant/neuquantFloat":"Kvxg","./rgbquant/rgbquant":"O3wz","./rgbquant/colorHistogram":"odoH","./wu/wuQuant":"pct4","./paletteQuantizerYieldValue":"ubLl"}],"s5OD":[function(require,module,exports) {
"use strict";var t=this&&this.__values||function(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractImageQuantizer=void 0;var r=function(){function r(){}return r.prototype.quantizeSync=function(r,e){var n,o;try{for(var i=t(this.quantize(r,e)),a=i.next();!a.done;a=i.next()){var u=a.value;if(u.pointContainer)return u.pointContainer}}catch(l){n={error:l}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}throw new Error("unreachable")},r}();exports.AbstractImageQuantizer=r;
},{}],"AmvO":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),t=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NearestColor=void 0;var r=require("./imageQuantizer"),n=require("../utils/progressTracker"),o=function(r){function o(e){var t=r.call(this)||this;return t._distance=e,t}return e(o,r),o.prototype.quantize=function(e,r){var o,a,i,s,u,c,l,f;return t(this,function(t){switch(t.label){case 0:o=e.getPointArray(),a=e.getWidth(),i=e.getHeight(),s=new n.ProgressTracker(i,99),u=0,t.label=1;case 1:return u<i?s.shouldNotify(u)?[4,{progress:s.progress}]:[3,3]:[3,5];case 2:t.sent(),t.label=3;case 3:for(c=0,l=u*a;c<a;c++,l++)(f=o[l]).from(r.getNearestColor(this._distance,f));t.label=4;case 4:return u++,[3,1];case 5:return[4,{pointContainer:e,progress:100}];case 6:return t.sent(),[2]}})},o}(r.AbstractImageQuantizer);exports.NearestColor=o;
},{"./imageQuantizer":"s5OD","../utils/progressTracker":"jPXC"}],"mg4U":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),r=this&&this.__generator||function(e,r){var t,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(s){o=[6,s],n=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},t=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ErrorDiffusionArray=exports.ErrorDiffusionArrayKernel=void 0;var n,i=require("./imageQuantizer"),o=require("../utils/point"),a=require("../utils/arithmetic"),s=require("../utils/progressTracker");!function(e){e[e.FloydSteinberg=0]="FloydSteinberg",e[e.FalseFloydSteinberg=1]="FalseFloydSteinberg",e[e.Stucki=2]="Stucki",e[e.Atkinson=3]="Atkinson",e[e.Jarvis=4]="Jarvis",e[e.Burkes=5]="Burkes",e[e.Sierra=6]="Sierra",e[e.TwoSierra=7]="TwoSierra",e[e.SierraLite=8]="SierraLite"}(n=exports.ErrorDiffusionArrayKernel||(exports.ErrorDiffusionArrayKernel={}));var l=function(i){function l(e,r,t,n,o){void 0===t&&(t=!0),void 0===n&&(n=0),void 0===o&&(o=!1);var a=i.call(this)||this;return a._setKernel(r),a._distance=e,a._minColorDistance=n,a._serpentine=t,a._calculateErrorLikeGIMP=o,a}return e(l,i),l.prototype.quantize=function(e,n){var i,l,u,c,f,h,p,b,y,_,d,k,g,v,S,w,m,E,x,A,D,F,P,R,L,T,O,q,B,C,K,j,z,G,I,J;return r(this,function(r){switch(r.label){case 0:i=e.getPointArray(),l=new o.Point,u=e.getWidth(),c=e.getHeight(),f=[],h=1,p=1;try{for(b=t(this._kernel),y=b.next();!y.done;y=b.next())_=y.value,d=_[2]+1,p<d&&(p=d)}catch(M){I={error:M}}finally{try{y&&!y.done&&(J=b.return)&&J.call(b)}finally{if(I)throw I.error}}for(C=0;C<p;C++)this._fillErrorLine(f[C]=[],u);k=new s.ProgressTracker(c,99),g=0,r.label=1;case 1:return g<c?k.shouldNotify(g)?[4,{progress:k.progress}]:[3,3]:[3,5];case 2:r.sent(),r.label=3;case 3:for(this._serpentine&&(h*=-1),v=g*u,S=1===h?0:u-1,w=1===h?u:-1,this._fillErrorLine(f[0],u),f.push(f.shift()),m=f[0],E=S,x=v+S;E!==w;E+=h,x+=h)if(A=i[x],D=m[E],l.from(A),F=o.Point.createByRGBA(a.inRange0to255Rounded(A.r+D[0]),a.inRange0to255Rounded(A.g+D[1]),a.inRange0to255Rounded(A.b+D[2]),a.inRange0to255Rounded(A.a+D[3])),P=n.getNearestColor(this._distance,F),A.from(P),!(this._minColorDistance&&this._distance.calculateNormalized(A,P)<this._minColorDistance))for(R=void 0,L=void 0,T=void 0,O=void 0,this._calculateErrorLikeGIMP?(R=F.r-P.r,L=F.g-P.g,T=F.b-P.b,O=F.a-P.a):(R=l.r-P.r,L=l.g-P.g,T=l.b-P.b,O=l.a-P.a),q=1===h?0:this._kernel.length-1,B=1===h?this._kernel.length:-1,C=q;C!==B;C+=h)K=this._kernel[C][1]*h,j=this._kernel[C][2],K+E>=0&&K+E<u&&j+g>=0&&j+g<c&&(z=this._kernel[C][0],(G=f[j][K+E])[0]+=R*z,G[1]+=L*z,G[2]+=T*z,G[3]+=O*z);r.label=4;case 4:return g++,[3,1];case 5:return[4,{pointContainer:e,progress:100}];case 6:return r.sent(),[2]}})},l.prototype._fillErrorLine=function(e,r){e.length>r&&(e.length=r);for(var t=e.length,n=0;n<t;n++){var i=e[n];i[0]=i[1]=i[2]=i[3]=0}for(n=t;n<r;n++)e[n]=[0,0,0,0]},l.prototype._setKernel=function(e){switch(e){case n.FloydSteinberg:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case n.FalseFloydSteinberg:this._kernel=[[3/8,1,0],[3/8,0,1],[.25,1,1]];break;case n.Stucki:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case n.Atkinson:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case n.Jarvis:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case n.Burkes:this._kernel=[[.25,1,0],[.125,2,0],[2/32,-2,1],[.125,-1,1],[.25,0,1],[.125,1,1],[2/32,2,1]];break;case n.Sierra:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[.125,-1,1],[5/32,0,1],[.125,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case n.TwoSierra:this._kernel=[[.25,1,0],[3/16,2,0],[1/16,-2,1],[.125,-1,1],[3/16,0,1],[.125,1,1],[1/16,2,1]];break;case n.SierraLite:this._kernel=[[.5,1,0],[.25,-1,1],[.25,0,1]];break;default:throw new Error("ErrorDiffusionArray: unknown kernel = "+e)}},l}(i.AbstractImageQuantizer);exports.ErrorDiffusionArray=l;
},{"./imageQuantizer":"s5OD","../utils/point":"NqCT","../utils/arithmetic":"DzPw","../utils/progressTracker":"jPXC"}],"sg4U":[function(require,module,exports) {
"use strict";var e=this&&this.__generator||function(e,r){var t,n,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,n=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(s=(s=c.trys).length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){c.label=a[1];break}if(6===a[0]&&c.label<s[1]){c.label=s[1],s=a;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(a);break}s[2]&&c.ops.pop(),c.trys.pop();continue}a=r.call(e,c)}catch(u){a=[6,u],n=0}finally{t=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},r=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.hilbertCurve=void 0;var t,n=require("../../utils/progressTracker");function s(s,u,o){var l,i,h,f;return e(this,function(e){switch(e.label){case 0:return l=Math.max(s,u),i=Math.floor(Math.log(l)/Math.log(2)+1),h=new n.ProgressTracker(s*u,99),[5,r(a(f={width:s,height:u,level:i,callback:o,tracker:h,index:0,x:0,y:0},t.UP))];case 1:return e.sent(),c(f,t.NONE),[2]}})}function a(n,s){return e(this,function(e){switch(e.label){case 0:return n.level<1?[2]:n.tracker.shouldNotify(n.index)?[4,{progress:n.tracker.progress}]:[3,2];case 1:e.sent(),e.label=2;case 2:switch(n.level--,s){case t.LEFT:return[3,3];case t.RIGHT:return[3,8];case t.UP:return[3,13];case t.DOWN:return[3,18]}return[3,23];case 3:return[5,r(a(n,t.UP))];case 4:return e.sent(),c(n,t.RIGHT),[5,r(a(n,t.LEFT))];case 5:return e.sent(),c(n,t.DOWN),[5,r(a(n,t.LEFT))];case 6:return e.sent(),c(n,t.LEFT),[5,r(a(n,t.DOWN))];case 7:return e.sent(),[3,24];case 8:return[5,r(a(n,t.DOWN))];case 9:return e.sent(),c(n,t.LEFT),[5,r(a(n,t.RIGHT))];case 10:return e.sent(),c(n,t.UP),[5,r(a(n,t.RIGHT))];case 11:return e.sent(),c(n,t.RIGHT),[5,r(a(n,t.UP))];case 12:return e.sent(),[3,24];case 13:return[5,r(a(n,t.LEFT))];case 14:return e.sent(),c(n,t.DOWN),[5,r(a(n,t.UP))];case 15:return e.sent(),c(n,t.RIGHT),[5,r(a(n,t.UP))];case 16:return e.sent(),c(n,t.UP),[5,r(a(n,t.RIGHT))];case 17:return e.sent(),[3,24];case 18:return[5,r(a(n,t.RIGHT))];case 19:return e.sent(),c(n,t.UP),[5,r(a(n,t.DOWN))];case 20:return e.sent(),c(n,t.LEFT),[5,r(a(n,t.DOWN))];case 21:return e.sent(),c(n,t.DOWN),[5,r(a(n,t.LEFT))];case 22:return e.sent(),[3,24];case 23:return[3,24];case 24:return n.level++,[2]}})}function c(e,r){switch(e.x>=0&&e.x<e.width&&e.y>=0&&e.y<e.height&&(e.callback(e.x,e.y),e.index++),r){case t.LEFT:e.x--;break;case t.RIGHT:e.x++;break;case t.UP:e.y--;break;case t.DOWN:e.y++}}!function(e){e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e[e.DOWN=4]="DOWN"}(t||(t={})),exports.hilbertCurve=s;
},{"../../utils/progressTracker":"jPXC"}],"a1lp":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),r=this&&this.__generator||function(e,r){var t,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=r.call(e,u)}catch(a){i=[6,a],n=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},t=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ErrorDiffusionRiemersma=void 0;var n=require("./imageQuantizer"),o=require("./spaceFillingCurves/hilbertCurve"),i=require("../utils/point"),u=require("../utils/arithmetic"),a=function(n){function a(e,r,t){void 0===r&&(r=16),void 0===t&&(t=1);var o=n.call(this)||this;return o._distance=e,o._errorQueueSize=r,o._weights=a._createWeights(t,r),o}return e(a,n),a.prototype.quantize=function(e,n){var a,s,c,l,f,h,p=this;return r(this,function(r){switch(r.label){case 0:for(a=e.getPointArray(),s=e.getWidth(),c=e.getHeight(),l=[],f=0,h=0;h<this._errorQueueSize;h++)l[h]={r:0,g:0,b:0,a:0};return[5,t(o.hilbertCurve(s,c,function(e,r){for(var t=a[e+r*s],o=t.r,c=t.g,h=t.b,b=t.a,g=0;g<p._errorQueueSize;g++){var _=p._weights[g],d=l[(g+f)%p._errorQueueSize];o+=d.r*_,c+=d.g*_,h+=d.b*_,b+=d.a*_}var y=i.Point.createByRGBA(u.inRange0to255Rounded(o),u.inRange0to255Rounded(c),u.inRange0to255Rounded(h),u.inRange0to255Rounded(b)),v=n.getNearestColor(p._distance,y),m=((f=(f+1)%p._errorQueueSize)+p._errorQueueSize-1)%p._errorQueueSize;l[m].r=t.r-v.r,l[m].g=t.g-v.g,l[m].b=t.b-v.b,l[m].a=t.a-v.a,t.from(v)}))];case 1:return r.sent(),[4,{pointContainer:e,progress:100}];case 2:return r.sent(),[2]}})},a._createWeights=function(e,r){for(var t=[],n=Math.exp(Math.log(r)/(r-1)),o=0,i=1;o<r;o++)t[o]=(i+.5|0)/r*e,i*=n;return t},a}(n.AbstractImageQuantizer);exports.ErrorDiffusionRiemersma=a;
},{"./imageQuantizer":"s5OD","./spaceFillingCurves/hilbertCurve":"sg4U","../utils/point":"NqCT","../utils/arithmetic":"DzPw"}],"Ur8I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./imageQuantizer");Object.defineProperty(exports,"AbstractImageQuantizer",{enumerable:!0,get:function(){return e.AbstractImageQuantizer}});var r=require("./imageQuantizerYieldValue");Object.defineProperty(exports,"ImageQuantizerYieldValue",{enumerable:!0,get:function(){return r.ImageQuantizerYieldValue}});var t=require("./nearestColor");Object.defineProperty(exports,"NearestColor",{enumerable:!0,get:function(){return t.NearestColor}});var n=require("./array");Object.defineProperty(exports,"ErrorDiffusionArray",{enumerable:!0,get:function(){return n.ErrorDiffusionArray}}),Object.defineProperty(exports,"ErrorDiffusionArrayKernel",{enumerable:!0,get:function(){return n.ErrorDiffusionArrayKernel}});var i=require("./riemersma");Object.defineProperty(exports,"ErrorDiffusionRiemersma",{enumerable:!0,get:function(){return i.ErrorDiffusionRiemersma}});
},{"./imageQuantizer":"s5OD","./imageQuantizerYieldValue":"ubLl","./nearestColor":"AmvO","./array":"mg4U","./riemersma":"a1lp"}],"NKFz":[function(require,module,exports) {
"use strict";var t=this&&this.__values||function(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ssim=void 0;var r=require("../constants/bt709"),e=.01,n=.03;function o(t,r){if(t.getHeight()!==r.getHeight()||t.getWidth()!==r.getWidth())throw new Error("Images have different sizes!");var o=Math.pow(255*e,2),a=Math.pow(255*n,2),h=0,f=0;return i(t,r,function(t,r,e,n){for(var i=0,u=0,l=0,v=0;v<t.length;v++)u+=Math.pow(t[v]-e,2),l+=Math.pow(r[v]-n,2),i+=(t[v]-e)*(r[v]-n);var s=t.length-1;u/=s,l/=s;var g=(2*e*n+o)*(2*(i/=s)+a),c=(Math.pow(e,2)+Math.pow(n,2)+o)*(u+l+a);f+=g/c,h++}),f/h}function i(t,r,e){for(var n=t.getWidth(),o=t.getHeight(),i=0;i<o;i+=8)for(var f=0;f<n;f+=8){var u=Math.min(8,n-f),l=Math.min(8,o-i),v=a(t,f,i,u,l),s=a(r,f,i,u,l);e(v,s,h(v),h(s))}}function a(t,e,n,o,i){for(var a=t.getPointArray(),h=[],f=0,u=n;u<n+i;u++)for(var l=u*t.getWidth(),v=e;v<e+o;v++){var s=a[l+v];h[f]=s.r*r.Y.RED+s.g*r.Y.GREEN+s.b*r.Y.BLUE,f++}return h}function h(r){var e,n,o=0;try{for(var i=t(r),a=i.next();!a.done;a=i.next()){o+=a.value}}catch(h){e={error:h}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return o/r.length}exports.ssim=o;
},{"../constants/bt709":"fL8V"}],"O5WG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./ssim");Object.defineProperty(exports,"ssim",{enumerable:!0,get:function(){return e.ssim}});
},{"./ssim":"NKFz"}],"qrAv":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process");!function(e,n){"use strict";if(!e.setImmediate){var a,s,o,c,i,r=1,f={},u=!1,l=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?a=function(e){t.nextTick(function(){m(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){m(e.data)},a=function(e){o.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(s=l.documentElement,a=function(e){var t=l.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):a=function(e){setTimeout(m,0,e)}:(c="setImmediate$"+Math.random()+"$",i=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(c)&&m(+t.data.slice(c.length))},e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),a=function(t){e.postMessage(c+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var s={callback:e,args:t};return f[r]=s,a(r),r++},d.clearImmediate=g}function g(e){delete f[e]}function m(e){if(u)setTimeout(m,0,e);else{var t=f[e];if(t){u=!0;try{!function(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a)}}(t)}finally{g(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self);
},{"process":"pBGv"}],"WzBe":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,n,t){void 0===t&&(t=n),Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[n]}})}:function(e,r,n,t){void 0===t&&(t=n),e[t]=r[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),n=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var a in n)"default"!==a&&Object.hasOwnProperty.call(n,a)&&e(t,n,a);return r(t,n),t},t=this&&this.__awaiter||function(e,r,n,t){return new(n||(n=Promise))(function(a,i){function o(e){try{s(t.next(e))}catch(r){i(r)}}function u(e){try{s(t.throw(e))}catch(r){i(r)}}function s(e){var r;e.done?a(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(o,u)}s((t=t.apply(e,r||[])).next())})},a=this&&this.__generator||function(e,r){var n,t,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,t&&(a=2&i[0]?t.return:i[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,i[1])).done)return a;switch(t=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=r.call(e,o)}catch(u){i=[6,u],t=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyPalette=exports.applyPaletteSync=exports.buildPalette=exports.buildPaletteSync=void 0,require("setimmediate");var i=n(require("./distance")),o=n(require("./image")),u=n(require("./palette"));function s(e,r){var n=void 0===r?{}:r,t=n.colorDistanceFormula,a=n.paletteQuantization,i=n.colors,o=w(d(t),a,i);return e.forEach(function(e){return o.sample(e)}),o.quantizeSync()}function c(e,r){var n=void 0===r?{}:r,i=n.colorDistanceFormula,o=n.paletteQuantization,u=n.colors,s=n.onProgress;return t(this,void 0,void 0,function(){return a(this,function(r){return[2,new Promise(function(r,n){var t,a,c=w(d(i),o,u);e.forEach(function(e){return c.sample(e)});var l=c.quantize(),f=function(){try{var e=l.next();e.done?r(t):(e.value.palette&&(t=e.value.palette),s&&s(e.value.progress),a=setImmediate(f))}catch(i){clearTimeout(a),n(i)}};a=setImmediate(f)})]})})}function l(e,r,n){var t=void 0===n?{}:n,a=t.colorDistanceFormula,i=t.imageQuantization;return p(d(a),i).quantizeSync(e,r)}function f(e,r,n){var i=void 0===n?{}:n,o=i.colorDistanceFormula,u=i.imageQuantization,s=i.onProgress;return t(this,void 0,void 0,function(){return a(this,function(n){return[2,new Promise(function(n,t){var a,i,c=p(d(o),u).quantize(e,r),l=function(){try{var e=c.next();e.done?n(a):(e.value.pointContainer&&(a=e.value.pointContainer),s&&s(e.value.progress),i=setImmediate(l))}catch(r){clearTimeout(i),t(r)}};i=setImmediate(l)})]})})}function d(e){switch(void 0===e&&(e="euclidean-bt709"),e){case"cie94-graphic-arts":return new i.CIE94GraphicArts;case"cie94-textiles":return new i.CIE94Textiles;case"ciede2000":return new i.CIEDE2000;case"color-metric":return new i.CMetric;case"euclidean":return new i.Euclidean;case"euclidean-bt709":return new i.EuclideanBT709;case"euclidean-bt709-noalpha":return new i.EuclideanBT709NoAlpha;case"manhattan":return new i.Manhattan;case"manhattan-bt709":return new i.ManhattanBT709;case"manhattan-nommyde":return new i.ManhattanNommyde;case"pngquant":return new i.PNGQuant;default:throw new Error("Unknown colorDistanceFormula "+e)}}function p(e,r){switch(void 0===r&&(r="floyd-steinberg"),r){case"nearest":return new o.NearestColor(e);case"riemersma":return new o.ErrorDiffusionRiemersma(e);case"floyd-steinberg":return new o.ErrorDiffusionArray(e,o.ErrorDiffusionArrayKernel.FloydSteinberg);case"false-floyd-steinberg":return new o.ErrorDiffusionArray(e,o.ErrorDiffusionArrayKernel.FalseFloydSteinberg);case"stucki":return new o.ErrorDiffusionArray(e,o.ErrorDiffusionArrayKernel.Stucki);case"atkinson":return new o.ErrorDiffusionArray(e,o.ErrorDiffusionArrayKernel.Atkinson);case"jarvis":return new o.ErrorDiffusionArray(e,o.ErrorDiffusionArrayKernel.Jarvis);case"burkes":return new o.ErrorDiffusionArray(e,o.ErrorDiffusionArrayKernel.Burkes);case"sierra":return new o.ErrorDiffusionArray(e,o.ErrorDiffusionArrayKernel.Sierra);case"two-sierra":return new o.ErrorDiffusionArray(e,o.ErrorDiffusionArrayKernel.TwoSierra);case"sierra-lite":return new o.ErrorDiffusionArray(e,o.ErrorDiffusionArrayKernel.SierraLite);default:throw new Error("Unknown imageQuantization "+r)}}function w(e,r,n){switch(void 0===r&&(r="wuquant"),void 0===n&&(n=256),r){case"neuquant":return new u.NeuQuant(e,n);case"rgbquant":return new u.RGBQuant(e,n);case"wuquant":return new u.WuQuant(e,n);case"neuquant-float":return new u.NeuQuantFloat(e,n);default:throw new Error("Unknown paletteQuantization "+r)}}exports.buildPaletteSync=s,exports.buildPalette=c,exports.applyPaletteSync=l,exports.applyPalette=f;
},{"setimmediate":"qrAv","./distance":"C2FF","./image":"Ur8I","./palette":"PQkN"}],"zWHZ":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var i in r)"default"!==i&&Object.hasOwnProperty.call(r,i)&&e(n,r,i);return t(n,r),n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.utils=exports.quality=exports.image=exports.palette=exports.distance=exports.conversion=exports.constants=void 0;var n=r(require("./constants"));exports.constants=n;var i=r(require("./conversion"));exports.conversion=i;var a=r(require("./distance"));exports.distance=a;var o=r(require("./palette"));exports.palette=o;var u=r(require("./image"));exports.image=u;var l=r(require("./quality"));exports.quality=l;var s=r(require("./utils"));exports.utils=s;var c=require("./basicAPI");Object.defineProperty(exports,"buildPalette",{enumerable:!0,get:function(){return c.buildPalette}}),Object.defineProperty(exports,"buildPaletteSync",{enumerable:!0,get:function(){return c.buildPaletteSync}}),Object.defineProperty(exports,"applyPalette",{enumerable:!0,get:function(){return c.applyPalette}}),Object.defineProperty(exports,"applyPaletteSync",{enumerable:!0,get:function(){return c.applyPaletteSync}}),Object.defineProperty(exports,"ImageQuantization",{enumerable:!0,get:function(){return c.ImageQuantization}}),Object.defineProperty(exports,"PaletteQuantization",{enumerable:!0,get:function(){return c.PaletteQuantization}}),Object.defineProperty(exports,"ColorDistanceFormula",{enumerable:!0,get:function(){return c.ColorDistanceFormula}});
},{"./constants":"Hata","./conversion":"vOfS","./distance":"C2FF","./palette":"PQkN","./image":"Ur8I","./quality":"O5WG","./utils":"IVlr","./basicAPI":"WzBe"}],"qIOr":[function(require,module,exports) {
"use strict";var __awaiter=this&&this.__awaiter||function(t,_,e,s){return new(e||(e=Promise))(function(a,i){function h(t){try{n(s.next(t))}catch(_){i(_)}}function r(t){try{n(s.throw(t))}catch(_){i(_)}}function n(t){var _;t.done?a(t.value):(_=t.value,_ instanceof e?_:new e(function(t){t(_)})).then(h,r)}n((s=s.apply(t,_||[])).next())})},__generator=this&&this.__generator||function(t,_){var e,s,a,i,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,s&&(a=2&i[0]?s.return:i[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,i[1])).done)return a;switch(s=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,s=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(!(a=(a=h.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=_.call(t,h)}catch(r){i=[6,r],s=0}finally{e=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertImageBlob=void 0;var canvas_1=require("canvas"),path_1=__importDefault(require("path")),enums_1=require("./enums"),round_1=__importDefault(require("locutus/php/math/round")),dechex_1=__importDefault(require("locutus/php/math/dechex")),str_pad_1=__importDefault(require("locutus/php/strings/str_pad")),count_1=__importDefault(require("locutus/php/array/count")),image_q_1=require("./image-q/image-q"),Converter=function(){function t(t,_,e,s,a,i,h){if(this.dith=!1,this.w=0,this.h=0,this.raw_len=0,this.alpha=!1,this.chroma=!1,this.swapEndian=!1,this.dith=s,this.w=t,this.h=_,this.imageData=e,this.r_earr=[],this.g_earr=[],this.b_earr=[],this.dith)for(var r=0;r<this.w+2;++r)this.r_earr[r]=0,this.g_earr[r]=0,this.b_earr[r]=0;this.r_nerr=0,this.g_nerr=0,this.b_nerr=0,this.cf=a,this.alpha=i,this.swapEndian=h}return t.prototype.convert=function(){return __awaiter(this,void 0,void 0,function(){var t,_,e,s,a,i,h,r,n,d,u,o,c,f=this;return __generator(this,function(l){switch(l.label){case 0:return this.cf==enums_1.ImageMode.CF_RAW||this.cf==enums_1.ImageMode.CF_RAW_ALPHA?(t=Array.from(this.imageData),this.raw_len=t.length,[2,(_=(_="\n    "+t.map(function(t,_){return"0x"+str_pad_1.default(dechex_1.default(t),2,"0","STR_PAD_LEFT")+(_%13==12?", \n    ":", ")}).join("")).substr(0,_.length-2))+"\n"]):(e=0,0,this.cf==enums_1.ImageMode.CF_INDEXED_1_BIT?(e=2,1):this.cf==enums_1.ImageMode.CF_INDEXED_2_BIT?(e=4,2):this.cf==enums_1.ImageMode.CF_INDEXED_4_BIT?(e=16,4):this.cf==enums_1.ImageMode.CF_INDEXED_8_BIT&&(e=256,8),this.d_out=[],e?(s=image_q_1.utils.PointContainer.fromUint8Array(this.imageData,this.w,this.h),[4,image_q_1.buildPalette([s],{colors:e})]):[3,3]);case 1:for(a=l.sent(),i=this.d_out,h=a.getPointContainer().getPointArray(),r=h.map(function(t){return t.uint32}),n=0;n<e;n++)n<h.length?i.push(h[n].b,h[n].g,h[n].r,h[n].a):i.push(0,0,0,0);return[4,image_q_1.applyPalette(s,a,{})];case 2:d=l.sent(),0,0,u=d.getPointArray(),this.imageData=[],u.forEach(function(t,_){var e=r.indexOf(t.uint32);if(-1==e)throw new Error("Unknown color??");f.imageData.push(e)}),l.label=3;case 3:for(o=0;o<this.h;o++)for(this.dith_reset(),c=0;c<this.w;++c)this.conv_px(c,o);return[2,this.format_to_c_array()]}})})},t.prototype.get_c_header=function(t){var _='#include "lvgl/lvgl.h"\n\n#ifndef LV_ATTRIBUTE_MEM_ALIGN\n#define LV_ATTRIBUTE_MEM_ALIGN\n#endif\n',e="LV_ATTRIBUTE_IMG_"+t.toUpperCase();return _+="#ifndef "+e+"\n#define "+e+"\n#endif\nconst LV_ATTRIBUTE_MEM_ALIGN "+e+" uint8_t "+t+"_map[] = {"},t.prototype.get_c_footer=function(t,_){var e="\n};\n\nconst lv_img_dsc_t "+_+" = {\n  .header.always_zero = 0,\n  .header.w = "+this.w+",\n  .header.h = "+this.h+",\n";return t==enums_1.ImageMode.CF_TRUE_COLOR?e+="  .data_size = "+this.w*this.h+" * LV_COLOR_SIZE / 8,\n  .header.cf = LV_IMG_CF_TRUE_COLOR,":t==enums_1.ImageMode.CF_TRUE_COLOR_ALPHA?e+="  .data_size = "+this.w*this.h+" * LV_IMG_PX_SIZE_ALPHA_BYTE,\n  .header.cf = LV_IMG_CF_TRUE_COLOR_ALPHA,":t==enums_1.ImageMode.CF_TRUE_COLOR_CHROMA?e+="  .data_size = "+this.w*this.h+" * LV_COLOR_SIZE / 8,\n  .header.cf = LV_IMG_CF_TRUE_COLOR_CHROMA_KEYED,":t==enums_1.ImageMode.CF_ALPHA_1_BIT?e+="  .data_size = "+count_1.default(this.d_out)+",\n  .header.cf = LV_IMG_CF_ALPHA_1BIT,":t==enums_1.ImageMode.CF_ALPHA_2_BIT?e+="  .data_size = "+count_1.default(this.d_out)+",\n  .header.cf = LV_IMG_CF_ALPHA_2BIT,":t==enums_1.ImageMode.CF_ALPHA_4_BIT?e+="  .data_size = "+count_1.default(this.d_out)+",\n  .header.cf = LV_IMG_CF_ALPHA_4BIT,":t==enums_1.ImageMode.CF_ALPHA_8_BIT?e+="  .data_size = "+count_1.default(this.d_out)+",\n  .header.cf = LV_IMG_CF_ALPHA_8BIT,":t==enums_1.ImageMode.CF_INDEXED_1_BIT?e+="  .data_size = "+count_1.default(this.d_out)+",\n  .header.cf = LV_IMG_CF_INDEXED_1BIT,":t==enums_1.ImageMode.CF_INDEXED_2_BIT?e+="  .data_size = "+count_1.default(this.d_out)+",\n  .header.cf = LV_IMG_CF_INDEXED_2BIT,":t==enums_1.ImageMode.CF_INDEXED_4_BIT?e+="  .data_size = "+count_1.default(this.d_out)+",\n  .header.cf = LV_IMG_CF_INDEXED_4BIT,":t==enums_1.ImageMode.CF_INDEXED_8_BIT?e+="  .data_size = "+count_1.default(this.d_out)+",\n  .header.cf = LV_IMG_CF_INDEXED_8BIT,":t==enums_1.ImageMode.CF_RAW?e+="  .data_size = "+this.raw_len+",\n  .header.cf = LV_IMG_CF_RAW,":t==enums_1.ImageMode.CF_RAW_ALPHA?e+="  .data_size = "+this.raw_len+",\n  .header.cf = LV_IMG_CF_RAW_ALPHA,":t==enums_1.ImageMode.CF_RAW_CHROMA&&(e+="  .data_size = "+this.raw_len+",\n  .header.cf = LV_IMG_CF_RAW_CHROMA_KEYED,"),e+="\n  .data = "+_+"_map,\n};\n"},t.prototype.conv_px=function(t,_){function e(t,_){t.push(_)}function s(t){return void 0!==t&&null!=t}var a,i=4*(_*this.w+t);a=this.alpha?this.imageData[i+3]:255;var h=this.imageData[i],r=this.imageData[i+1],n=this.imageData[i+2],d=this.imageData[_*this.w+t];if(this.cf!=enums_1.ImageMode.ICF_TRUE_COLOR_565&&this.cf!=enums_1.ImageMode.ICF_TRUE_COLOR_565_SWAP&&this.cf!=enums_1.ImageMode.ICF_TRUE_COLOR_332&&this.cf!=enums_1.ImageMode.ICF_TRUE_COLOR_888||this.dith_next(h,r,n,t),this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_332){var u=this.r_act|this.g_act>>3|this.b_act>>6;e(this.d_out,u),this.alpha&&e(this.d_out,a)}else if(this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_565){var o=this.r_act<<8|this.g_act<<3|this.b_act>>3;e(this.d_out,255&o),e(this.d_out,o>>8&255),this.alpha&&e(this.d_out,a)}else if(this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_565_SWAP){o=this.r_act<<8|this.g_act<<3|this.b_act>>3;e(this.d_out,o>>8&255),e(this.d_out,255&o),this.alpha&&e(this.d_out,a)}else if(this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_888)e(this.d_out,this.b_act),e(this.d_out,this.g_act),e(this.d_out,this.r_act),e(this.d_out,a);else if(this.cf==enums_1.ImageMode.CF_ALPHA_1_BIT){var c=this.w>>3;7&this.w&&c++;var f=c*_+(t>>3);s(this.d_out[f])||(this.d_out[f]=0),a>128&&(this.d_out[f]|=1<<7-(7&t))}else if(this.cf==enums_1.ImageMode.CF_ALPHA_2_BIT){c=this.w>>2;3&this.w&&c++;f=c*_+(t>>2);s(this.d_out[f])||(this.d_out[f]=0),this.d_out[f]|=a>>6<<6-2*(3&t)}else if(this.cf==enums_1.ImageMode.CF_ALPHA_4_BIT){c=this.w>>1;1&this.w&&c++;f=c*_+(t>>1);s(this.d_out[f])||(this.d_out[f]=0),this.d_out[f]|=a>>4<<4-4*(1&t)}else if(this.cf==enums_1.ImageMode.CF_ALPHA_8_BIT){f=this.w*_+t;this.d_out[f]=a}else if(this.cf==enums_1.ImageMode.CF_INDEXED_1_BIT){c=this.w>>3;7&this.w&&c++;f=c*_+(t>>3)+8;s(this.d_out[f])||(this.d_out[f]=0),this.d_out[f]|=(1&d)<<7-(7&t)}else if(this.cf==enums_1.ImageMode.CF_INDEXED_2_BIT){c=this.w>>2;3&this.w&&c++;f=c*_+(t>>2)+16;s(this.d_out[f])||(this.d_out[f]=0),this.d_out[f]|=(3&d)<<6-2*(3&t)}else if(this.cf==enums_1.ImageMode.CF_INDEXED_4_BIT){c=this.w>>1;1&this.w&&c++;f=c*_+(t>>1)+64;s(this.d_out[f])||(this.d_out[f]=0),this.d_out[f]|=(15&d)<<4-4*(1&t)}else if(this.cf==enums_1.ImageMode.CF_INDEXED_8_BIT){f=this.w*_+t+1024;this.d_out[f]=255&d}},t.prototype.dith_reset=function(){this.dith&&(this.r_nerr=0,this.g_nerr=0,this.b_nerr=0)},t.prototype.dith_next=function(t,_,e,s){this.dith?(this.r_act=t+this.r_nerr+this.r_earr[s+1],this.r_earr[s+1]=0,this.g_act=_+this.g_nerr+this.g_earr[s+1],this.g_earr[s+1]=0,this.b_act=e+this.b_nerr+this.b_earr[s+1],this.b_earr[s+1]=0,this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_332?(this.r_act=this.classify_pixel(this.r_act,3),this.g_act=this.classify_pixel(this.g_act,3),this.b_act=this.classify_pixel(this.b_act,2),this.r_act>224&&(this.r_act=224),this.g_act>224&&(this.g_act=224),this.b_act>192&&(this.b_act=192)):this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_565||this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_565_SWAP?(this.r_act=this.classify_pixel(this.r_act,5),this.g_act=this.classify_pixel(this.g_act,6),this.b_act=this.classify_pixel(this.b_act,5),this.r_act>248&&(this.r_act=248),this.g_act>252&&(this.g_act=252),this.b_act>248&&(this.b_act=248)):this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_888&&(this.r_act=this.classify_pixel(this.r_act,8),this.g_act=this.classify_pixel(this.g_act,8),this.b_act=this.classify_pixel(this.b_act,8),this.r_act>255&&(this.r_act=255),this.g_act>255&&(this.g_act=255),this.b_act>255&&(this.b_act=255)),this.r_nerr=t-this.r_act,this.g_nerr=_-this.g_act,this.b_nerr=e-this.b_act,this.r_nerr=round_1.default(7*this.r_nerr/16),this.g_nerr=round_1.default(7*this.g_nerr/16),this.b_nerr=round_1.default(7*this.b_nerr/16),this.r_earr[s]+=round_1.default(3*this.r_nerr/16),this.g_earr[s]+=round_1.default(3*this.g_nerr/16),this.b_earr[s]+=round_1.default(3*this.b_nerr/16),this.r_earr[s+1]+=round_1.default(5*this.r_nerr/16),this.g_earr[s+1]+=round_1.default(5*this.g_nerr/16),this.b_earr[s+1]+=round_1.default(5*this.b_nerr/16),this.r_earr[s+2]+=round_1.default(this.r_nerr/16),this.g_earr[s+2]+=round_1.default(this.g_nerr/16),this.b_earr[s+2]+=round_1.default(this.b_nerr/16)):this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_332?(this.r_act=this.classify_pixel(t,3),this.g_act=this.classify_pixel(_,3),this.b_act=this.classify_pixel(e,2),this.r_act>224&&(this.r_act=224),this.g_act>224&&(this.g_act=224),this.b_act>192&&(this.b_act=192)):this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_565||this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_565_SWAP?(this.r_act=this.classify_pixel(t,5),this.g_act=this.classify_pixel(_,6),this.b_act=this.classify_pixel(e,5),this.r_act>248&&(this.r_act=248),this.g_act>252&&(this.g_act=252),this.b_act>248&&(this.b_act=248)):this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_888&&(this.r_act=this.classify_pixel(t,8),this.g_act=this.classify_pixel(_,8),this.b_act=this.classify_pixel(e,8),this.r_act>255&&(this.r_act=255),this.g_act>255&&(this.g_act=255),this.b_act>255&&(this.b_act=255))},t.prototype.classify_pixel=function(t,_){var e=1<<8-_,s=round_1.default(t/e,0,"PHP_ROUND_HALF_DOWN")*e;return s<0&&(s=0),s},t.prototype.format_to_c_array=function(){var t="",_=0,e=this.h,s=this.w;if(this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_332)t+="\n#if LV_COLOR_DEPTH == 1 || LV_COLOR_DEPTH == 8",this.alpha?t+="\n  /*Pixel format: Alpha 8 bit, Red: 3 bit, Green: 3 bit, Blue: 2 bit*/":t+="\n  /*Pixel format: Red: 3 bit, Green: 3 bit, Blue: 2 bit*/";else if(this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_565)t+="\n#if LV_COLOR_DEPTH == 16 && LV_COLOR_16_SWAP == 0",this.alpha?t+="\n  /*Pixel format: Alpha 8 bit, Red: 5 bit, Green: 6 bit, Blue: 5 bit*/":t+="\n  /*Pixel format: Red: 5 bit, Green: 6 bit, Blue: 5 bit*/";else if(this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_565_SWAP)t+="\n#if LV_COLOR_DEPTH == 16 && LV_COLOR_16_SWAP != 0",this.alpha?t+="\n  /*Pixel format: Alpha 8 bit, Red: 5 bit, Green: 6 bit, Blue: 5 bit  BUT the 2  color bytes are swapped*/":t+="\n  /*Pixel format: Red: 5 bit, Green: 6 bit, Blue: 5 bit BUT the 2 bytes are swapped*/";else if(this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_888)t+="\n#if LV_COLOR_DEPTH == 32",this.alpha||(t+="\n  /*Pixel format: Fix 0xFF: 8 bit, Red: 8 bit, Green: 8 bit, Blue: 8 bit*/");else if(this.cf==enums_1.ImageMode.CF_INDEXED_1_BIT){t+="\n";for(var a=0;a<2;a++)t+="  0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+0]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+1]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+2]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+3]),2,"0","STR_PAD_LEFT")+", ",t+="\t/*Color of index "+a+"*/\n";_=4*a}else if(this.cf==enums_1.ImageMode.CF_INDEXED_2_BIT){for(t+="\n",a=0;a<4;a++)t+="  0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+0]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+1]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+2]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+3]),2,"0","STR_PAD_LEFT")+", ",t+="\t/*Color of index "+a+"*/\n";_=4*a}else if(this.cf==enums_1.ImageMode.CF_INDEXED_4_BIT){for(t+="\n",a=0;a<16;a++)t+="  0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+0]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+1]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+2]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+3]),2,"0","STR_PAD_LEFT")+", ",t+="\t/*Color of index "+a+"*/\n";_=4*a}else if(this.cf==enums_1.ImageMode.CF_INDEXED_8_BIT){for(t+="\n",a=0;a<256;a++)t+="  0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+0]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+1]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+2]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[4*a+3]),2,"0","STR_PAD_LEFT")+", ",t+="\t/*Color of index "+a+"*/\n";_=4*a}else this.cf!=enums_1.ImageMode.CF_RAW_ALPHA&&this.cf!=enums_1.ImageMode.CF_RAW_CHROMA||(e=1,s=count_1.default(this.d_out),_=1);this.d_out.push(0);for(var i=0;i<e;i++){t+="\n  ";for(var h=0;h<s;h++)_>=this.d_out.length&&console.error("index out of range ("+_+")"),this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_332?(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", ",_++,this.alpha&&(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", ",_++)):this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_565||this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_565_SWAP?(this.swapEndian?(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_+1]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", "):(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_+1]),2,"0","STR_PAD_LEFT")+", "),_+=2,this.alpha&&(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", ",_++)):this.cf==enums_1.ImageMode.ICF_TRUE_COLOR_888?(this.swapEndian?(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_+2]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_+1]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", "):(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_+1]),2,"0","STR_PAD_LEFT")+", ",t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_+2]),2,"0","STR_PAD_LEFT")+", "),t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_+3]),2,"0","STR_PAD_LEFT")+", ",_+=4):this.cf==enums_1.ImageMode.CF_ALPHA_1_BIT||this.cf==enums_1.ImageMode.CF_INDEXED_1_BIT?0==(7&h)&&(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", ",_++):this.cf==enums_1.ImageMode.CF_ALPHA_2_BIT||this.cf==enums_1.ImageMode.CF_INDEXED_2_BIT?0==(3&h)&&(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", ",_++):this.cf==enums_1.ImageMode.CF_ALPHA_4_BIT||this.cf==enums_1.ImageMode.CF_INDEXED_4_BIT?0==(1&h)&&(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", ",_++):this.cf==enums_1.ImageMode.CF_ALPHA_8_BIT||this.cf==enums_1.ImageMode.CF_INDEXED_8_BIT?(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", ",_++):this.cf!=enums_1.ImageMode.CF_RAW_ALPHA&&this.cf!=enums_1.ImageMode.CF_RAW_CHROMA||(t+="0x"+str_pad_1.default(dechex_1.default(this.d_out[_]),2,"0","STR_PAD_LEFT")+", ",0!=_&&_%16==0&&(t+="\n  "),_++)}return this.cf!=enums_1.ImageMode.ICF_TRUE_COLOR_332&&this.cf!=enums_1.ImageMode.ICF_TRUE_COLOR_565&&this.cf!=enums_1.ImageMode.ICF_TRUE_COLOR_565_SWAP&&this.cf!=enums_1.ImageMode.ICF_TRUE_COLOR_888||(t+="\n#endif"),t},t}();function convertImageBlob(t,_){return __awaiter(this,void 0,Promise,function(){var e,s,a,i,h,r,n,d,u,o,c;return __generator(this,function(f){switch(f.label){case 0:return s=_.outName,function(t,_){return _.cf!=enums_1.ImageMode.CF_RAW&&_.cf!=enums_1.ImageMode.CF_RAW_ALPHA&&_.cf!=enums_1.ImageMode.CF_RAW_CHROMA}(0,_)?(i=canvas_1.createCanvas(t.width,t.height),(h=i.getContext("2d")).drawImage(t,0,0),r=h.getImageData(0,0,t.width,t.height).data,n=_.cf==enums_1.ImageMode.CF_TRUE_COLOR_ALPHA||_.cf==enums_1.ImageMode.CF_ALPHA_1_BIT||_.cf==enums_1.ImageMode.CF_ALPHA_2_BIT||_.cf==enums_1.ImageMode.CF_ALPHA_4_BIT||_.cf==enums_1.ImageMode.CF_ALPHA_8_BIT,a=new Converter(t.width,t.height,r,_.dith,_.cf,n,_.swapEndian),_.cf!=enums_1.ImageMode.CF_TRUE_COLOR&&_.cf!=enums_1.ImageMode.CF_TRUE_COLOR_ALPHA?[3,5]:[4,new Converter(t.width,t.height,r,_.dith,enums_1.ImageMode.ICF_TRUE_COLOR_332,n,_.swapEndian).convert()]):[3,8];case 1:return d=f.sent(),[4,new Converter(t.width,t.height,r,_.dith,enums_1.ImageMode.ICF_TRUE_COLOR_565,n,_.swapEndian).convert()];case 2:return u=f.sent(),[4,new Converter(t.width,t.height,r,_.dith,enums_1.ImageMode.ICF_TRUE_COLOR_565_SWAP,n,_.swapEndian).convert()];case 3:return o=f.sent(),[4,new Converter(t.width,t.height,r,_.dith,enums_1.ImageMode.ICF_TRUE_COLOR_888,n,_.swapEndian).convert()];case 4:return c=f.sent(),e=d+u+o+c,[3,7];case 5:return[4,a.convert()];case 6:e=f.sent(),f.label=7;case 7:return console.log(t.width+"x"+t.height),[3,10];case 8:return[4,(a=new Converter(0,0,t,!1,_.cf,_.cf==enums_1.ImageMode.CF_RAW_ALPHA,_.swapEndian)).convert()];case 9:e=f.sent(),f.label=10;case 10:return[2,a.get_c_header(s)+e+a.get_c_footer(_.cf,s)]}})})}function convert(imagePath,options){return __awaiter(this,void 0,void 0,function(){var img;return __generator(this,function(_a){switch(_a.label){case 0:return options.cf==enums_1.ImageMode.CF_RAW||options.cf==enums_1.ImageMode.CF_RAW_ALPHA||options.cf==enums_1.ImageMode.CF_RAW_CHROMA?[3,2]:[4,canvas_1.loadImage(imagePath)];case 1:return img=_a.sent(),[3,3];case 2:eval("var fs = require('fs');"),img=fs.readFileSync(imagePath),_a.label=3;case 3:return[2,convertImageBlob(img,Object.assign({},options,{outName:options.outName||path_1.default.parse(imagePath).name}))]}})})}exports.convertImageBlob=convertImageBlob,exports.default=convert;
},{"canvas":"MHvi","path":"UUq2","./enums":"kQeA","locutus/php/math/round":"RLeF","locutus/php/math/dechex":"riTk","locutus/php/strings/str_pad":"HRvD","locutus/php/array/count":"uZjm","./image-q/image-q":"zWHZ"}],"KAEt":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(t,n){"function"==typeof e&&e.amd?e([],n):"undefined"!=typeof exports?n():(n(),t.FileSaver={})}(this,function(){"use strict";function e(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){r(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof t&&t.global===t?t:void 0,i=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(t,i,r){var s=a.URL||a.webkitURL,c=document.createElement("a");i=i||t.name||"download",c.download=i,c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?o(c):n(c.href)?e(t,i,r):o(c,c.target="_blank")):(c.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(c.href)},4e4),setTimeout(function(){o(c)},0))}:"msSaveOrOpenBlob"in navigator?function(t,a,i){if(a=a||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(t,i),a);else if(n(t))e(t,a,i);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){o(r)})}}:function(t,n,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var s="application/octet-stream"===t.type,c=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&c||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},u.readAsDataURL(t)}else{var f=a.URL||a.webkitURL,d=f.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});a.saveAs=r.saveAs=r,"undefined"!=typeof module&&(module.exports=r)});
},{}],"J4Nk":[function(require,module,exports) {
"use strict";var r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function n(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function o(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(r){return t[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}module.exports=o()?Object.assign:function(o,c){for(var a,i,s=n(o),f=1;f<arguments.length;f++){for(var u in a=Object(arguments[f]))t.call(a,u)&&(s[u]=a[u]);if(r){i=r(a);for(var b=0;b<i.length;b++)e.call(a,i[b])&&(s[i[b]]=a[i[b]])}}return s};
},{}],"rd3l":[function(require,module,exports) {
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],"fCKU":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],"XOAc":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),r=/%[sdj%]/g;exports.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,s=o.length,u=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),c=o[n];n<s;c=o[++n])h(c)||!z(c)?u+=" "+c:u+=" "+i(c);return u},exports.deprecate=function(r,n){if(j(e.process))return function(){return exports.deprecate(r,n).apply(this,arguments)};if(!0===t.noDeprecation)return r;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var n,o={};function i(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),x(t)?r.showHidden=t:t&&exports._extend(r,t),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),p(r,e,r.depth)}function s(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function u(e,t){return e}function c(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,t,r){if(e.customInspect&&t&&D(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return v(n)||(n=p(e,n,r)),n}var o=l(e,t);if(o)return o;var i=Object.keys(t),s=c(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return a(t);if(0===i.length){if(D(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(O(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return a(t)}var x,h="",b=!1,m=["{","}"];(d(t)&&(b=!0,m=["[","]"]),D(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return O(t)&&(h=" "+RegExp.prototype.toString.call(t)),w(t)&&(h=" "+Date.prototype.toUTCString.call(t)),E(t)&&(h=" "+a(t)),0!==i.length||b&&0!=t.length?r<0?O(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),x=b?f(e,t,r,s,i):i.map(function(n){return g(e,t,r,s,n,b)}),e.seen.pop(),y(x,h,m)):m[0]+h+m[1]}function l(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):x(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function a(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,o){for(var i=[],s=0,u=t.length;s<u;++s)$(t,String(s))?i.push(g(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(g(e,t,r,n,o,!0))}),i}function g(e,t,r,n,o,i){var s,u,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),$(n,o)||(s="["+o+"]"),u||(e.seen.indexOf(c.value)<0?(u=h(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),j(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function y(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function x(e){return"boolean"==typeof e}function h(e){return null===e}function b(e){return null==e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function S(e){return"symbol"==typeof e}function j(e){return void 0===e}function O(e){return z(e)&&"[object RegExp]"===A(e)}function z(e){return"object"==typeof e&&null!==e}function w(e){return z(e)&&"[object Date]"===A(e)}function E(e){return z(e)&&("[object Error]"===A(e)||e instanceof Error)}function D(e){return"function"==typeof e}function N(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function A(e){return Object.prototype.toString.call(e)}function J(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(j(n)&&(n=""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(n)){var r=t.pid;o[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else o[e]=function(){};return o[e]},exports.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=d,exports.isBoolean=x,exports.isNull=h,exports.isNullOrUndefined=b,exports.isNumber=m,exports.isString=v,exports.isSymbol=S,exports.isUndefined=j,exports.isRegExp=O,exports.isObject=z,exports.isDate=w,exports.isError=E,exports.isFunction=D,exports.isPrimitive=N,exports.isBuffer=require("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function H(){var e=new Date,t=[J(e.getHours()),J(e.getMinutes()),J(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exports.log=function(){console.log("%s - %s",H(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!z(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};
},{"./support/isBuffer":"rd3l","inherits":"fCKU","process":"pBGv"}],"DlZn":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e=require("object-assign");function r(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function n(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var i=require("util/"),o=Object.prototype.hasOwnProperty,u=Array.prototype.slice,a="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function f(e){return!n(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var s=module.exports=q,l=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(i.isFunction(t)){if(a)return t.name;var e=t.toString().match(l);return e&&e[1]}}function g(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function E(t){if(a||!i.isFunction(t))return i.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function h(t){return g(E(t.actual),128)+" "+t.operator+" "+g(E(t.expected),128)}function y(t,e,r,n,i){throw new s.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function q(t,e){t||y(t,!0,e,"==",s.ok)}function d(t,e,o,u){if(t===e)return!0;if(n(t)&&n(e))return 0===r(t,e);if(i.isDate(t)&&i.isDate(e))return t.getTime()===e.getTime();if(i.isRegExp(t)&&i.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(f(t)&&f(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(n(t)!==n(e))return!1;var a=(u=u||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===u.expected.indexOf(e)||(u.actual.push(t),u.expected.push(e),b(t,e,o,u))}return o?t===e:t==e}function m(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e,r,n){if(null==t||null==e)return!1;if(i.isPrimitive(t)||i.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=m(t),a=m(e);if(o&&!a||!o&&a)return!1;if(o)return d(t=u.call(t),e=u.call(e),r);var c,f,s=A(t),l=A(e);if(s.length!==l.length)return!1;for(s.sort(),l.sort(),f=s.length-1;f>=0;f--)if(s[f]!==l[f])return!1;for(f=s.length-1;f>=0;f--)if(!d(t[c=s[f]],e[c],r,n))return!1;return!0}function v(t,e,r){d(t,e,!0)&&y(t,e,r,"notDeepStrictEqual",v)}function x(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(r){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function S(t){var e;try{t()}catch(r){e=r}return e}function w(t,e,r,n){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=S(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!o&&y(o,r,"Missing expected exception"+n);var u="string"==typeof n,a=!t&&o&&!r;if((!t&&i.isError(o)&&u&&x(o,r)||a)&&y(o,r,"Got unwanted exception"+n),t&&o&&r&&!x(o,r)||!t&&o)throw o}function O(t,e){t||y(t,!0,e,"==",O)}s.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=h(this),this.generatedMessage=!0);var e=t.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=p(e),o=n.indexOf("\n"+i);if(o>=0){var u=n.indexOf("\n",o+1);n=n.substring(u+1)}this.stack=n}}},i.inherits(s.AssertionError,Error),s.fail=y,s.ok=q,s.equal=function(t,e,r){t!=e&&y(t,e,r,"==",s.equal)},s.notEqual=function(t,e,r){t==e&&y(t,e,r,"!=",s.notEqual)},s.deepEqual=function(t,e,r){d(t,e,!1)||y(t,e,r,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(t,e,r){d(t,e,!0)||y(t,e,r,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(t,e,r){d(t,e,!1)&&y(t,e,r,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=v,s.strictEqual=function(t,e,r){t!==e&&y(t,e,r,"===",s.strictEqual)},s.notStrictEqual=function(t,e,r){t===e&&y(t,e,r,"!==",s.notStrictEqual)},s.throws=function(t,e,r){w(!0,t,e,r)},s.doesNotThrow=function(t,e,r){w(!1,t,e,r)},s.ifError=function(t){if(t)throw t},s.strict=e(O,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var A=Object.keys||function(t){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e};
},{"object-assign":"J4Nk","util/":"XOAc"}],"Focm":[function(require,module,exports) {
"use strict";var e=i(require("bs-custom-file-input")),t=require("../lib/convert"),n=require("../lib/enums"),o=require("file-saver"),a=require("path"),r=require("assert");function i(e){return e&&e.__esModule?e:{default:e}}function c(){const e=$("#customFile")[0],t=$(".name-container"),n=t.children().length,o=Math.max(n,e.files.length);for(var a=0;a<o;a++)a>=n?t.append(`<input type="text" name="name${a}" id="name${a}" class="form-control" placeholder="Variable name of image ${a+1}" style="height:unset">`):a>=e.files.length&&t.get(0).removeChild(t.children().get(a));$(".name-row").css("display",e.files.length>0?"":"none")}$(document).ready(function(){e.default.init(),c()}),$("#customFile").change(c),$("#convert-button").on("click",async()=>{$("#convert-button").attr("disabled",!0);const e=$("#customFile")[0];for(var a=0;a<e.files.length;a++){const r=e.files[a];if(r){const e=new FileReader;await new Promise((i,c)=>{async function l(e){const r=$("#name"+a).val(),c=document.querySelector("#endian-checkbox").checked,l=await(0,t.convertImageBlob)(e,{cf:n.ImageMode[$("#cf").val()],imageName:r,outName:r,swapEndian:c});console.log(l);e=new Blob([l],{type:"text/x-c;charset=utf-8"});(0,o.saveAs)(e,r+".c"),i()}$("#cf").val().startsWith("CF_RAW")?(e.readAsArrayBuffer(r),e.onload=function(e){console.log("loaded");const t=e.target.result;l(new Uint8Array(t))}):(e.onload=function(e){var t=new Image;t.onload=function(){console.log("loaded"),l(t)},t.onerror=function(e){c(e)},t.src=e.target.result},e.readAsDataURL(r))})}}$("#convert-button").removeAttr("disabled")}),window.setImmediate=(e=>setTimeout(e,0));
},{"bs-custom-file-input":"w8ch","../lib/convert":"qIOr","../lib/enums":"kQeA","file-saver":"KAEt","path":"UUq2","assert":"DlZn"}]},{},["Focm"], null)
//# sourceMappingURL=web.a68f4c15.js.map