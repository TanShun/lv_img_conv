{"mappings":"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","sources":["lib/convert.ts","node_modules/canvas/browser.js","node_modules/canvas/lib/parse-font.js","node_modules/path-browserify/index.js","node_modules/process/browser.js","lib/enums.ts","lib/image-q/constants/bt709.ts","lib/image-q/conversion/rgb2xyz.ts","lib/image-q/conversion/rgb2hsl.ts","lib/image-q/utils/arithmetic.ts","lib/image-q/conversion/rgb2lab.ts","lib/image-q/conversion/xyz2lab.ts","lib/image-q/conversion/lab2xyz.ts","lib/image-q/conversion/xyz2rgb.ts","lib/image-q/distance/distanceCalculator.ts","lib/image-q/distance/cie94.ts","lib/image-q/distance/ciede2000.ts","lib/image-q/distance/cmetric.ts","lib/image-q/distance/euclidean.ts","lib/image-q/distance/manhattan.ts","lib/image-q/distance/pngQuant.ts","lib/image-q/palette/paletteQuantizer.ts","lib/image-q/palette/neuquant/neuquant.ts","lib/image-q/utils/palette.ts","lib/image-q/utils/pointContainer.ts","lib/image-q/utils/point.ts","lib/image-q/utils/hueStatistics.ts","lib/image-q/utils/progressTracker.ts","lib/image-q/palette/neuquant/neuquantFloat.ts","lib/image-q/palette/rgbquant/rgbquant.ts","lib/image-q/palette/rgbquant/colorHistogram.ts","lib/image-q/palette/wu/wuQuant.ts","lib/image-q/image/imageQuantizer.ts","lib/image-q/image/nearestColor.ts","lib/image-q/image/array.ts","lib/image-q/image/riemersma.ts","lib/image-q/image/spaceFillingCurves/hilbertCurve.ts","lib/image-q/basicAPI.ts","node_modules/setimmediate/setImmediate.js","lib/helpers.ts","node_modules/assert/build/assert.js","node_modules/assert/build/internal/errors.js","node_modules/util/util.js","node_modules/util/support/types.js","node_modules/is-arguments/index.js","node_modules/has-tostringtag/shams.js","node_modules/has-symbols/shams.js","node_modules/call-bind/callBound.js","node_modules/get-intrinsic/index.js","node_modules/has-symbols/index.js","node_modules/function-bind/index.js","node_modules/function-bind/implementation.js","node_modules/has/src/index.js","node_modules/call-bind/index.js","node_modules/is-generator-function/index.js","node_modules/which-typed-array/index.js","node_modules/foreach/index.js","node_modules/available-typed-arrays/index.js","node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js","node_modules/is-typed-array/index.js","node_modules/util/support/isBufferBrowser.js","node_modules/inherits/inherits_browser.js","node_modules/assert/build/internal/assert/assertion_error.js","node_modules/es6-object-assign/index.js","node_modules/object-is/index.js","node_modules/define-properties/index.js","node_modules/object-keys/index.js","node_modules/object-keys/isArguments.js","node_modules/object-keys/implementation.js","node_modules/object-is/implementation.js","node_modules/object-is/polyfill.js","node_modules/object-is/shim.js","node_modules/assert/build/internal/util/comparisons.js","node_modules/is-nan/index.js","node_modules/is-nan/implementation.js","node_modules/is-nan/polyfill.js","node_modules/is-nan/shim.js","node_modules/bs-custom-file-input/src/selector.js","node_modules/bs-custom-file-input/src/util.js","node_modules/bs-custom-file-input/src/eventHandlers.js","node_modules/bs-custom-file-input/src/index.js","node_modules/file-saver/src/FileSaver.js","web/index.js"],"sourcesContent":["import { createCanvas, loadImage, Image } from 'canvas';\nimport path from 'path';\nimport { ImageMode, ImageModeUtil, OutputMode } from './enums';\nimport { buildPalette, utils, applyPalette, distance, image } from './image-q/image-q';\nimport { round_half_up, str_pad, dechex } from './helpers';\n\ninterface ConverterOptions {\n    dith?: boolean;\n    cf: ImageMode;\n    outputFormat: OutputMode;\n    binaryFormat: ImageMode;\n    swapEndian: boolean;\n    outName: string;\n    useLegacyFooterOrder?: boolean;\n}\nclass Converter {\n    dith = false;      /*Dithering enable/disable*/\n    w = 0;         /*Image width*/\n    h = 0;         /*Image height*/\n    raw_len = 0; /* RAW image data size */\n    cf: ImageMode;        /*Color format*/\n    outputFormat: OutputMode;\n    alpha = false;     /*Add alpha byte or not*/\n    chroma = false;    /*Chroma keyed?*/\n    d_out: Array<number>;     /*Output data (result)*/\n    imageData: Array<number>|Uint8Array; /* Input image data */\n    swapEndian = false; /* Whether to swap endian or not */\n    options: ConverterOptions;\n\n    /*Helper variables*/\n    r_act: number;\n    b_act: number;\n    g_act: number;\n\n    /*For dithering*/\n    r_earr: Array<number>;  /*Classification error for next row of pixels*/\n    g_earr: Array<number>;\n    b_earr: Array<number>;\n\n    r_nerr: number;  /*Classification error for next pixel*/\n    g_nerr: number;\n    b_nerr: number;\n\n    /* Current pass being made */\n    pass: number;\n\n\n    constructor(w: number, h: number, imageData, alpha: boolean, options: Partial<ConverterOptions>) {\n        this.dith = options.dith;\n        this.w = w;\n        this.h = h;\n        this.imageData = imageData;\n        this.r_earr = [];  /*Classification error for next row of pixels*/\n        this.g_earr = [];\n        this.b_earr = [];\n\n        if(this.dith) {\n            for(var i = 0; i < this.w + 2; ++i){\n                this.r_earr[i] = 0;\n                this.g_earr[i] = 0;\n                this.b_earr[i] = 0;\n            }\n        }\n\n        this.r_nerr = 0;  /*Classification error for next pixel*/\n        this.g_nerr = 0;\n        this.b_nerr = 0;\n        this.pass = 0;\n        this.cf = options.cf;\n        this.alpha = alpha;\n        this.swapEndian = options.swapEndian;\n        this.outputFormat = options.outputFormat;\n        this.options = options as ConverterOptions;\n    }\n\n    /**\n     * Get the number of passes being made over an image to output it.\n     */\n    getNumPasses() {\n        if(this.cf == ImageMode.CF_RGB565A8)\n            return 2;\n        else\n            return 1;\n    }\n\n    async convert(): Promise<string|ArrayBuffer> {\n        if(this.cf == ImageMode.CF_RAW || this.cf == ImageMode.CF_RAW_ALPHA) {\n            const d_array = Array.from((this.imageData as Uint8Array));\n            this.raw_len = d_array.length;\n            const indent = this.options.useLegacyFooterOrder ? \"  \": \"    \";\n            const numValuesPerRow = this.options.useLegacyFooterOrder ? 15 : 12;\n            let str = \"\\n\" + indent + d_array.map((val, i) => \"0x\" + str_pad(dechex(val), 2, '0', true) + ((i % (numValuesPerRow+1)) == numValuesPerRow ? (\", \\n\" + indent) : \", \")).join(\"\");\n            str = str.substr(0, str.length-2);\n            return str;\n        }\n        var palette_size = 0, bits_per_value = 0;\n        if(this.cf == ImageMode.CF_INDEXED_1_BIT) {\n            palette_size = 2;\n            bits_per_value = 1;\n        } else if(this.cf == ImageMode.CF_INDEXED_2_BIT) {\n            palette_size = 4;\n            bits_per_value = 2;\n        } else if(this.cf == ImageMode.CF_INDEXED_4_BIT) {\n            palette_size = 16;\n            bits_per_value = 4;\n        } else if(this.cf == ImageMode.CF_INDEXED_8_BIT) {\n            palette_size = 256;\n            bits_per_value = 8;\n        }\n        this.d_out = [];\n\n        if(palette_size) {\n            const pointContainer = utils.PointContainer.fromUint8Array(this.imageData, this.w, this.h);\n            const palette = await buildPalette([pointContainer], {\n                colors: palette_size, // optional\n            });\n            const color_arr = this.d_out;\n            const palettePointArray = palette.getPointContainer().getPointArray();\n            const paletteColors = palettePointArray.map((point) => {\n                return point.uint32;\n            });\n            for(var i = 0; i < palette_size; i++) {\n                if(i < palettePointArray.length) {\n                    color_arr.push(palettePointArray[i].b, palettePointArray[i].g, palettePointArray[i].r, palettePointArray[i].a);\n                } else {\n                    color_arr.push(0, 0, 0, 0);\n                }\n            }\n\n            const outPointContainer = await applyPalette(pointContainer, palette, {\n            });\n            let currentValue = 0;\n            let numBitsShifted = 0;\n            const outPointArray = outPointContainer.getPointArray();\n            this.imageData = [];\n            outPointArray.forEach((point, arrayIndex) => {\n                const index = paletteColors.indexOf(point.uint32);\n                if(index == -1)\n                    throw new Error(\"Unknown color??\");\n                (this.imageData as Array<number>).push(index);\n            });\n        }\n\n        \n        let oldColorFormat;\n        const needsFormatSwap = this.outputFormat == OutputMode.BIN && ImageModeUtil.isTrueColor(this.cf);\n        if(needsFormatSwap) {\n            oldColorFormat = this.cf;\n            this.cf = this.options.binaryFormat;\n        }\n\n        for(this.pass = 0; this.pass < this.getNumPasses(); this.pass++) {\n            /*Convert all the pixels*/\n            for(var y = 0; y < this.h; y++) {\n                this.dith_reset();\n\n                for(var x = 0; x < this.w; ++x){\n                    this.conv_px(x, y);\n                }\n            }\n        }\n        \n        if(needsFormatSwap) {\n            this.cf = oldColorFormat;\n        }\n\n        if(this.outputFormat == OutputMode.C)\n            return this.format_to_c_array();\n        else {\n            var $content = this.d_out;\n            var $cf = this.cf;\n            var $lv_cf = 4;               /*Color format in LittlevGL*/\n            switch($cf) {\n                case ImageMode.CF_TRUE_COLOR:\n                    $lv_cf = 4; break;\n                case ImageMode.CF_TRUE_COLOR_ALPHA:\n                    $lv_cf = 5; break;\n                case ImageMode.CF_TRUE_COLOR_CHROMA:\n                    $lv_cf = 6; break;\n                case ImageMode.CF_INDEXED_1_BIT:\n                    $lv_cf = 7; break;\n                case ImageMode.CF_INDEXED_2_BIT:\n                    $lv_cf = 8; break;\n                case ImageMode.CF_INDEXED_4_BIT:\n                    $lv_cf = 9; break;\n                case ImageMode.CF_INDEXED_8_BIT:\n                    $lv_cf = 10; break;\n                case ImageMode.CF_ALPHA_1_BIT:\n                    $lv_cf = 11; break;\n                case ImageMode.CF_ALPHA_2_BIT:\n                    $lv_cf = 12; break;\n                case ImageMode.CF_ALPHA_4_BIT:\n                    $lv_cf = 13; break;\n                case ImageMode.CF_ALPHA_8_BIT:\n                    $lv_cf = 14; break;\n            }\n\n            var $header_32bit = ($lv_cf | (this.w << 10) | (this.h << 21)) >>> 0;\n\n            var finalBinary = new Uint8Array(this.d_out.length + 4);\n            finalBinary[0] = ($header_32bit & 0xFF);\n            finalBinary[1] = ($header_32bit & 0xFF00) >> 8;\n            finalBinary[2] = ($header_32bit & 0xFF0000) >> 16;\n            finalBinary[3] = ($header_32bit & 0xFF000000) >> 24;\n\n            for(var i = 0; i < this.d_out.length; i++) {\n                finalBinary[i+4] = this.d_out[i];\n                \n            }\n            return finalBinary.buffer;\n        }\n    }\n\n    get_c_header(out_name: string): string {\n        var $c_header =\n        `#if defined(LV_LVGL_H_INCLUDE_SIMPLE)\n#include \"lvgl.h\"\n#else\n#include \"lvgl/lvgl.h\"\n#endif\n\n\n#ifndef LV_ATTRIBUTE_MEM_ALIGN\n#define LV_ATTRIBUTE_MEM_ALIGN\n#endif\n\n`;\n        var $attr_name = \"LV_ATTRIBUTE_IMG_\" + out_name.toUpperCase(); \n        $c_header += \n`#ifndef ${$attr_name}\n#define ${$attr_name}\n#endif\n\nconst LV_ATTRIBUTE_MEM_ALIGN LV_ATTRIBUTE_LARGE_CONST ${$attr_name} uint8_t ` + out_name+ \"_map[] = {\";\n\n        return $c_header;\n    }\n\n    static imagemode_to_enum_name($cf: ImageMode): string {\n        switch($cf) {\n            case ImageMode.CF_TRUE_COLOR:\n            case ImageMode.CF_TRUE_COLOR_ALPHA:\n            case ImageMode.CF_RAW_ALPHA:\n            case ImageMode.CF_RGB565A8:\n                return \"LV_IMG_\" + ImageMode[$cf];\n            case ImageMode.CF_TRUE_COLOR_CHROMA:\n                return \"LV_IMG_CF_TRUE_COLOR_CHROMA_KEYED\";\n            case ImageMode.CF_RAW_CHROMA: /* and CF_RAW due to it having the same value */\n                return \"LV_IMG_CF_RAW_CHROMA_KEYED\";\n            case ImageMode.CF_ALPHA_1_BIT:\n            case ImageMode.CF_ALPHA_2_BIT:\n            case ImageMode.CF_ALPHA_4_BIT:\n            case ImageMode.CF_ALPHA_8_BIT:\n            case ImageMode.CF_INDEXED_1_BIT:\n            case ImageMode.CF_INDEXED_2_BIT:\n            case ImageMode.CF_INDEXED_4_BIT:\n            case ImageMode.CF_INDEXED_8_BIT:\n                return \"LV_IMG_\" + ImageMode[$cf].replace(\"_BIT\", \"BIT\");\n            default:\n                throw new Error(\"unexpected color format\");\n        }\n    }\n\n    get_c_footer($cf, out_name) {\n\n        var header_cf = Converter.imagemode_to_enum_name($cf);\n        var data_size;\n\n        switch($cf) {\n            case ImageMode.CF_TRUE_COLOR:\n            case ImageMode.CF_TRUE_COLOR_ALPHA:\n            case ImageMode.CF_TRUE_COLOR_CHROMA:\n                data_size = this.w * this.h + \" * \" + ($cf == ImageMode.CF_TRUE_COLOR_ALPHA ? \"LV_IMG_PX_SIZE_ALPHA_BYTE\" : \"LV_COLOR_SIZE / 8\");\n                break;\n            case ImageMode.CF_ALPHA_1_BIT:\n            case ImageMode.CF_ALPHA_2_BIT:\n            case ImageMode.CF_ALPHA_4_BIT:\n            case ImageMode.CF_ALPHA_8_BIT:\n            case ImageMode.CF_INDEXED_1_BIT:\n            case ImageMode.CF_INDEXED_2_BIT:\n            case ImageMode.CF_INDEXED_4_BIT:\n            case ImageMode.CF_INDEXED_8_BIT:\n            case ImageMode.CF_RGB565A8:\n                data_size = this.d_out.length;\n                break;\n            case ImageMode.CF_RAW:\n            case ImageMode.CF_RAW_ALPHA:\n            case ImageMode.CF_RAW_CHROMA:\n                data_size = this.raw_len;\n                break;\n            default:\n                throw new Error(\"unexpected color format \" + ImageMode[$cf]);\n        }\n\n        var $c_footer;\n        if(!this.options.useLegacyFooterOrder) {\n            $c_footer = `\\n};\\n\nconst lv_img_dsc_t ${out_name} = {\n  .header.cf = ${header_cf},\n  .header.always_zero = 0,\n  .header.reserved = 0,\n  .header.w = ${this.w},\n  .header.h = ${this.h},\n  .data_size = ${data_size},\n  .data = ${out_name}_map,\n};\\n`;\n        } else {\n            $c_footer = `\\n};\\n\nconst lv_img_dsc_t ${out_name} = {\n  .header.always_zero = 0,\n  .header.w = ${this.w},\n  .header.h = ${this.h},\n  .data_size = ${data_size},\n  .header.cf = ${header_cf},\n  .data = ${out_name}_map,\n};\\n`;           \n        }\n\n\n        return $c_footer;\n    }\n\n\n    private conv_px(x, y) {\n        function array_push<T>(arr: Array<T>, v: T) {\n            arr.push(v);\n        }\n        function isset(val: any): boolean {\n            return typeof val != 'undefined' && val != undefined;\n        }\n        const startIndex = ((y*this.w)+x)*4;\n        let a;\n        if(this.alpha){\n            a = this.imageData[startIndex+3];\n        } else {\n            a = 0xff;\n        }\n        const r = this.imageData[startIndex];\n        const g = this.imageData[startIndex+1];\n        const b = this.imageData[startIndex+2];\n\n        const c = this.imageData[((y*this.w)+x)];\n\n        if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565\n            || this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565_RBSWAP\n            || this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8332\n            || this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8888\n            || this.cf == ImageMode.CF_RGB565A8) {\n            /* Populate r_act, g_act, b_act */\n            this.dith_next(r, g, b, x);\n        }\n\n        if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8332) {\n            const c8 = (this.r_act) | (this.g_act >> 3) | (this.b_act >> 6);\t//RGB332\n            array_push(this.d_out, c8);\n            if(this.alpha) array_push(this.d_out, a);\n        } else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565) {\n            const c16 = ((this.r_act) << 8) | ((this.g_act) << 3) | ((this.b_act) >> 3);\t//RGR565\n            array_push(this.d_out, c16 & 0xFF);\n            array_push(this.d_out, (c16 >> 8) & 0xFF);\n            if(this.alpha) array_push(this.d_out, a);\n        } else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565_RBSWAP) {\n            const c16 = ((this.r_act) << 8) | ((this.g_act) << 3) | ((this.b_act) >> 3);\t//RGR565\n            array_push(this.d_out, (c16 >> 8) & 0xFF);\n            array_push(this.d_out, c16 & 0xFF);\n            if(this.alpha) array_push(this.d_out, a);\n        } else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8888) {\n            array_push(this.d_out, this.b_act);\n            array_push(this.d_out, this.g_act);\n            array_push(this.d_out, this.r_act);\n            array_push(this.d_out, a);\n        } else if(this.cf == ImageMode.CF_RGB565A8) {\n            if(this.pass == 0) {\n                const c16 = ((this.r_act) << 8) | ((this.g_act) << 3) | ((this.b_act) >> 3);\t//RGR565\n                array_push(this.d_out, c16 & 0xFF);\n                array_push(this.d_out, (c16 >> 8) & 0xFF);\n            } else if(this.pass == 1) {\n                if(this.alpha) array_push(this.d_out, a);\n            }\n        } else if(this.cf == ImageMode.CF_ALPHA_1_BIT) {\n            let w = this.w >> 3;\n            if(this.w & 0x07) w++;\n            const p = w * y + (x >> 3);\n            if(!isset(this.d_out[p])) {\n                this.d_out[p] = 0;          /*Clear the bits first*/\n            }\n            if(a > 0x80) {\n                this.d_out[p] |= 1 << (7 - (x & 0x7));\n            }\n        }\n        else if(this.cf == ImageMode.CF_ALPHA_2_BIT) {\n            let w = this.w >> 2;\n            if(this.w & 0x03) w++;\n\n            const p = w * y + (x >> 2);\n            if(!isset(this.d_out[p])) this.d_out[p] = 0;          /*Clear the bits first*/\n            this.d_out[p] |= (a >> 6) << (6 - ((x & 0x3) * 2));\n        }\n        else if(this.cf == ImageMode.CF_ALPHA_4_BIT) {\n            let w = this.w >> 1;\n            if(this.w & 0x01) w++;\n\n            const p = w * y + (x >> 1);\n            if(!isset(this.d_out[p])) this.d_out[p] = 0;          /*Clear the bits first*/\n            this.d_out[p] |= (a >> 4) << (4 - ((x & 0x1) * 4));\n        }\n        else if(this.cf == ImageMode.CF_ALPHA_8_BIT) {\n            const p = this.w * y + x;\n            this.d_out[p] = a;\n        }\n        else if(this.cf == ImageMode.CF_INDEXED_1_BIT) {\n            let w = this.w >> 3;\n            if(this.w & 0x07) w++;\n\n            const p = w * y + (x >> 3) + 8;                       // +8 for the palette\n            if(!isset(this.d_out[p])) this.d_out[p] = 0;          //Clear the bits first\n            this.d_out[p] |= (c & 0x1) << (7 - (x & 0x7));\n        }\n        else if(this.cf == ImageMode.CF_INDEXED_2_BIT) {\n            let w = this.w >> 2;\n            if(this.w & 0x03) w++;\n\n            const p = w * y + (x >> 2) + 16;                              // +16 for the palette\n            if(!isset(this.d_out[p])) this.d_out[p] = 0;          // Clear the bits first\n            this.d_out[p] |= (c & 0x3) << (6 - ((x & 0x3) * 2));\n        }\n        else if(this.cf == ImageMode.CF_INDEXED_4_BIT) {\n            let w = this.w >> 1;\n            if(this.w & 0x01) w++;\n\n            const p = w * y + (x >> 1) + 64;                              // +64 for the palette\n            if(!isset(this.d_out[p])) this.d_out[p] = 0;          // Clear the bits first\n            this.d_out[p] |= (c & 0xF) << (4 - ((x & 0x1) * 4));\n        }\n        else if(this.cf == ImageMode.CF_INDEXED_8_BIT) {\n            const p = this.w * y + x + 1024;                              // +1024 for the palette\n            this.d_out[p] = c & 0xFF;\n        }\n\t}\n\n    dith_reset() {\n        if(this.dith){\n          this.r_nerr = 0;\n          this.g_nerr = 0;\n          this.b_nerr = 0;\n        }\n    }\n\n    dith_next(r, g, b, x) {\n\n     if(this.dith){\n        this.r_act = r + this.r_nerr + this.r_earr[x+1];\n        this.r_earr[x+1] = 0;\n\n        this.g_act = g + this.g_nerr + this.g_earr[x+1];\n        this.g_earr[x+1] = 0;\n\n        this.b_act = b + this.b_nerr + this.b_earr[x+1];\n        this.b_earr[x+1] = 0;\n\n        if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8332) {\n            this.r_act = this.classify_pixel(this.r_act, 3);\n            this.g_act = this.classify_pixel(this.g_act, 3);\n            this.b_act = this.classify_pixel(this.b_act, 2);\n\n            if(this.r_act > 0xE0) this.r_act = 0xE0;\n            if(this.g_act > 0xE0) this.g_act = 0xE0;\n            if(this.b_act > 0xC0) this.b_act = 0xC0;\n\n        } else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565 || this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565_RBSWAP) {\n            this.r_act = this.classify_pixel(this.r_act, 5);\n            this.g_act = this.classify_pixel(this.g_act, 6);\n            this.b_act = this.classify_pixel(this.b_act, 5);\n\n            if(this.r_act > 0xF8) this.r_act = 0xF8;\n            if(this.g_act > 0xFC) this.g_act = 0xFC;\n            if(this.b_act > 0xF8) this.b_act = 0xF8;\n\n        } else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8888) {\n            this.r_act = this.classify_pixel(this.r_act, 8);\n            this.g_act = this.classify_pixel(this.g_act, 8);\n            this.b_act = this.classify_pixel(this.b_act, 8);\n\n            if(this.r_act > 0xFF) this.r_act = 0xFF;\n            if(this.g_act > 0xFF) this.g_act = 0xFF;\n            if(this.b_act > 0xFF) this.b_act = 0xFF;\n        }\n\n        this.r_nerr = r - this.r_act;\n        this.g_nerr = g - this.g_act;\n        this.b_nerr = b - this.b_act;\n\n        this.r_nerr = round_half_up((7 * this.r_nerr) / 16);\n        this.g_nerr = round_half_up((7 * this.g_nerr) / 16);\n        this.b_nerr = round_half_up((7 * this.b_nerr) / 16);\n\n        this.r_earr[x] += round_half_up((3 * this.r_nerr) / 16);\n        this.g_earr[x] += round_half_up((3 * this.g_nerr) / 16);\n        this.b_earr[x] += round_half_up((3 * this.b_nerr) / 16);\n\n        this.r_earr[x+1] += round_half_up((5 * this.r_nerr) / 16);\n        this.g_earr[x+1] += round_half_up((5 * this.g_nerr) / 16);\n        this.b_earr[x+1] += round_half_up((5 * this.b_nerr) / 16);\n\n        this.r_earr[x+2] += round_half_up(this.r_nerr / 16);\n        this.g_earr[x+2] += round_half_up(this.g_nerr / 16);\n        this.b_earr[x+2] += round_half_up(this.b_nerr / 16);\n      }\n      else{\n        if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8332) {\n            this.r_act = this.classify_pixel(r, 3);\n            this.g_act = this.classify_pixel(g, 3);\n            this.b_act = this.classify_pixel(b, 2);\n\n            if(this.r_act > 0xE0) this.r_act = 0xE0;\n            if(this.g_act > 0xE0) this.g_act = 0xE0;\n            if(this.b_act > 0xC0) this.b_act = 0xC0;\n\n        } else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565 || this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565_RBSWAP || this.cf == ImageMode.CF_RGB565A8) {\n            this.r_act = this.classify_pixel(r, 5);\n            this.g_act = this.classify_pixel(g, 6);\n            this.b_act = this.classify_pixel(b, 5);\n\n            if(this.r_act > 0xF8) this.r_act = 0xF8;\n            if(this.g_act > 0xFC) this.g_act = 0xFC;\n            if(this.b_act > 0xF8) this.b_act = 0xF8;\n\n        } else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8888) {\n            this.r_act = this.classify_pixel(r, 8);\n            this.g_act = this.classify_pixel(g, 8);\n            this.b_act = this.classify_pixel(b, 8);\n\n            if(this.r_act > 0xFF) this.r_act = 0xFF;\n            if(this.g_act > 0xFF) this.g_act = 0xFF;\n            if(this.b_act > 0xFF) this.b_act = 0xFF;\n        }\n      }\n    }\n\n    classify_pixel(value, bits){\n      const tmp = 1 << (8 - bits);\n      let val = Math.round(value / tmp) * tmp;\n      if(val < 0) val = 0;\n      return val;\n    }\n    format_to_c_array() {\n        \n        let c_array = \"\";\n        var i = 0;\n        let y_end = this.h;\n        let x_end = this.w;\n\n        if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8332) {\n            c_array += \"\\n#if LV_COLOR_DEPTH == 1 || LV_COLOR_DEPTH == 8\";\n            if(!this.alpha) c_array += \"\\n  /*Pixel format: Red: 3 bit, Green: 3 bit, Blue: 2 bit*/\";\n            else  c_array += \"\\n  /*Pixel format: Alpha 8 bit, Red: 3 bit, Green: 3 bit, Blue: 2 bit*/\";\n        } else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565) {\n            c_array += \"\\n#if LV_COLOR_DEPTH == 16 && LV_COLOR_16_SWAP == 0\";\n            if(!this.alpha) c_array += \"\\n  /*Pixel format: Red: 5 bit, Green: 6 bit, Blue: 5 bit*/\";\n            else c_array += \"\\n  /*Pixel format: Alpha 8 bit, Red: 5 bit, Green: 6 bit, Blue: 5 bit*/\";\n        }  else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565_RBSWAP) {\n            c_array += \"\\n#if LV_COLOR_DEPTH == 16 && LV_COLOR_16_SWAP != 0\";\n            if(!this.alpha) c_array +=  \"\\n  /*Pixel format: Red: 5 bit, Green: 6 bit, Blue: 5 bit BUT the 2 bytes are swapped*/\";\n            else c_array += \"\\n  /*Pixel format: Alpha 8 bit, Red: 5 bit, Green: 6 bit, Blue: 5 bit  BUT the 2  color bytes are swapped*/\";\n        }  else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8888) {\n            c_array += \"\\n#if LV_COLOR_DEPTH == 32\";\n            if(!this.alpha) c_array += \"\\n  /*Pixel format: Fix 0xFF: 8 bit, Red: 8 bit, Green: 8 bit, Blue: 8 bit*/\";\n            else \"\\n  /*Pixel format: Alpha 8 bit, Red: 8 bit, Green: 8 bit, Blue: 8 bit*/\";\n        } else if(this.cf == ImageMode.CF_INDEXED_1_BIT) {\n            c_array += \"\\n\";\n            for(var p = 0; p < 2; p ++) {\n                c_array += \"  0x\" + str_pad(dechex(this.d_out[p * 4 + 0]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 1]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 2]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 3]), 2, '0', true) + \", \";\n                c_array += `\\t/*Color of index ${p}*/\\n`;\n            }\n    \n            i = p * 4;\n        }\n        else if(this.cf == ImageMode.CF_INDEXED_2_BIT) {\n            c_array += \"\\n\";\n            for(p = 0; p < 4; p ++) {\n                c_array += \"  0x\" + str_pad(dechex(this.d_out[p * 4 + 0]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 1]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 2]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 3]), 2, '0', true) + \", \";\n                c_array += `\\t/*Color of index ${p}*/\\n`;\n            }\n    \n            i = p * 4;\n        }\n        else if(this.cf == ImageMode.CF_INDEXED_4_BIT) {\n            c_array += \"\\n\";\n            for(p = 0; p < 16; p ++) {\n                c_array += \"  0x\" + str_pad(dechex(this.d_out[p * 4 + 0]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 1]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 2]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 3]), 2, '0', true) + \", \";\n                c_array += `\\t/*Color of index ${p}*/\\n`;\n            }\n    \n            i = p * 4;\n        }\n        else if(this.cf == ImageMode.CF_INDEXED_8_BIT) {\n            c_array += \"\\n\";\n            for(p = 0; p < 256; p ++) {\n                c_array += \"  0x\" + str_pad(dechex(this.d_out[p * 4 + 0]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 1]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 2]), 2, '0', true) + \", \";\n                c_array += \"0x\" + str_pad(dechex(this.d_out[p * 4 + 3]), 2, '0', true) + \", \";\n                c_array += `\\t/*Color of index ${p}*/\\n`;\n            }\n    \n            i = p * 4;\n        }\n        else if(this.cf == ImageMode.CF_RAW_ALPHA || this.cf == ImageMode.CF_RAW_CHROMA) {\n            y_end = 1;\n            x_end = this.d_out.length;\n            i = 1;\n        } else if(this.cf == ImageMode.CF_ALPHA_1_BIT\n            || this.cf == ImageMode.CF_ALPHA_2_BIT\n            || this.cf == ImageMode.CF_ALPHA_4_BIT\n            || this.cf == ImageMode.CF_ALPHA_8_BIT\n            || this.cf == ImageMode.CF_RGB565A8) {\n            /* No special handling required */\n        } else\n            throw new Error(\"Unhandled color format: \" + ImageMode[this.cf]);\n\n\n        for(var y = 0; y < y_end; y++) {\n            c_array += \"\\n  \";\n            for(var x = 0; x < x_end; x++) {\n                /* Note: some accesses to d_out may be out of bounds */\n                if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8332) {\n                    c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";  i++;\n                    if(this.alpha) {\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                        i++;\n                    }\n                }\n                else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565 || this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565_RBSWAP || this.cf == ImageMode.CF_RGB565A8) {\n                    if(this.swapEndian) {\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i+1]), 2, '0', true) + \", \";\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                    } else {\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i+1]), 2, '0', true) + \", \";\n                    }\n                    i += 2;\n                    if(this.cf != ImageMode.CF_RGB565A8 && this.alpha) {\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                        i++;\n                    }\n                }\n                else if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8888) {\n                    if(this.swapEndian) {\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i+2]), 2, '0', true) + \", \";\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i+1]), 2, '0', true) + \", \";\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                    } else {\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i+1]), 2, '0', true) + \", \";\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i+2]), 2, '0', true) + \", \";\n                    }\n                    c_array += \"0x\" + str_pad(dechex(this.d_out[i+3]), 2, '0', true) + \", \";\n                    \n                    i += 4;\n                }\n                else if(this.cf == ImageMode.CF_ALPHA_1_BIT || this.cf == ImageMode.CF_INDEXED_1_BIT) {\n                    if((x & 0x7) == 0) {\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                        i++;\n                    }\n                }\n                else if(this.cf == ImageMode.CF_ALPHA_2_BIT || this.cf == ImageMode.CF_INDEXED_2_BIT) {\n                    if((x & 0x3) == 0) {\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                        i++;\n                    }\n                }\n                else if(this.cf == ImageMode.CF_ALPHA_4_BIT || this.cf == ImageMode.CF_INDEXED_4_BIT) {\n                    if((x & 0x1) == 0) {\n                        c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                        i++;\n                    }\n                }\n                else if(this.cf == ImageMode.CF_ALPHA_8_BIT || this.cf == ImageMode.CF_INDEXED_8_BIT) {\n                    c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                    i++;\n                }\n                else if(this.cf == ImageMode.CF_RAW_ALPHA || this.cf == ImageMode.CF_RAW_CHROMA) {\n                    c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                    if(i != 0 && ((i % 16) == 0)) c_array += \"\\n  \";\n                    i++;\n                } else\n                    throw new Error(\"Unhandled color format: \" + ImageMode[this.cf]);\n            }\n        }\n\n        if(this.cf == ImageMode.CF_RGB565A8) {\n            c_array += \"\\n  /*alpha channel*/\\n  \";\n            for(var y = 0; y < y_end; y++) {\n                for(var x = 0; x < x_end; x++) {\n                    c_array += \"0x\" + str_pad(dechex(this.d_out[i]), 2, '0', true) + \", \";\n                    i++;\n                }\n                c_array += \"\\n  \";\n            }\n        }\n    \n        if(this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8332 || this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565 || this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8565_RBSWAP || this.cf == ImageMode.ICF_TRUE_COLOR_ARGB8888) {\n            c_array += \"\\n#endif\";\n        }\n        return c_array;\n    \n    }\n}\n\n\nexport function isNotRaw(options: { cf: ImageMode; }): boolean {\n    return options.cf != ImageMode.CF_RAW && options.cf != ImageMode.CF_RAW_ALPHA; /* && options.cf != ImageMode.CF_RAW_CHROMA; */\n}\n\nasync function convertImageBlob(img: Image|Uint8Array, options: Partial<ConverterOptions>): Promise<string|ArrayBuffer> {\n    function isImage(img, options): img is Image {\n        return isNotRaw(options);\n    }\n    let c_res_array: string;\n    let bin_res_blob: ArrayBuffer;\n    const out_name = options.outName;\n    const outputFormat: OutputMode = options.outputFormat;\n    let c_creator: Converter;\n    if(isImage(img, options)) {\n        const canvas = createCanvas(img.width, img.height);\n        const ctx = canvas.getContext('2d')\n        ctx.drawImage(img, 0, 0);\n        const imageData = ctx.getImageData(0, 0, img.width, img.height).data;\n    \n        const alpha = (options.cf == ImageMode.CF_TRUE_COLOR_ALPHA\n            || options.cf == ImageMode.CF_ALPHA_1_BIT\n            || options.cf == ImageMode.CF_ALPHA_2_BIT\n            || options.cf == ImageMode.CF_ALPHA_4_BIT\n            || options.cf == ImageMode.CF_ALPHA_8_BIT\n            || options.cf == ImageMode.CF_RGB565A8);\n        c_creator = new Converter(img.width, img.height, imageData, alpha, options);\n        \n        if(options.outputFormat == OutputMode.C) {\n            if(options.cf == ImageMode.CF_TRUE_COLOR || options.cf == ImageMode.CF_TRUE_COLOR_ALPHA || options.cf == ImageMode.CF_TRUE_COLOR_CHROMA) {\n                const arrayList = await Promise.all([\n                    ImageMode.ICF_TRUE_COLOR_ARGB8332,\n                    ImageMode.ICF_TRUE_COLOR_ARGB8565,\n                    ImageMode.ICF_TRUE_COLOR_ARGB8565_RBSWAP,\n                    ImageMode.ICF_TRUE_COLOR_ARGB8888\n                ].map(cf => new Converter(img.width, img.height, imageData, alpha, Object.assign({}, options, { cf })).convert())) as string[];\n                c_res_array = arrayList.join(\"\");\n            } else\n                c_res_array = await c_creator.convert() as string;\n        } else {\n            const binaryConv = new Converter(img.width, img.height, imageData, alpha, options);\n            bin_res_blob = await binaryConv.convert() as ArrayBuffer;\n        }\n    } else {\n        c_creator = new Converter(0, 0, img, options.cf == ImageMode.CF_RAW_ALPHA, options);\n        if(options.outputFormat == OutputMode.C)\n            c_res_array = await c_creator.convert() as string;\n        else\n            bin_res_blob = await c_creator.convert() as ArrayBuffer;\n    }\n    \n    \n    if(outputFormat == OutputMode.BIN)\n        return bin_res_blob;\n    else\n        return c_creator.get_c_header(out_name) + c_res_array + c_creator.get_c_footer(options.cf, out_name);\n}\n\nasync function convert(imagePath, options: ConverterOptions) {\n    let img: Image|Uint8Array;\n    if(isNotRaw(options))\n        img = await loadImage(imagePath);\n    else {\n        eval(\"var fs = require('fs');\");\n        /** @ts-ignore */\n        img = fs.readFileSync(imagePath);\n    }\n    return convertImageBlob(img, Object.assign({}, options, { outName: options.outName || path.parse(imagePath).name }));\n    \n}\n\nexport default convert;\nexport { convertImageBlob, Converter };","/* globals document, ImageData */\n\nconst parseFont = require('./lib/parse-font')\n\nexports.parseFont = parseFont\n\nexports.createCanvas = function (width, height) {\n  return Object.assign(document.createElement('canvas'), { width: width, height: height })\n}\n\nexports.createImageData = function (array, width, height) {\n  // Browser implementation of ImageData looks at the number of arguments passed\n  switch (arguments.length) {\n    case 0: return new ImageData()\n    case 1: return new ImageData(array)\n    case 2: return new ImageData(array, width)\n    default: return new ImageData(array, width, height)\n  }\n}\n\nexports.loadImage = function (src, options) {\n  return new Promise(function (resolve, reject) {\n    const image = Object.assign(document.createElement('img'), options)\n\n    function cleanup () {\n      image.onload = null\n      image.onerror = null\n    }\n\n    image.onload = function () { cleanup(); resolve(image) }\n    image.onerror = function () { cleanup(); reject(new Error('Failed to load the image \"' + src + '\"')) }\n\n    image.src = src\n  })\n}\n","'use strict'\n\n/**\n * Font RegExp helpers.\n */\n\nconst weights = 'bold|bolder|lighter|[1-9]00'\nconst styles = 'italic|oblique'\nconst variants = 'small-caps'\nconst stretches = 'ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded'\nconst units = 'px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q'\nconst string = '\\'([^\\']+)\\'|\"([^\"]+)\"|[\\\\w\\\\s-]+'\n\n// [ [ <‘font-style’> || <font-variant-css21> || <‘font-weight’> || <‘font-stretch’> ]?\n//    <‘font-size’> [ / <‘line-height’> ]? <‘font-family’> ]\n// https://drafts.csswg.org/css-fonts-3/#font-prop\nconst weightRe = new RegExp(`(${weights}) +`, 'i')\nconst styleRe = new RegExp(`(${styles}) +`, 'i')\nconst variantRe = new RegExp(`(${variants}) +`, 'i')\nconst stretchRe = new RegExp(`(${stretches}) +`, 'i')\nconst sizeFamilyRe = new RegExp(\n  `([\\\\d\\\\.]+)(${units}) *((?:${string})( *, *(?:${string}))*)`)\n\n/**\n * Cache font parsing.\n */\n\nconst cache = {}\n\nconst defaultHeight = 16 // pt, common browser default\n\n/**\n * Parse font `str`.\n *\n * @param {String} str\n * @return {Object} Parsed font. `size` is in device units. `unit` is the unit\n *   appearing in the input string.\n * @api private\n */\n\nmodule.exports = str => {\n  // Cached\n  if (cache[str]) return cache[str]\n\n  // Try for required properties first.\n  const sizeFamily = sizeFamilyRe.exec(str)\n  if (!sizeFamily) return // invalid\n\n  // Default values and required properties\n  const font = {\n    weight: 'normal',\n    style: 'normal',\n    stretch: 'normal',\n    variant: 'normal',\n    size: parseFloat(sizeFamily[1]),\n    unit: sizeFamily[2],\n    family: sizeFamily[3].replace(/[\"']/g, '').replace(/ *, */g, ',')\n  }\n\n  // Optional, unordered properties.\n  let weight, style, variant, stretch\n  // Stop search at `sizeFamily.index`\n  const substr = str.substring(0, sizeFamily.index)\n  if ((weight = weightRe.exec(substr))) font.weight = weight[1]\n  if ((style = styleRe.exec(substr))) font.style = style[1]\n  if ((variant = variantRe.exec(substr))) font.variant = variant[1]\n  if ((stretch = stretchRe.exec(substr))) font.stretch = stretch[1]\n\n  // Convert to device units. (`font.unit` is the original unit)\n  // TODO: ch, ex\n  switch (font.unit) {\n    case 'pt':\n      font.size /= 0.75\n      break\n    case 'pc':\n      font.size *= 16\n      break\n    case 'in':\n      font.size *= 96\n      break\n    case 'cm':\n      font.size *= 96.0 / 2.54\n      break\n    case 'mm':\n      font.size *= 96.0 / 25.4\n      break\n    case '%':\n      // TODO disabled because existing unit tests assume 100\n      // font.size *= defaultHeight / 100 / 0.75\n      break\n    case 'em':\n    case 'rem':\n      font.size *= defaultHeight / 0.75\n      break\n    case 'q':\n      font.size *= 96 / 25.4 / 4\n      break\n  }\n\n  return (cache[str] = font)\n}\n","// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47 /*/*/)\n      break;\n    else\n      code = 47 /*/*/;\n    if (code === 47 /*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 /*.*/ || res.charCodeAt(res.length - 2) !== 46 /*.*/) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 /*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0) return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\n  },\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to) return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to) return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart;\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = toEnd - toStart;\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47 /*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47 /*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47 /*/*/;\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          if (!matchedSlash) {\n            end = i;\n            break;\n          }\n        } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1)\n            startDot = i;\n          else if (preDotState !== 1)\n            preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n    return _format('/', pathObject);\n  },\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47 /*/*/;\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n        } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n    // We saw a non-dot character immediately before the dot\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n\n    return ret;\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\n\nposix.posix = posix;\n\nmodule.exports = posix;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","enum ImageMode {\n    /*Helper ARGB formats. Used internally*/\n    ICF_TRUE_COLOR_ARGB8332,      \n    ICF_TRUE_COLOR_ARGB8565,\n    ICF_TRUE_COLOR_ARGB8565_RBSWAP,\n    ICF_TRUE_COLOR_ARGB8888,\n    CF_ALPHA_1_BIT,\n    CF_ALPHA_2_BIT,\n    CF_ALPHA_4_BIT,\n    CF_ALPHA_8_BIT,\n    CF_INDEXED_1_BIT,\n    CF_INDEXED_2_BIT,\n    CF_INDEXED_4_BIT,\n    CF_INDEXED_8_BIT,\n    CF_RAW,\n    CF_RAW_CHROMA = CF_RAW,\n    CF_RAW_ALPHA,\n\n    /*Helper formats if C arrays contains all true color formats (used in \"download\")*/\n    CF_TRUE_COLOR,          \n    CF_TRUE_COLOR_ALPHA,\n    CF_TRUE_COLOR_CHROMA,\n\n    /*New formats in v8.3+*/\n    CF_RGB565A8\n};\n\nclass ImageModeUtil {\n    public static isTrueColor(mode: string|ImageMode) {\n        if(typeof mode != 'string')\n            mode = ImageMode[mode];\n        return mode.startsWith(\"CF_TRUE_COLOR\");\n    }\n}\n\nenum OutputMode {\n    C,\n    BIN\n}\n\n\nconst BINARY_FORMAT_PREFIX = \"ICF_TRUE_COLOR_\";\n\nexport { ImageMode, ImageModeUtil, OutputMode, BINARY_FORMAT_PREFIX };","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * constants.ts - part of Image Quantization Library\n */\n\n/**\n * sRGB (based on ITU-R Recommendation BT.709)\n * http://en.wikipedia.org/wiki/SRGB\n */\nexport enum Y {\n  RED = 0.2126,\n  GREEN = 0.7152,\n  BLUE = 0.0722,\n  WHITE = 1,\n}\n\n// tslint:disable-next-line:naming-convention\nexport enum x {\n  RED = 0.64,\n  GREEN = 0.3,\n  BLUE = 0.15,\n  WHITE = 0.3127,\n}\n\n// tslint:disable-next-line:naming-convention\nexport enum y {\n  RED = 0.33,\n  GREEN = 0.6,\n  BLUE = 0.06,\n  WHITE = 0.329,\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * rgb2xyz.ts - part of Image Quantization Library\n */\nfunction correctGamma(n: number) {\n  return n > 0.04045 ? ((n + 0.055) / 1.055) ** 2.4 : n / 12.92;\n}\n\nexport function rgb2xyz(r: number, g: number, b: number) {\n  // gamma correction, see https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\n  r = correctGamma(r / 255);\n  g = correctGamma(g / 255);\n  b = correctGamma(b / 255);\n\n  // Observer. = 2°, Illuminant = D65\n  return {\n    x: r * 0.4124 + g * 0.3576 + b * 0.1805,\n    y: r * 0.2126 + g * 0.7152 + b * 0.0722,\n    z: r * 0.0193 + g * 0.1192 + b * 0.9505,\n  };\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * rgb2hsl.ts - part of Image Quantization Library\n */\nimport { min3, max3 } from '../utils/arithmetic';\n\n/**\n * Calculate HSL from RGB\n * Hue is in degrees [0..360]\n * Lightness: [0..1]\n * Saturation: [0..1]\n * http://web.archive.org/web/20060914040436/http://local.wasp.uwa.edu.au/~pbourke/colour/hsl/\n */\nexport function rgb2hsl(r: number, g: number, b: number) {\n  const min = min3(r, g, b);\n  const max = max3(r, g, b);\n  const delta = max - min;\n  const l = (min + max) / 510;\n\n  let s = 0;\n  if (l > 0 && l < 1) s = delta / (l < 0.5 ? max + min : 510 - max - min);\n\n  let h = 0;\n  if (delta > 0) {\n    if (max === r) {\n      h = (g - b) / delta;\n    } else if (max === g) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n\n    h *= 60;\n    if (h < 0) h += 360;\n  }\n  return { h, s, l };\n}\n","export function degrees2radians(n: number) {\n  return n * (Math.PI / 180);\n}\n\nexport function max3(a: number, b: number, c: number) {\n  let m = a;\n  if (m < b) m = b;\n  if (m < c) m = c;\n  return m;\n}\n\nexport function min3(a: number, b: number, c: number) {\n  let m = a;\n  if (m > b) m = b;\n  if (m > c) m = c;\n  return m;\n}\n\nexport function intInRange(value: number, low: number, high: number) {\n  if (value > high) value = high;\n  if (value < low) value = low;\n  return value | 0;\n}\n\nexport function inRange0to255Rounded(n: number) {\n  n = Math.round(n);\n  if (n > 255) n = 255;\n  else if (n < 0) n = 0;\n  return n;\n}\n\nexport function inRange0to255(n: number) {\n  if (n > 255) n = 255;\n  else if (n < 0) n = 0;\n  return n;\n}\n\nexport function stableSort<T>(\n  arrayToSort: T[],\n  callback: (a: T, b: T) => number,\n) {\n  const type = typeof arrayToSort[0];\n  let sorted: T[];\n\n  if (type === 'number' || type === 'string') {\n    const ord = Object.create(null); // tslint:disable-line:no-null-keyword\n    for (let i = 0, l = arrayToSort.length; i < l; i++) {\n      const val = (arrayToSort[i] as unknown) as string;\n      if (ord[val] || ord[val] === 0) continue;\n      ord[val] = i;\n    }\n\n    sorted = arrayToSort.sort((a, b) => callback(a, b) || ord[a] - ord[b]);\n  } else {\n    const ord2 = arrayToSort.slice(0);\n    sorted = arrayToSort.sort(\n      (a, b) => callback(a, b) || ord2.indexOf(a) - ord2.indexOf(b),\n    );\n  }\n\n  return sorted;\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * rgb2lab.ts - part of Image Quantization Library\n */\nimport { rgb2xyz } from './rgb2xyz';\nimport { xyz2lab } from './xyz2lab';\n\nexport function rgb2lab(r: number, g: number, b: number) {\n  const xyz = rgb2xyz(r, g, b);\n  return xyz2lab(xyz.x, xyz.y, xyz.z);\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * xyz2lab.ts - part of Image Quantization Library\n */\nconst refX = 0.95047; // ref_X =  95.047   Observer= 2°, Illuminant= D65\nconst refY = 1.0; // ref_Y = 100.000\nconst refZ = 1.08883; // ref_Z = 108.883\n\nfunction pivot(n: number) {\n  return n > 0.008856 ? n ** (1 / 3) : 7.787 * n + 16 / 116;\n}\n\nexport function xyz2lab(x: number, y: number, z: number) {\n  x = pivot(x / refX);\n  y = pivot(y / refY);\n  z = pivot(z / refZ);\n\n  if (116 * y - 16 < 0) throw new Error('xxx');\n  return {\n    L: Math.max(0, 116 * y - 16),\n    a: 500 * (x - y),\n    b: 200 * (y - z),\n  };\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * lab2xyz.ts - part of Image Quantization Library\n */\nconst refX = 0.95047; // ref_X =  95.047   Observer= 2°, Illuminant = D65\nconst refY = 1.0; // ref_Y = 100.000\nconst refZ = 1.08883; // ref_Z = 108.883\n\nfunction pivot(n: number) {\n  return n > 0.206893034 ? n ** 3 : (n - 16 / 116) / 7.787;\n}\n\n// tslint:disable-next-line:naming-convention\nexport function lab2xyz(L: number, a: number, b: number) {\n  const y = (L + 16) / 116;\n  const x = a / 500 + y;\n  const z = y - b / 200;\n\n  return {\n    x: refX * pivot(x),\n    y: refY * pivot(y),\n    z: refZ * pivot(z),\n  };\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * xyz2rgb.ts - part of Image Quantization Library\n */\nimport { inRange0to255Rounded } from '../utils/arithmetic';\n\n// gamma correction, see https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfunction correctGamma(n: number) {\n  return n > 0.0031308 ? 1.055 * n ** (1 / 2.4) - 0.055 : 12.92 * n;\n}\n\nexport function xyz2rgb(x: number, y: number, z: number) {\n  // Observer. = 2°, Illuminant = D65\n  const r = correctGamma(x * 3.2406 + y * -1.5372 + z * -0.4986);\n  const g = correctGamma(x * -0.9689 + y * 1.8758 + z * 0.0415);\n  const b = correctGamma(x * 0.0557 + y * -0.204 + z * 1.057);\n\n  return {\n    r: inRange0to255Rounded(r * 255),\n    g: inRange0to255Rounded(g * 255),\n    b: inRange0to255Rounded(b * 255),\n  };\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * common.ts - part of Image Quantization Library\n */\nimport { PointRGBA } from '../utils/point';\n\nexport abstract class AbstractDistanceCalculator {\n  protected _maxDistance!: number;\n  protected _whitePoint!: {\n    r: number;\n    g: number;\n    b: number;\n    a: number;\n  };\n\n  constructor() {\n    this._setDefaults();\n\n    // set default maximal color component deltas (255 - 0 = 255)\n    this.setWhitePoint(255, 255, 255, 255);\n  }\n\n  setWhitePoint(r: number, g: number, b: number, a: number) {\n    this._whitePoint = {\n      r: r > 0 ? 255 / r : 0,\n      g: g > 0 ? 255 / g : 0,\n      b: b > 0 ? 255 / b : 0,\n      a: a > 0 ? 255 / a : 0,\n    };\n    this._maxDistance = this.calculateRaw(r, g, b, a, 0, 0, 0, 0);\n  }\n\n  calculateNormalized(colorA: PointRGBA, colorB: PointRGBA) {\n    return (\n      this.calculateRaw(\n        colorA.r,\n        colorA.g,\n        colorA.b,\n        colorA.a,\n        colorB.r,\n        colorB.g,\n        colorB.b,\n        colorB.a,\n      ) / this._maxDistance\n    );\n  }\n\n  /**\n   * Calculate raw distance (non-normalized)\n   */\n  abstract calculateRaw(\n    r1: number,\n    g1: number,\n    b1: number,\n    a1: number,\n    r2: number,\n    g2: number,\n    b2: number,\n    a2: number,\n  ): number;\n\n  protected abstract _setDefaults(): void;\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * cie94.ts - part of Image Quantization Library\n */\nimport { AbstractDistanceCalculator } from './distanceCalculator';\nimport { rgb2lab } from '../conversion/rgb2lab';\nimport { inRange0to255 } from '../utils/arithmetic';\n\n/**\n * CIE94 method of delta-e\n * http://en.wikipedia.org/wiki/Color_difference#CIE94\n */\nexport abstract class AbstractCIE94 extends AbstractDistanceCalculator {\n  /**\n   * Weight in distance: 0.25\n   * Max DeltaE: 100\n   * Max DeltaA: 255\n   */\n  protected _kA!: number;\n  protected _Kl!: number; // tslint:disable-line:naming-convention\n  protected _K1!: number; // tslint:disable-line:naming-convention\n  protected _K2!: number; // tslint:disable-line:naming-convention\n\n  calculateRaw(\n    r1: number,\n    g1: number,\n    b1: number,\n    a1: number,\n    r2: number,\n    g2: number,\n    b2: number,\n    a2: number,\n  ) {\n    const lab1 = rgb2lab(\n      inRange0to255(r1 * this._whitePoint.r),\n      inRange0to255(g1 * this._whitePoint.g),\n      inRange0to255(b1 * this._whitePoint.b),\n    );\n    const lab2 = rgb2lab(\n      inRange0to255(r2 * this._whitePoint.r),\n      inRange0to255(g2 * this._whitePoint.g),\n      inRange0to255(b2 * this._whitePoint.b),\n    );\n\n    const dL = lab1.L - lab2.L;\n    const dA = lab1.a - lab2.a;\n    const dB = lab1.b - lab2.b;\n    const c1 = Math.sqrt(lab1.a * lab1.a + lab1.b * lab1.b);\n    const c2 = Math.sqrt(lab2.a * lab2.a + lab2.b * lab2.b);\n    const dC = c1 - c2;\n\n    let deltaH = dA * dA + dB * dB - dC * dC;\n    deltaH = deltaH < 0 ? 0 : Math.sqrt(deltaH);\n\n    const dAlpha = (a2 - a1) * this._whitePoint.a * this._kA;\n\n    // TODO: add alpha channel support\n    return Math.sqrt(\n      (dL / this._Kl) ** 2 +\n        (dC / (1.0 + this._K1 * c1)) ** 2 +\n        (deltaH / (1.0 + this._K2 * c1)) ** 2 +\n        dAlpha ** 2,\n    );\n  }\n}\n\nexport class CIE94Textiles extends AbstractCIE94 {\n  protected _setDefaults() {\n    this._Kl = 2.0;\n    this._K1 = 0.048;\n    this._K2 = 0.014;\n    this._kA = (0.25 * 50) / 255;\n  }\n}\n\nexport class CIE94GraphicArts extends AbstractCIE94 {\n  protected _setDefaults() {\n    this._Kl = 1.0;\n    this._K1 = 0.045;\n    this._K2 = 0.015;\n    this._kA = (0.25 * 100) / 255;\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * ciede2000.ts - part of Image Quantization Library\n */\nimport { AbstractDistanceCalculator } from './distanceCalculator';\nimport { rgb2lab } from '../conversion/rgb2lab';\nimport { degrees2radians, inRange0to255 } from '../utils/arithmetic';\n\n// tslint:disable:variable-name\n// tslint:disable:naming-convention\n\n/**\n * CIEDE2000 algorithm - Adapted from Sharma et al's MATLAB implementation at\n * http://www.ece.rochester.edu/~gsharma/ciede2000/\n */\nexport class CIEDE2000 extends AbstractDistanceCalculator {\n  /**\n   * Weight in distance: 0.25\n   * Max DeltaE: 100\n   * Max DeltaA: 255\n   */\n  private static readonly _kA = (0.25 * 100) / 255;\n  private static readonly _pow25to7 = 25 ** 7; // 1Math.pow(25, 7);\n  private static readonly _deg360InRad = degrees2radians(360);\n  private static readonly _deg180InRad = degrees2radians(180);\n  private static readonly _deg30InRad = degrees2radians(30);\n  private static readonly _deg6InRad = degrees2radians(6);\n  private static readonly _deg63InRad = degrees2radians(63);\n  private static readonly _deg275InRad = degrees2radians(275);\n  private static readonly _deg25InRad = degrees2radians(25);\n\n  protected _setDefaults() {}\n\n  private static _calculatehp(b: number, ap: number) {\n    const hp = Math.atan2(b, ap);\n    if (hp >= 0) return hp;\n    return hp + CIEDE2000._deg360InRad;\n  }\n\n  private static _calculateRT(ahp: number, aCp: number) {\n    const aCp_to_7 = aCp ** 7.0;\n    const R_C = 2.0 * Math.sqrt(aCp_to_7 / (aCp_to_7 + CIEDE2000._pow25to7)); // 25^7\n    const delta_theta =\n      CIEDE2000._deg30InRad *\n      Math.exp(\n        -(((ahp - CIEDE2000._deg275InRad) / CIEDE2000._deg25InRad) ** 2.0),\n      );\n    return -Math.sin(2.0 * delta_theta) * R_C;\n  }\n\n  private static _calculateT(ahp: number) {\n    return (\n      1.0 -\n      0.17 * Math.cos(ahp - CIEDE2000._deg30InRad) +\n      0.24 * Math.cos(ahp * 2.0) +\n      0.32 * Math.cos(ahp * 3.0 + CIEDE2000._deg6InRad) -\n      0.2 * Math.cos(ahp * 4.0 - CIEDE2000._deg63InRad)\n    );\n  }\n\n  private static _calculate_ahp(\n    C1pC2p: number,\n    h_bar: number,\n    h1p: number,\n    h2p: number,\n  ) {\n    const hpSum = h1p + h2p;\n    if (C1pC2p === 0) return hpSum;\n    if (h_bar <= CIEDE2000._deg180InRad) return hpSum / 2.0;\n    if (hpSum < CIEDE2000._deg360InRad) {\n      return (hpSum + CIEDE2000._deg360InRad) / 2.0;\n    }\n    return (hpSum - CIEDE2000._deg360InRad) / 2.0;\n  }\n\n  private static _calculate_dHp(\n    C1pC2p: number,\n    h_bar: number,\n    h2p: number,\n    h1p: number,\n  ) {\n    let dhp;\n    if (C1pC2p === 0) {\n      dhp = 0;\n    } else if (h_bar <= CIEDE2000._deg180InRad) {\n      dhp = h2p - h1p;\n    } else if (h2p <= h1p) {\n      dhp = h2p - h1p + CIEDE2000._deg360InRad;\n    } else {\n      dhp = h2p - h1p - CIEDE2000._deg360InRad;\n    }\n    return 2.0 * Math.sqrt(C1pC2p) * Math.sin(dhp / 2.0);\n  }\n\n  calculateRaw(\n    r1: number,\n    g1: number,\n    b1: number,\n    a1: number,\n    r2: number,\n    g2: number,\n    b2: number,\n    a2: number,\n  ) {\n    const lab1 = rgb2lab(\n      inRange0to255(r1 * this._whitePoint.r),\n      inRange0to255(g1 * this._whitePoint.g),\n      inRange0to255(b1 * this._whitePoint.b),\n    );\n    const lab2 = rgb2lab(\n      inRange0to255(r2 * this._whitePoint.r),\n      inRange0to255(g2 * this._whitePoint.g),\n      inRange0to255(b2 * this._whitePoint.b),\n    );\n    const dA = (a2 - a1) * this._whitePoint.a * CIEDE2000._kA;\n    const dE2 = this.calculateRawInLab(lab1, lab2);\n\n    return Math.sqrt(dE2 + dA * dA);\n  }\n\n  calculateRawInLab(\n    Lab1: { L: number; a: number; b: number },\n    Lab2: { L: number; a: number; b: number },\n  ) {\n    // Get L,a,b values for color 1\n    const L1 = Lab1.L;\n    const a1 = Lab1.a;\n    const b1 = Lab1.b;\n\n    // Get L,a,b values for color 2\n    const L2 = Lab2.L;\n    const a2 = Lab2.a;\n    const b2 = Lab2.b;\n\n    // Calculate Cprime1, Cprime2, Cabbar\n    const C1 = Math.sqrt(a1 * a1 + b1 * b1);\n    const C2 = Math.sqrt(a2 * a2 + b2 * b2);\n    const pow_a_C1_C2_to_7 = ((C1 + C2) / 2.0) ** 7.0;\n\n    const G =\n      0.5 *\n      (1.0 -\n        Math.sqrt(pow_a_C1_C2_to_7 / (pow_a_C1_C2_to_7 + CIEDE2000._pow25to7))); // 25^7\n    const a1p = (1.0 + G) * a1;\n    const a2p = (1.0 + G) * a2;\n\n    const C1p = Math.sqrt(a1p * a1p + b1 * b1);\n    const C2p = Math.sqrt(a2p * a2p + b2 * b2);\n    const C1pC2p = C1p * C2p;\n\n    // Angles in Degree.\n    const h1p = CIEDE2000._calculatehp(b1, a1p);\n    const h2p = CIEDE2000._calculatehp(b2, a2p);\n    const h_bar = Math.abs(h1p - h2p);\n    const dLp = L2 - L1;\n    const dCp = C2p - C1p;\n    const dHp = CIEDE2000._calculate_dHp(C1pC2p, h_bar, h2p, h1p);\n    const ahp = CIEDE2000._calculate_ahp(C1pC2p, h_bar, h1p, h2p);\n\n    const T = CIEDE2000._calculateT(ahp);\n\n    const aCp = (C1p + C2p) / 2.0;\n    const aLp_minus_50_square = ((L1 + L2) / 2.0 - 50.0) ** 2.0;\n    const S_L =\n      1.0 +\n      (0.015 * aLp_minus_50_square) / Math.sqrt(20.0 + aLp_minus_50_square);\n    const S_C = 1.0 + 0.045 * aCp;\n    const S_H = 1.0 + 0.015 * T * aCp;\n\n    const R_T = CIEDE2000._calculateRT(ahp, aCp);\n\n    const dLpSL = dLp / S_L; // S_L * kL, where kL is 1.0\n    const dCpSC = dCp / S_C; // S_C * kC, where kC is 1.0\n    const dHpSH = dHp / S_H; // S_H * kH, where kH is 1.0\n\n    return dLpSL ** 2 + dCpSC ** 2 + dHpSH ** 2 + R_T * dCpSC * dHpSH;\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * cmetric.ts - part of Image Quantization Library\n */\nimport { AbstractDistanceCalculator } from './distanceCalculator';\n\n/**\n * TODO: Name it: http://www.compuphase.com/cmetric.htm\n */\nexport class CMetric extends AbstractDistanceCalculator {\n  calculateRaw(\n    r1: number,\n    g1: number,\n    b1: number,\n    a1: number,\n    r2: number,\n    g2: number,\n    b2: number,\n    a2: number,\n  ) {\n    const rmean = ((r1 + r2) / 2) * this._whitePoint.r;\n    const r = (r1 - r2) * this._whitePoint.r;\n    const g = (g1 - g2) * this._whitePoint.g;\n    const b = (b1 - b2) * this._whitePoint.b;\n    const dE =\n      (((512 + rmean) * r * r) >> 8) +\n      4 * g * g +\n      (((767 - rmean) * b * b) >> 8);\n    const dA = (a2 - a1) * this._whitePoint.a;\n\n    return Math.sqrt(dE + dA * dA);\n  }\n\n  protected _setDefaults() {}\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * euclidean.ts - part of Image Quantization Library\n */\nimport { AbstractDistanceCalculator } from './distanceCalculator';\nimport { Y } from '../constants/bt709';\n\n/**\n * Euclidean color distance\n */\nexport abstract class AbstractEuclidean extends AbstractDistanceCalculator {\n  protected _kR!: number;\n  protected _kG!: number;\n  protected _kB!: number;\n  protected _kA!: number;\n\n  calculateRaw(\n    r1: number,\n    g1: number,\n    b1: number,\n    a1: number,\n    r2: number,\n    g2: number,\n    b2: number,\n    a2: number,\n  ) {\n    const dR = r2 - r1;\n    const dG = g2 - g1;\n    const dB = b2 - b1;\n    const dA = a2 - a1;\n    return Math.sqrt(\n      this._kR * dR * dR +\n        this._kG * dG * dG +\n        this._kB * dB * dB +\n        this._kA * dA * dA,\n    );\n  }\n}\n\nexport class Euclidean extends AbstractEuclidean {\n  protected _setDefaults() {\n    this._kR = 1;\n    this._kG = 1;\n    this._kB = 1;\n    this._kA = 1;\n  }\n}\n\n/**\n * Euclidean color distance (RGBQuant modification w Alpha)\n */\nexport class EuclideanBT709 extends AbstractEuclidean {\n  protected _setDefaults() {\n    this._kR = Y.RED;\n    this._kG = Y.GREEN;\n    this._kB = Y.BLUE;\n    // TODO: what is the best coefficient below?\n    this._kA = 1;\n  }\n}\n\n/**\n * Euclidean color distance (RGBQuant modification w/o Alpha)\n */\nexport class EuclideanBT709NoAlpha extends AbstractEuclidean {\n  protected _setDefaults() {\n    this._kR = Y.RED;\n    this._kG = Y.GREEN;\n    this._kB = Y.BLUE;\n    this._kA = 0;\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * manhattanNeuQuant.ts - part of Image Quantization Library\n */\nimport { AbstractDistanceCalculator } from './distanceCalculator';\nimport { Y } from '../constants/bt709';\n\n/**\n * Manhattan distance (NeuQuant modification) - w/o sRGB coefficients\n */\nexport abstract class AbstractManhattan extends AbstractDistanceCalculator {\n  protected _kR!: number;\n  protected _kG!: number;\n  protected _kB!: number;\n  protected _kA!: number;\n\n  calculateRaw(\n    r1: number,\n    g1: number,\n    b1: number,\n    a1: number,\n    r2: number,\n    g2: number,\n    b2: number,\n    a2: number,\n  ) {\n    let dR = r2 - r1;\n    let dG = g2 - g1;\n    let dB = b2 - b1;\n    let dA = a2 - a1;\n    if (dR < 0) dR = 0 - dR;\n    if (dG < 0) dG = 0 - dG;\n    if (dB < 0) dB = 0 - dB;\n    if (dA < 0) dA = 0 - dA;\n\n    return this._kR * dR + this._kG * dG + this._kB * dB + this._kA * dA;\n  }\n}\n\nexport class Manhattan extends AbstractManhattan {\n  protected _setDefaults() {\n    this._kR = 1;\n    this._kG = 1;\n    this._kB = 1;\n    this._kA = 1;\n  }\n}\n\n/**\n * Manhattan distance (Nommyde modification)\n * https://github.com/igor-bezkrovny/image-quantization/issues/4#issuecomment-235155320\n */\nexport class ManhattanNommyde extends AbstractManhattan {\n  protected _setDefaults() {\n    this._kR = 0.4984;\n    this._kG = 0.8625;\n    this._kB = 0.2979;\n    // TODO: what is the best coefficient below?\n    this._kA = 1;\n  }\n}\n\n/**\n * Manhattan distance (sRGB coefficients)\n */\nexport class ManhattanBT709 extends AbstractManhattan {\n  protected _setDefaults() {\n    this._kR = Y.RED;\n    this._kG = Y.GREEN;\n    this._kB = Y.BLUE;\n    // TODO: what is the best coefficient below?\n    this._kA = 1;\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * pngQuant.ts - part of Image Quantization Library\n */\nimport { AbstractDistanceCalculator } from './distanceCalculator';\n\n/**\n * TODO: check quality of this distance equation\n * TODO: ask author for usage rights\n * taken from:\n * {@link http://stackoverflow.com/questions/4754506/color-similarity-distance-in-rgba-color-space/8796867#8796867}\n * {@link https://github.com/pornel/pngquant/blob/cc39b47799a7ff2ef17b529f9415ff6e6b213b8f/lib/pam.h#L148}\n */\nexport class PNGQuant extends AbstractDistanceCalculator {\n  /**\n   * Author's comments\n   * px_b.rgb = px.rgb + 0*(1-px.a) // blend px on black\n   * px_b.a   = px.a   + 1*(1-px.a)\n   * px_w.rgb = px.rgb + 1*(1-px.a) // blend px on white\n   * px_w.a   = px.a   + 1*(1-px.a)\n   *\n   * px_b.rgb = px.rgb              // difference same as in opaque RGB\n   * px_b.a   = 1\n   * px_w.rgb = px.rgb - px.a       // difference simplifies to formula below\n   * px_w.a   = 1\n   *\n   * (px.rgb - px.a) - (py.rgb - py.a)\n   * (px.rgb - py.rgb) + (py.a - px.a)\n   *\n   */\n  calculateRaw(\n    r1: number,\n    g1: number,\n    b1: number,\n    a1: number,\n    r2: number,\n    g2: number,\n    b2: number,\n    a2: number,\n  ) {\n    const alphas = (a2 - a1) * this._whitePoint.a;\n    return (\n      this._colordifferenceCh(\n        r1 * this._whitePoint.r,\n        r2 * this._whitePoint.r,\n        alphas,\n      ) +\n      this._colordifferenceCh(\n        g1 * this._whitePoint.g,\n        g2 * this._whitePoint.g,\n        alphas,\n      ) +\n      this._colordifferenceCh(\n        b1 * this._whitePoint.b,\n        b2 * this._whitePoint.b,\n        alphas,\n      )\n    );\n  }\n\n  private _colordifferenceCh(x: number, y: number, alphas: number) {\n    // maximum of channel blended on white, and blended on black\n    // premultiplied alpha and backgrounds 0/1 shorten the formula\n    const black = x - y;\n    const white = black + alphas;\n\n    return black * black + white * white;\n  }\n\n  protected _setDefaults() {}\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * common.ts - part of Image Quantization Library\n */\nimport { PointContainer } from '../utils/pointContainer';\nimport { PaletteQuantizerYieldValue } from './paletteQuantizerYieldValue';\n\nexport abstract class AbstractPaletteQuantizer {\n  abstract sample(pointContainer: PointContainer): void;\n  abstract quantize(): IterableIterator<PaletteQuantizerYieldValue>;\n\n  quantizeSync() {\n    for (const value of this.quantize()) {\n      if (value.palette) {\n        return value.palette;\n      }\n    }\n\n    throw new Error('unreachable');\n  }\n}\n","/*\n * NeuQuant Neural-Net Quantization Algorithm\n * ------------------------------------------\n *\n * Copyright (c) 1994 Anthony Dekker\n *\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See\n * \"Kohonen neural networks for optimal colour quantization\" in \"Network:\n * Computation in Neural Systems\" Vol. 5 (1994) pp 351-367. for a discussion of\n * the algorithm.\n *\n * Any party obtaining a copy of these files from the author, directly or\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal in\n * this software and documentation files (the \"Software\"), including without\n * limitation the rights to use, copy, modify, merge, publish, distribute,\n * sublicense, and/or sell copies of the Software, and to permit persons who\n * receive copies from any such party to do so, with the only requirement being\n * that this copyright notice remain intact.\n */\n\n/**\n * @preserve TypeScript port:\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * neuquant.ts - part of Image Quantization Library\n */\n\nimport { Palette } from '../../utils/palette';\nimport { Point } from '../../utils/point';\nimport { PointContainer } from '../../utils/pointContainer';\nimport { AbstractDistanceCalculator } from '../../distance/distanceCalculator';\nimport { AbstractPaletteQuantizer } from '../paletteQuantizer';\nimport { PaletteQuantizerYieldValue } from '../paletteQuantizerYieldValue';\nimport { ProgressTracker } from '../../utils';\n\n// bias for colour values\nconst networkBiasShift = 3;\n\nclass Neuron {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n\n  constructor(defaultValue: number) {\n    this.r = this.g = this.b = this.a = defaultValue;\n  }\n\n  /**\n   * There is a fix in original NEUQUANT by Anthony Dekker (http://members.ozemail.com.au/~dekker/NEUQUANT.HTML)\n   * @example\n   * r = Math.min(255, (neuron.r + (1 << (networkBiasShift - 1))) >> networkBiasShift);\n   */\n  toPoint() {\n    return Point.createByRGBA(\n      this.r >> networkBiasShift,\n      this.g >> networkBiasShift,\n      this.b >> networkBiasShift,\n      this.a >> networkBiasShift,\n    );\n  }\n\n  subtract(r: number, g: number, b: number, a: number) {\n    this.r -= r | 0;\n    this.g -= g | 0;\n    this.b -= b | 0;\n    this.a -= a | 0;\n  }\n\n  /*\n   public subtract(r : number, g : number, b : number, a : number) : void {\n   this.r = (-r + this.r) | 0;\n   this.g = (-g + this.g) | 0;\n   this.b = (-b + this.b) | 0;\n   this.a = (-a + this.a) | 0;\n\n   this.r -= r;\n   this.g -= g;\n   this.b -= b;\n   this.a -= a;\n\n   this.r -= r | 0;\n   this.g -= g | 0;\n   this.b -= b | 0;\n   this.a -= a | 0;\n   }\n   */\n}\n\nexport class NeuQuant extends AbstractPaletteQuantizer {\n  /*\n   four primes near 500 - assume no image has a length so large\n   that it is divisible by all four primes\n   */\n  private static readonly _prime1 = 499;\n  private static readonly _prime2 = 491;\n  private static readonly _prime3 = 487;\n  private static readonly _prime4 = 503;\n  private static readonly _minpicturebytes = NeuQuant._prime4;\n\n  // no. of learning cycles\n  private static readonly _nCycles = 100;\n\n  // defs for freq and bias\n  private static readonly _initialBiasShift = 16;\n\n  // bias for fractions\n  private static readonly _initialBias = 1 << NeuQuant._initialBiasShift;\n  private static readonly _gammaShift = 10;\n\n  // gamma = 1024\n  // TODO: why gamma is never used?\n  // private static _gamma : number     = (1 << NeuQuant._gammaShift);\n  private static readonly _betaShift = 10;\n  private static readonly _beta = NeuQuant._initialBias >> NeuQuant._betaShift;\n\n  // beta = 1/1024\n  private static readonly _betaGamma =\n    NeuQuant._initialBias << (NeuQuant._gammaShift - NeuQuant._betaShift);\n\n  /*\n   * for 256 cols, radius starts\n   */\n  private static readonly _radiusBiasShift = 6;\n\n  // at 32.0 biased by 6 bits\n  private static readonly _radiusBias = 1 << NeuQuant._radiusBiasShift;\n\n  // and decreases by a factor of 1/30 each cycle\n  private static readonly _radiusDecrease = 30;\n\n  /* defs for decreasing alpha factor */\n\n  // alpha starts at 1.0\n  private static readonly _alphaBiasShift = 10;\n\n  // biased by 10 bits\n  private static readonly _initAlpha = 1 << NeuQuant._alphaBiasShift;\n\n  /* radBias and alphaRadBias used for radpower calculation */\n  private static readonly _radBiasShift = 8;\n  private static readonly _radBias = 1 << NeuQuant._radBiasShift;\n  private static readonly _alphaRadBiasShift =\n    NeuQuant._alphaBiasShift + NeuQuant._radBiasShift;\n  private static readonly _alphaRadBias = 1 << NeuQuant._alphaRadBiasShift;\n\n  private _pointArray: Point[];\n  private readonly _networkSize: number;\n  private _network!: Neuron[];\n\n  /** sampling factor 1..30 */\n  private readonly _sampleFactor!: number;\n  private _radPower!: number[];\n\n  // bias and freq arrays for learning\n  private _freq!: number[];\n\n  /* for network lookup - really 256 */\n  private _bias!: number[];\n  private readonly _distance: AbstractDistanceCalculator;\n\n  constructor(\n    colorDistanceCalculator: AbstractDistanceCalculator,\n    colors = 256,\n  ) {\n    super();\n    this._distance = colorDistanceCalculator;\n    this._pointArray = [];\n    this._sampleFactor = 1;\n    this._networkSize = colors;\n\n    this._distance.setWhitePoint(\n      255 << networkBiasShift,\n      255 << networkBiasShift,\n      255 << networkBiasShift,\n      255 << networkBiasShift,\n    );\n  }\n\n  sample(pointContainer: PointContainer) {\n    this._pointArray = this._pointArray.concat(pointContainer.getPointArray());\n  }\n\n  *quantize(): IterableIterator<PaletteQuantizerYieldValue> {\n    this._init();\n\n    yield* this._learn();\n\n    yield {\n      palette: this._buildPalette(),\n      progress: 100,\n    };\n  }\n\n  private _init() {\n    this._freq = [];\n    this._bias = [];\n    this._radPower = [];\n    this._network = [];\n    for (let i = 0; i < this._networkSize; i++) {\n      this._network[i] = new Neuron(\n        ((i << (networkBiasShift + 8)) / this._networkSize) | 0,\n      );\n\n      // 1/this._networkSize\n      this._freq[i] = (NeuQuant._initialBias / this._networkSize) | 0;\n      this._bias[i] = 0;\n    }\n  }\n\n  /**\n   * Main Learning Loop\n   */\n  private *_learn() {\n    let sampleFactor = this._sampleFactor;\n    const pointsNumber = this._pointArray.length;\n    if (pointsNumber < NeuQuant._minpicturebytes) sampleFactor = 1;\n\n    const alphadec = (30 + (sampleFactor - 1) / 3) | 0;\n    const pointsToSample = (pointsNumber / sampleFactor) | 0;\n\n    let delta = (pointsToSample / NeuQuant._nCycles) | 0;\n    let alpha = NeuQuant._initAlpha;\n    let radius = (this._networkSize >> 3) * NeuQuant._radiusBias;\n\n    let rad = radius >> NeuQuant._radiusBiasShift;\n    if (rad <= 1) rad = 0;\n\n    for (let i = 0; i < rad; i++) {\n      this._radPower[i] =\n        (alpha * (((rad * rad - i * i) * NeuQuant._radBias) / (rad * rad))) >>>\n        0;\n    }\n\n    let step;\n    if (pointsNumber < NeuQuant._minpicturebytes) {\n      step = 1;\n    } else if (pointsNumber % NeuQuant._prime1 !== 0) {\n      step = NeuQuant._prime1;\n    } else if (pointsNumber % NeuQuant._prime2 !== 0) {\n      step = NeuQuant._prime2;\n    } else if (pointsNumber % NeuQuant._prime3 !== 0) {\n      step = NeuQuant._prime3;\n    } else {\n      step = NeuQuant._prime4;\n    }\n\n    const tracker = new ProgressTracker(pointsToSample, 99);\n    for (let i = 0, pointIndex = 0; i < pointsToSample; ) {\n      if (tracker.shouldNotify(i)) {\n        yield {\n          progress: tracker.progress,\n        };\n      }\n\n      const point = this._pointArray[pointIndex];\n      const b = point.b << networkBiasShift;\n      const g = point.g << networkBiasShift;\n      const r = point.r << networkBiasShift;\n      const a = point.a << networkBiasShift;\n      const neuronIndex = this._contest(b, g, r, a);\n\n      this._alterSingle(alpha, neuronIndex, b, g, r, a);\n      if (rad !== 0) this._alterNeighbour(rad, neuronIndex, b, g, r, a);\n\n      /* alter neighbours */\n      pointIndex += step;\n      if (pointIndex >= pointsNumber) pointIndex -= pointsNumber;\n      i++;\n\n      if (delta === 0) delta = 1;\n\n      if (i % delta === 0) {\n        alpha -= (alpha / alphadec) | 0;\n        radius -= (radius / NeuQuant._radiusDecrease) | 0;\n        rad = radius >> NeuQuant._radiusBiasShift;\n\n        if (rad <= 1) rad = 0;\n        for (let j = 0; j < rad; j++) {\n          this._radPower[j] =\n            (alpha *\n              (((rad * rad - j * j) * NeuQuant._radBias) / (rad * rad))) >>>\n            0;\n        }\n      }\n    }\n  }\n\n  private _buildPalette() {\n    const palette = new Palette();\n\n    this._network.forEach(neuron => {\n      palette.add(neuron.toPoint());\n    });\n\n    palette.sort();\n    return palette;\n  }\n\n  /**\n   * Move adjacent neurons by precomputed alpha*(1-((i-j)^2/[r]^2)) in radpower[|i-j|]\n   */\n  private _alterNeighbour(\n    rad: number,\n    i: number,\n    b: number,\n    g: number,\n    r: number,\n    al: number,\n  ) {\n    let lo = i - rad;\n    if (lo < -1) lo = -1;\n\n    let hi = i + rad;\n    if (hi > this._networkSize) hi = this._networkSize;\n\n    let j = i + 1;\n    let k = i - 1;\n    let m = 1;\n\n    while (j < hi || k > lo) {\n      const a = this._radPower[m++] / NeuQuant._alphaRadBias;\n      if (j < hi) {\n        const p = this._network[j++];\n        p.subtract(a * (p.r - r), a * (p.g - g), a * (p.b - b), a * (p.a - al));\n      }\n\n      if (k > lo) {\n        const p = this._network[k--];\n        p.subtract(a * (p.r - r), a * (p.g - g), a * (p.b - b), a * (p.a - al));\n      }\n    }\n  }\n\n  /**\n   * Move neuron i towards biased (b,g,r) by factor alpha\n   */\n  private _alterSingle(\n    alpha: number,\n    i: number,\n    b: number,\n    g: number,\n    r: number,\n    a: number,\n  ) {\n    alpha /= NeuQuant._initAlpha;\n\n    /* alter hit neuron */\n    const n = this._network[i];\n    n.subtract(\n      alpha * (n.r - r),\n      alpha * (n.g - g),\n      alpha * (n.b - b),\n      alpha * (n.a - a),\n    );\n  }\n\n  /**\n   * Search for biased BGR values\n   * description:\n   *    finds closest neuron (min dist) and updates freq\n   *    finds best neuron (min dist-bias) and returns position\n   *    for frequently chosen neurons, freq[i] is high and bias[i] is negative\n   *    bias[i] = _gamma*((1/this._networkSize)-freq[i])\n   *\n   * Original distance equation:\n   *        dist = abs(dR) + abs(dG) + abs(dB)\n   */\n  private _contest(b: number, g: number, r: number, a: number) {\n    const multiplier = (255 * 4) << networkBiasShift;\n\n    let bestd = ~(1 << 31);\n    let bestbiasd = bestd;\n    let bestpos = -1;\n    let bestbiaspos = bestpos;\n\n    for (let i = 0; i < this._networkSize; i++) {\n      const n = this._network[i];\n      const dist =\n        (this._distance.calculateNormalized(n, { r, g, b, a }) * multiplier) |\n        0;\n\n      if (dist < bestd) {\n        bestd = dist;\n        bestpos = i;\n      }\n\n      const biasdist =\n        dist -\n        (this._bias[i] >> (NeuQuant._initialBiasShift - networkBiasShift));\n      if (biasdist < bestbiasd) {\n        bestbiasd = biasdist;\n        bestbiaspos = i;\n      }\n      const betafreq = this._freq[i] >> NeuQuant._betaShift;\n      this._freq[i] -= betafreq;\n      this._bias[i] += betafreq << NeuQuant._gammaShift;\n    }\n    this._freq[bestpos] += NeuQuant._beta;\n    this._bias[bestpos] -= NeuQuant._betaGamma;\n    return bestbiaspos;\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * palette.ts - part of Image Quantization Library\n */\n\nimport { Point } from './point';\nimport { PointContainer } from './pointContainer';\nimport { AbstractDistanceCalculator } from '../distance/distanceCalculator';\nimport { rgb2hsl } from '../conversion/rgb2hsl';\n\n// TODO: make paletteArray via pointContainer, so, export will be available via pointContainer.exportXXX\n\nconst hueGroups = 10;\n\nexport function hueGroup(hue: number, segmentsNumber: number) {\n  const maxHue = 360;\n  const seg = maxHue / segmentsNumber;\n  const half = seg / 2;\n\n  for (let i = 1, mid = seg - half; i < segmentsNumber; i++, mid += seg) {\n    if (hue >= mid && hue < mid + seg) return i;\n  }\n  return 0;\n}\n\nexport class Palette {\n  private readonly _pointContainer: PointContainer;\n  private readonly _pointArray: Point[] = [];\n  private _i32idx: { [key: string]: number } = {};\n\n  constructor() {\n    this._pointContainer = new PointContainer();\n    this._pointContainer.setHeight(1);\n    this._pointArray = this._pointContainer.getPointArray();\n  }\n\n  add(color: Point) {\n    this._pointArray.push(color);\n    this._pointContainer.setWidth(this._pointArray.length);\n  }\n\n  has(color: Point) {\n    for (let i = this._pointArray.length - 1; i >= 0; i--) {\n      if (color.uint32 === this._pointArray[i].uint32) return true;\n    }\n\n    return false;\n  }\n\n  // TOTRY: use HUSL - http://boronine.com/husl/ http://www.husl-colors.org/ https://github.com/husl-colors/husl\n  getNearestColor(\n    colorDistanceCalculator: AbstractDistanceCalculator,\n    color: Point,\n  ) {\n    return this._pointArray[\n      this._getNearestIndex(colorDistanceCalculator, color) | 0\n    ];\n  }\n\n  getPointContainer() {\n    return this._pointContainer;\n  }\n\n  // TOTRY: use HUSL - http://boronine.com/husl/\n  /*\n   public nearestIndexByUint32(i32) {\n   var idx : number = this._nearestPointFromCache(\"\" + i32);\n   if (idx >= 0) return idx;\n\n   var min = 1000,\n   rgb = [\n   (i32 & 0xff),\n   (i32 >>> 8) & 0xff,\n   (i32 >>> 16) & 0xff,\n   (i32 >>> 24) & 0xff\n   ],\n   len = this._pointArray.length;\n\n   idx = 0;\n   for (var i = 0; i < len; i++) {\n   var dist = Utils.distEuclidean(rgb, this._pointArray[i].rgba);\n\n   if (dist < min) {\n   min = dist;\n   idx = i;\n   }\n   }\n\n   this._i32idx[i32] = idx;\n   return idx;\n   }\n   */\n\n  private _nearestPointFromCache(key: string) {\n    return typeof this._i32idx[key] === 'number' ? this._i32idx[key] : -1;\n  }\n\n  private _getNearestIndex(\n    colorDistanceCalculator: AbstractDistanceCalculator,\n    point: Point,\n  ) {\n    let idx = this._nearestPointFromCache('' + point.uint32); // eslint-disable-line prefer-template\n    if (idx >= 0) return idx;\n\n    let minimalDistance = Number.MAX_VALUE;\n\n    idx = 0;\n    for (let i = 0, l = this._pointArray.length; i < l; i++) {\n      const p = this._pointArray[i];\n      const distance = colorDistanceCalculator.calculateRaw(\n        point.r,\n        point.g,\n        point.b,\n        point.a,\n        p.r,\n        p.g,\n        p.b,\n        p.a,\n      );\n\n      if (distance < minimalDistance) {\n        minimalDistance = distance;\n        idx = i;\n      }\n    }\n\n    this._i32idx[point.uint32] = idx;\n    return idx;\n  }\n\n  /*\n   public reduce(histogram : ColorHistogram, colors : number) {\n   if (this._pointArray.length > colors) {\n   var idxi32 = histogram.getImportanceSortedColorsIDXI32();\n\n   // quantize histogram to existing palette\n   var keep = [], uniqueColors = 0, idx, pruned = false;\n\n   for (var i = 0, len = idxi32.length; i < len; i++) {\n   // palette length reached, unset all remaining colors (sparse palette)\n   if (uniqueColors >= colors) {\n   this.prunePal(keep);\n   pruned = true;\n   break;\n   } else {\n   idx = this.nearestIndexByUint32(idxi32[i]);\n   if (keep.indexOf(idx) < 0) {\n   keep.push(idx);\n   uniqueColors++;\n   }\n   }\n   }\n\n   if (!pruned) {\n   this.prunePal(keep);\n   }\n   }\n   }\n\n   // TODO: check usage, not tested!\n   public prunePal(keep : number[]) {\n   var colors = this._pointArray.length;\n   for (var colorIndex = colors - 1; colorIndex >= 0; colorIndex--) {\n   if (keep.indexOf(colorIndex) < 0) {\n\n   if(colorIndex + 1 < colors) {\n   this._pointArray[ colorIndex ] = this._pointArray [ colors - 1 ];\n   }\n   --colors;\n   //this._pointArray[colorIndex] = null;\n   }\n   }\n   console.log(\"colors pruned: \" + (this._pointArray.length - colors));\n   this._pointArray.length = colors;\n   this._i32idx = {};\n   }\n   */\n\n  // TODO: group very low lum and very high lum colors\n  // TODO: pass custom sort order\n  // TODO: sort criteria function should be placed to HueStats class\n  sort() {\n    this._i32idx = {};\n    this._pointArray.sort((a: Point, b: Point) => {\n      const hslA = rgb2hsl(a.r, a.g, a.b);\n      const hslB = rgb2hsl(b.r, b.g, b.b);\n\n      // sort all grays + whites together\n      const hueA =\n        a.r === a.g && a.g === a.b ? 0 : 1 + hueGroup(hslA.h, hueGroups);\n      const hueB =\n        b.r === b.g && b.g === b.b ? 0 : 1 + hueGroup(hslB.h, hueGroups);\n      /*\n       var hueA = (a.r === a.g && a.g === a.b) ? 0 : 1 + Utils.hueGroup(hslA.h, hueGroups);\n       var hueB = (b.r === b.g && b.g === b.b) ? 0 : 1 + Utils.hueGroup(hslB.h, hueGroups);\n       */\n\n      const hueDiff = hueB - hueA;\n      if (hueDiff) return -hueDiff;\n\n      /*\n       var lumDiff = Utils.lumGroup(+hslB.l.toFixed(2)) - Utils.lumGroup(+hslA.l.toFixed(2));\n       if (lumDiff) return -lumDiff;\n       */\n      const lA = a.getLuminosity(true);\n      const lB = b.getLuminosity(true);\n\n      if (lB - lA !== 0) return lB - lA;\n\n      const satDiff = ((hslB.s * 100) | 0) - ((hslA.s * 100) | 0);\n      if (satDiff) return -satDiff;\n\n      return 0;\n    });\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * pointContainer.ts - part of Image Quantization Library\n */\nimport { Point } from './point';\n\n/**\n * v8 optimizations done.\n * fromXXX methods are static to move out polymorphic code from class instance itself.\n */\nexport class PointContainer {\n  private readonly _pointArray: Point[];\n  private _width: number;\n  private _height: number;\n\n  constructor() {\n    this._width = 0;\n    this._height = 0;\n    this._pointArray = [];\n  }\n\n  getWidth() {\n    return this._width;\n  }\n\n  getHeight() {\n    return this._height;\n  }\n\n  setWidth(width: number) {\n    this._width = width;\n  }\n\n  setHeight(height: number) {\n    this._height = height;\n  }\n\n  getPointArray() {\n    return this._pointArray;\n  }\n\n  clone() {\n    const clone = new PointContainer();\n    clone._width = this._width;\n    clone._height = this._height;\n\n    for (let i = 0, l = this._pointArray.length; i < l; i++) {\n      clone._pointArray[i] = Point.createByUint32(\n        this._pointArray[i].uint32 | 0,\n      ); // \"| 0\" is added for v8 optimization\n    }\n\n    return clone;\n  }\n\n  toUint32Array() {\n    const l = this._pointArray.length;\n    const uint32Array = new Uint32Array(l);\n\n    for (let i = 0; i < l; i++) {\n      uint32Array[i] = this._pointArray[i].uint32;\n    }\n\n    return uint32Array;\n  }\n\n  toUint8Array() {\n    return new Uint8Array(this.toUint32Array().buffer);\n  }\n\n  static fromHTMLImageElement(img: HTMLImageElement) {\n    const width = img.naturalWidth;\n    const height = img.naturalHeight;\n\n    // eslint-disable-next-line no-undef\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const ctx = canvas.getContext('2d')!; // tslint:disable-line:no-non-null-assertion\n    ctx.drawImage(img, 0, 0, width, height, 0, 0, width, height);\n\n    return PointContainer.fromHTMLCanvasElement(canvas);\n  }\n\n  static fromHTMLCanvasElement(canvas: HTMLCanvasElement) {\n    const width = canvas.width;\n    const height = canvas.height;\n\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const ctx = canvas.getContext('2d')!; // tslint:disable-line:no-non-null-assertion\n    const imgData = ctx.getImageData(0, 0, width, height);\n\n    return PointContainer.fromImageData(imgData);\n  }\n\n  static fromImageData(imageData: ImageData) {\n    const width = imageData.width;\n    const height = imageData.height;\n\n    return PointContainer.fromUint8Array(imageData.data, width, height);\n  }\n\n  static fromUint8Array(\n    uint8Array: number[] | Uint8Array | Uint8ClampedArray,\n    width: number,\n    height: number,\n  ) {\n    switch (Object.prototype.toString.call(uint8Array)) {\n      case '[object Uint8ClampedArray]':\n      case '[object Uint8Array]':\n        break;\n\n      default:\n        uint8Array = new Uint8Array(uint8Array);\n    }\n\n    const uint32Array = new Uint32Array((uint8Array as Uint8Array).buffer);\n    return PointContainer.fromUint32Array(uint32Array, width, height);\n  }\n\n  static fromUint32Array(\n    uint32Array: Uint32Array,\n    width: number,\n    height: number,\n  ) {\n    const container = new PointContainer();\n\n    container._width = width;\n    container._height = height;\n\n    for (let i = 0, l = uint32Array.length; i < l; i++) {\n      container._pointArray[i] = Point.createByUint32(uint32Array[i] | 0); // \"| 0\" is added for v8 optimization\n    }\n\n    return container;\n  }\n\n  static fromBuffer(buffer: Buffer, width: number, height: number) {\n    const uint32Array = new Uint32Array(\n      buffer.buffer,\n      buffer.byteOffset,\n      buffer.byteLength / Uint32Array.BYTES_PER_ELEMENT,\n    );\n    return PointContainer.fromUint32Array(uint32Array, width, height);\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * point.ts - part of Image Quantization Library\n */\nimport { Y } from '../constants/bt709';\n\nexport interface PointRGBA {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n}\n\n/**\n * v8 optimized class\n * 1) \"constructor\" should have initialization with worst types\n * 2) \"set\" should have |0 / >>> 0\n */\nexport class Point implements PointRGBA {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n  uint32: number;\n  rgba: number[]; // TODO: better name is quadruplet or quad may be?\n  // Lab : { L : number; a : number; b : number };\n\n  static createByQuadruplet(quadruplet: number[]) {\n    const point = new Point();\n\n    point.r = quadruplet[0] | 0;\n    point.g = quadruplet[1] | 0;\n    point.b = quadruplet[2] | 0;\n    point.a = quadruplet[3] | 0;\n    point._loadUINT32();\n    point._loadQuadruplet();\n    // point._loadLab();\n    return point;\n  }\n\n  static createByRGBA(red: number, green: number, blue: number, alpha: number) {\n    const point = new Point();\n\n    point.r = red | 0;\n    point.g = green | 0;\n    point.b = blue | 0;\n    point.a = alpha | 0;\n    point._loadUINT32();\n    point._loadQuadruplet();\n    // point._loadLab();\n    return point;\n  }\n\n  static createByUint32(uint32: number) {\n    const point = new Point();\n\n    point.uint32 = uint32 >>> 0;\n    point._loadRGBA();\n    point._loadQuadruplet();\n    // point._loadLab();\n    return point;\n  }\n\n  constructor() {\n    this.uint32 = -1 >>> 0;\n    this.r = this.g = this.b = this.a = 0;\n    this.rgba = new Array(4);\n    this.rgba[0] = 0;\n    this.rgba[1] = 0;\n    this.rgba[2] = 0;\n    this.rgba[3] = 0;\n    /*\n     this.Lab = {\n     L : 0.0,\n     a : 0.0,\n     b : 0.0\n     };\n     */\n  }\n\n  from(point: Point) {\n    this.r = point.r;\n    this.g = point.g;\n    this.b = point.b;\n    this.a = point.a;\n    this.uint32 = point.uint32;\n    this.rgba[0] = point.r;\n    this.rgba[1] = point.g;\n    this.rgba[2] = point.b;\n    this.rgba[3] = point.a;\n\n    /*\n     this.Lab.L = point.Lab.L;\n     this.Lab.a = point.Lab.a;\n     this.Lab.b = point.Lab.b;\n     */\n  }\n\n  /*\n   * TODO:\n   Luminance from RGB:\n\n   Luminance (standard for certain colour spaces): (0.2126*R + 0.7152*G + 0.0722*B) [1]\n   Luminance (perceived option 1): (0.299*R + 0.587*G + 0.114*B) [2]\n   Luminance (perceived option 2, slower to calculate):  sqrt( 0.241*R^2 + 0.691*G^2 + 0.068*B^2 ) ? sqrt( 0.299*R^2 + 0.587*G^2 + 0.114*B^2 ) (thanks to @MatthewHerbst) [http://alienryderflex.com/hsp.html]\n   */\n  getLuminosity(useAlphaChannel: boolean) {\n    let r = this.r;\n    let g = this.g;\n    let b = this.b;\n\n    if (useAlphaChannel) {\n      r = Math.min(255, 255 - this.a + (this.a * r) / 255);\n      g = Math.min(255, 255 - this.a + (this.a * g) / 255);\n      b = Math.min(255, 255 - this.a + (this.a * b) / 255);\n    }\n\n    // var luma = this.r * Point._RED_COEFFICIENT + this.g * Point._GREEN_COEFFICIENT + this.b * Point._BLUE_COEFFICIENT;\n\n    /*\n     if(useAlphaChannel) {\n     luma = (luma * (255 - this.a)) / 255;\n     }\n     */\n\n    return r * Y.RED + g * Y.GREEN + b * Y.BLUE;\n  }\n\n  private _loadUINT32() {\n    this.uint32 =\n      ((this.a << 24) | (this.b << 16) | (this.g << 8) | this.r) >>> 0;\n  }\n\n  private _loadRGBA() {\n    this.r = this.uint32 & 0xff;\n    this.g = (this.uint32 >>> 8) & 0xff;\n    this.b = (this.uint32 >>> 16) & 0xff;\n    this.a = (this.uint32 >>> 24) & 0xff;\n  }\n\n  private _loadQuadruplet() {\n    this.rgba[0] = this.r;\n    this.rgba[1] = this.g;\n    this.rgba[2] = this.b;\n    this.rgba[3] = this.a;\n\n    /*\n     var xyz = rgb2xyz(this.r, this.g, this.b);\n     var lab = xyz2lab(xyz.x, xyz.y, xyz.z);\n     this.lab.l = lab.l;\n     this.lab.a = lab.a;\n     this.lab.b = lab.b;\n     */\n  }\n\n  /*\n   private _loadLab() : void {\n   var Lab = Color.Conversion.rgb2lab(this.r, this.g, this.b);\n   this.Lab.L = Lab.L;\n   this.Lab.a = Lab.a;\n   this.Lab.b = Lab.b;\n   }\n   */\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * hueStatistics.ts - part of Image Quantization Library\n */\nimport { rgb2hsl } from '../conversion/rgb2hsl';\nimport { hueGroup } from './palette';\n\nclass HueGroup {\n  num = 0;\n  cols: number[] = [];\n}\n\nexport class HueStatistics {\n  private _numGroups: number;\n  private _minCols: number;\n  private _stats: HueGroup[];\n  private _groupsFull: number;\n\n  constructor(numGroups: number, minCols: number) {\n    this._numGroups = numGroups;\n    this._minCols = minCols;\n    this._stats = [];\n\n    for (let i = 0; i <= numGroups; i++) {\n      this._stats[i] = new HueGroup();\n    }\n\n    this._groupsFull = 0;\n  }\n\n  check(i32: number) {\n    if (this._groupsFull === this._numGroups + 1) {\n      this.check = () => {};\n    }\n\n    const r = i32 & 0xff;\n    const g = (i32 >>> 8) & 0xff;\n    const b = (i32 >>> 16) & 0xff;\n    const hg =\n      r === g && g === b\n        ? 0\n        : 1 + hueGroup(rgb2hsl(r, g, b).h, this._numGroups);\n    const gr = this._stats[hg];\n    const min = this._minCols;\n\n    gr.num++;\n\n    if (gr.num > min) {\n      return;\n    }\n    if (gr.num === min) {\n      this._groupsFull++;\n    }\n\n    if (gr.num <= min) {\n      this._stats[hg].cols.push(i32);\n    }\n  }\n\n  injectIntoDictionary(histG: Record<string, number>) {\n    for (let i = 0; i <= this._numGroups; i++) {\n      if (this._stats[i].num <= this._minCols) {\n        this._stats[i].cols.forEach((col: number) => {\n          if (!histG[col]) {\n            histG[col] = 1;\n          } else {\n            histG[col]++;\n          }\n        });\n      }\n    }\n  }\n\n  injectIntoArray(histG: string[]) {\n    for (let i = 0; i <= this._numGroups; i++) {\n      if (this._stats[i].num <= this._minCols) {\n        this._stats[i].cols.forEach((col: unknown) => {\n          if (histG.indexOf(col as string) === -1) {\n            histG.push(col as string);\n          }\n        });\n      }\n    }\n  }\n}\n","export class ProgressTracker {\n  static readonly steps = 100;\n\n  progress: number;\n\n  private _step: number;\n  private _range: number;\n  private _last: number;\n  private _progressRange: number;\n\n  constructor(valueRange: number, progressRange: number) {\n    this._range = valueRange;\n    this._progressRange = progressRange;\n    this._step = Math.max(1, (this._range / (ProgressTracker.steps + 1)) | 0);\n    this._last = -this._step;\n    this.progress = 0;\n  }\n\n  shouldNotify(current: number) {\n    if (current - this._last >= this._step) {\n      this._last = current;\n      this.progress = Math.min(\n        (this._progressRange * this._last) / this._range,\n        this._progressRange,\n      );\n      return true;\n    }\n\n    return false;\n  }\n}\n","/*\n * NeuQuantFloat Neural-Net Quantization Algorithm\n * ------------------------------------------\n *\n * Copyright (c) 1994 Anthony Dekker\n *\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See\n * \"Kohonen neural networks for optimal colour quantization\" in \"Network:\n * Computation in Neural Systems\" Vol. 5 (1994) pp 351-367. for a discussion of\n * the algorithm.\n *\n * Any party obtaining a copy of these files from the author, directly or\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal in\n * this software and documentation files (the \"Software\"), including without\n * limitation the rights to use, copy, modify, merge, publish, distribute,\n * sublicense, and/or sell copies of the Software, and to permit persons who\n * receive copies from any such party to do so, with the only requirement being\n * that this copyright notice remain intact.\n */\n/**\n * @preserve TypeScript port:\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * neuquant.ts - part of Image Quantization Library\n */\nimport { Palette } from '../../utils/palette';\nimport { Point } from '../../utils/point';\nimport { PointContainer } from '../../utils/pointContainer';\nimport { AbstractDistanceCalculator } from '../../distance/distanceCalculator';\nimport { AbstractPaletteQuantizer } from '../paletteQuantizer';\nimport { PaletteQuantizerYieldValue } from '../paletteQuantizerYieldValue';\nimport { ProgressTracker } from '../../utils';\n\n// bias for colour values\nconst networkBiasShift = 3;\n\nclass NeuronFloat {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n\n  constructor(defaultValue: number) {\n    this.r = this.g = this.b = this.a = defaultValue;\n  }\n\n  /**\n   * There is a fix in original NEUQUANT by Anthony Dekker (http://members.ozemail.com.au/~dekker/NEUQUANT.HTML)\n   * @example\n   * r = Math.min(255, (neuron.r + (1 << (networkBiasShift - 1))) >> networkBiasShift);\n   */\n  toPoint() {\n    return Point.createByRGBA(\n      this.r >> networkBiasShift,\n      this.g >> networkBiasShift,\n      this.b >> networkBiasShift,\n      this.a >> networkBiasShift,\n    );\n  }\n\n  subtract(r: number, g: number, b: number, a: number) {\n    this.r -= r;\n    this.g -= g;\n    this.b -= b;\n    this.a -= a;\n  }\n}\n\nexport class NeuQuantFloat extends AbstractPaletteQuantizer {\n  /*\n   four primes near 500 - assume no image has a length so large\n   that it is divisible by all four primes\n   */\n  private static readonly _prime1 = 499;\n  private static readonly _prime2 = 491;\n  private static readonly _prime3 = 487;\n  private static readonly _prime4 = 503;\n  private static readonly _minpicturebytes = NeuQuantFloat._prime4;\n\n  // no. of learning cycles\n  private static readonly _nCycles = 100;\n\n  // defs for freq and bias\n  private static readonly _initialBiasShift = 16;\n\n  // bias for fractions\n  private static readonly _initialBias = 1 << NeuQuantFloat._initialBiasShift;\n  private static readonly _gammaShift = 10;\n\n  // gamma = 1024\n  // TODO: why gamma is never used?\n  // private static _gamma : number     = (1 << NeuQuantFloat._gammaShift);\n  private static readonly _betaShift = 10;\n  private static readonly _beta =\n    NeuQuantFloat._initialBias >> NeuQuantFloat._betaShift;\n\n  // beta = 1/1024\n  private static readonly _betaGamma =\n    NeuQuantFloat._initialBias <<\n    (NeuQuantFloat._gammaShift - NeuQuantFloat._betaShift);\n\n  /*\n   * for 256 cols, radius starts\n   */\n  private static readonly _radiusBiasShift = 6;\n\n  // at 32.0 biased by 6 bits\n  private static readonly _radiusBias = 1 << NeuQuantFloat._radiusBiasShift;\n\n  // and decreases by a factor of 1/30 each cycle\n  private static readonly _radiusDecrease = 30;\n\n  /* defs for decreasing alpha factor */\n\n  // alpha starts at 1.0\n  private static readonly _alphaBiasShift = 10;\n\n  // biased by 10 bits\n  private static readonly _initAlpha = 1 << NeuQuantFloat._alphaBiasShift;\n\n  /* radBias and alphaRadBias used for radpower calculation */\n  private static readonly _radBiasShift = 8;\n  private static readonly _radBias = 1 << NeuQuantFloat._radBiasShift;\n  private static readonly _alphaRadBiasShift =\n    NeuQuantFloat._alphaBiasShift + NeuQuantFloat._radBiasShift;\n  private static readonly _alphaRadBias = 1 << NeuQuantFloat._alphaRadBiasShift;\n\n  private _pointArray!: Point[];\n  private readonly _networkSize!: number;\n  private _network!: NeuronFloat[];\n\n  /** sampling factor 1..30 */\n  private readonly _sampleFactor!: number;\n  private _radPower!: number[];\n\n  // bias and freq arrays for learning\n  private _freq!: number[];\n\n  /* for network lookup - really 256 */\n  private _bias!: number[];\n  private readonly _distance: AbstractDistanceCalculator;\n\n  constructor(\n    colorDistanceCalculator: AbstractDistanceCalculator,\n    colors = 256,\n  ) {\n    super();\n    this._distance = colorDistanceCalculator;\n    this._pointArray = [];\n    this._sampleFactor = 1;\n    this._networkSize = colors;\n\n    this._distance.setWhitePoint(\n      255 << networkBiasShift,\n      255 << networkBiasShift,\n      255 << networkBiasShift,\n      255 << networkBiasShift,\n    );\n  }\n\n  sample(pointContainer: PointContainer) {\n    this._pointArray = this._pointArray.concat(pointContainer.getPointArray());\n  }\n\n  *quantize() {\n    this._init();\n    yield* this._learn();\n\n    yield {\n      palette: this._buildPalette(),\n      progress: 100,\n    };\n  }\n\n  private _init() {\n    this._freq = [];\n    this._bias = [];\n    this._radPower = [];\n    this._network = [];\n    for (let i = 0; i < this._networkSize; i++) {\n      this._network[i] = new NeuronFloat(\n        (i << (networkBiasShift + 8)) / this._networkSize,\n      );\n\n      // 1/this._networkSize\n      this._freq[i] = NeuQuantFloat._initialBias / this._networkSize;\n      this._bias[i] = 0;\n    }\n  }\n\n  /**\n   * Main Learning Loop\n   */\n  private *_learn(): IterableIterator<PaletteQuantizerYieldValue> {\n    let sampleFactor = this._sampleFactor;\n\n    const pointsNumber = this._pointArray.length;\n    if (pointsNumber < NeuQuantFloat._minpicturebytes) sampleFactor = 1;\n\n    const alphadec = 30 + (sampleFactor - 1) / 3;\n    const pointsToSample = pointsNumber / sampleFactor;\n\n    let delta = (pointsToSample / NeuQuantFloat._nCycles) | 0;\n    let alpha = NeuQuantFloat._initAlpha;\n    let radius = (this._networkSize >> 3) * NeuQuantFloat._radiusBias;\n\n    let rad = radius >> NeuQuantFloat._radiusBiasShift;\n    if (rad <= 1) rad = 0;\n\n    for (let i = 0; i < rad; i++) {\n      this._radPower[i] =\n        alpha * (((rad * rad - i * i) * NeuQuantFloat._radBias) / (rad * rad));\n    }\n\n    let step;\n    if (pointsNumber < NeuQuantFloat._minpicturebytes) {\n      step = 1;\n    } else if (pointsNumber % NeuQuantFloat._prime1 !== 0) {\n      step = NeuQuantFloat._prime1;\n    } else if (pointsNumber % NeuQuantFloat._prime2 !== 0) {\n      step = NeuQuantFloat._prime2;\n    } else if (pointsNumber % NeuQuantFloat._prime3 !== 0) {\n      step = NeuQuantFloat._prime3;\n    } else {\n      step = NeuQuantFloat._prime4;\n    }\n\n    const tracker = new ProgressTracker(pointsToSample, 99);\n    for (let i = 0, pointIndex = 0; i < pointsToSample; ) {\n      if (tracker.shouldNotify(i)) {\n        yield {\n          progress: tracker.progress,\n        };\n      }\n\n      const point = this._pointArray[pointIndex];\n      const b = point.b << networkBiasShift;\n      const g = point.g << networkBiasShift;\n      const r = point.r << networkBiasShift;\n      const a = point.a << networkBiasShift;\n      const neuronIndex = this._contest(b, g, r, a);\n\n      this._alterSingle(alpha, neuronIndex, b, g, r, a);\n      if (rad !== 0) this._alterNeighbour(rad, neuronIndex, b, g, r, a);\n\n      /* alter neighbours */\n      pointIndex += step;\n      if (pointIndex >= pointsNumber) pointIndex -= pointsNumber;\n      i++;\n\n      if (delta === 0) delta = 1;\n\n      if (i % delta === 0) {\n        alpha -= alpha / alphadec;\n        radius -= radius / NeuQuantFloat._radiusDecrease;\n        rad = radius >> NeuQuantFloat._radiusBiasShift;\n\n        if (rad <= 1) rad = 0;\n        for (let j = 0; j < rad; j++) {\n          this._radPower[j] =\n            alpha *\n            (((rad * rad - j * j) * NeuQuantFloat._radBias) / (rad * rad));\n        }\n      }\n    }\n  }\n\n  private _buildPalette() {\n    const palette = new Palette();\n\n    this._network.forEach(neuron => {\n      palette.add(neuron.toPoint());\n    });\n\n    palette.sort();\n    return palette;\n  }\n\n  /**\n   * Move adjacent neurons by precomputed alpha*(1-((i-j)^2/[r]^2)) in radpower[|i-j|]\n   */\n  private _alterNeighbour(\n    rad: number,\n    i: number,\n    b: number,\n    g: number,\n    r: number,\n    al: number,\n  ) {\n    let lo = i - rad;\n    if (lo < -1) lo = -1;\n\n    let hi = i + rad;\n    if (hi > this._networkSize) hi = this._networkSize;\n\n    let j = i + 1;\n    let k = i - 1;\n    let m = 1;\n\n    while (j < hi || k > lo) {\n      const a = this._radPower[m++] / NeuQuantFloat._alphaRadBias;\n      if (j < hi) {\n        const p = this._network[j++];\n        p.subtract(a * (p.r - r), a * (p.g - g), a * (p.b - b), a * (p.a - al));\n      }\n\n      if (k > lo) {\n        const p = this._network[k--];\n        p.subtract(a * (p.r - r), a * (p.g - g), a * (p.b - b), a * (p.a - al));\n      }\n    }\n  }\n\n  /**\n   * Move neuron i towards biased (b,g,r) by factor alpha\n   */\n  private _alterSingle(\n    alpha: number,\n    i: number,\n    b: number,\n    g: number,\n    r: number,\n    a: number,\n  ) {\n    alpha /= NeuQuantFloat._initAlpha;\n\n    /* alter hit neuron */\n    const n = this._network[i];\n    n.subtract(\n      alpha * (n.r - r),\n      alpha * (n.g - g),\n      alpha * (n.b - b),\n      alpha * (n.a - a),\n    );\n  }\n\n  /**\n   * Search for biased BGR values\n   * description:\n   *    finds closest neuron (min dist) and updates freq\n   *    finds best neuron (min dist-bias) and returns position\n   *    for frequently chosen neurons, freq[i] is high and bias[i] is negative\n   *    bias[i] = _gamma*((1/this._networkSize)-freq[i])\n   *\n   * Original distance equation:\n   *        dist = abs(dR) + abs(dG) + abs(dB)\n   */\n  private _contest(b: number, g: number, r: number, al: number) {\n    const multiplier = (255 * 4) << networkBiasShift;\n\n    let bestd = ~(1 << 31);\n    let bestbiasd = bestd;\n    let bestpos = -1;\n    let bestbiaspos = bestpos;\n\n    for (let i = 0; i < this._networkSize; i++) {\n      const n = this._network[i];\n      const dist =\n        this._distance.calculateNormalized(n, { r, g, b, a: al }) * multiplier;\n\n      if (dist < bestd) {\n        bestd = dist;\n        bestpos = i;\n      }\n\n      const biasdist =\n        dist -\n        (this._bias[i] >> (NeuQuantFloat._initialBiasShift - networkBiasShift));\n      if (biasdist < bestbiasd) {\n        bestbiasd = biasdist;\n        bestbiaspos = i;\n      }\n      const betafreq = this._freq[i] >> NeuQuantFloat._betaShift;\n      this._freq[i] -= betafreq;\n      this._bias[i] += betafreq << NeuQuantFloat._gammaShift;\n    }\n    this._freq[bestpos] += NeuQuantFloat._beta;\n    this._bias[bestpos] -= NeuQuantFloat._betaGamma;\n    return bestbiaspos;\n  }\n}\n","/*\n * Copyright (c) 2015, Leon Sorokin\n * All rights reserved. (MIT Licensed)\n *\n * RGBQuant.js - an image quantization lib\n */\n\n/**\n * @preserve TypeScript port:\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * rgbquant.ts - part of Image Quantization Library\n */\n\nimport { Palette } from '../../utils/palette';\nimport { Point } from '../../utils/point';\nimport { PointContainer } from '../../utils/pointContainer';\nimport { AbstractDistanceCalculator } from '../../distance/distanceCalculator';\nimport { ColorHistogram } from './colorHistogram';\nimport { AbstractPaletteQuantizer } from '../paletteQuantizer';\nimport { PaletteQuantizerYieldValue } from '../paletteQuantizerYieldValue';\nimport { stableSort } from '../../utils/arithmetic';\nimport { ProgressTracker } from '../../utils';\n\nclass RemovedColor {\n  readonly index: number;\n  readonly color: Point;\n  readonly distance: number;\n\n  constructor(index: number, color: Point, distance: number) {\n    this.index = index;\n    this.color = color;\n    this.distance = distance;\n  }\n}\n\n// TODO: make input/output image and input/output palettes with instances of class Point only!\nexport class RGBQuant extends AbstractPaletteQuantizer {\n  // desired final palette size\n  private readonly _colors: number;\n\n  // color-distance threshold for initial reduction pass\n  private readonly _initialDistance: number;\n\n  // subsequent passes threshold\n  private readonly _distanceIncrement: number;\n\n  // accumulated histogram\n  private readonly _histogram: ColorHistogram;\n  private readonly _distance: AbstractDistanceCalculator;\n\n  constructor(\n    colorDistanceCalculator: AbstractDistanceCalculator,\n    colors = 256,\n    method = 2,\n  ) {\n    super();\n    this._distance = colorDistanceCalculator;\n    // desired final palette size\n    this._colors = colors;\n\n    // histogram to accumulate\n    this._histogram = new ColorHistogram(method, colors);\n\n    this._initialDistance = 0.01;\n    this._distanceIncrement = 0.005;\n  }\n\n  // gathers histogram info\n  sample(image: PointContainer) {\n    /*\n     var pointArray = image.getPointArray(), max = [0, 0, 0, 0], min = [255, 255, 255, 255];\n\n     for (var i = 0, l = pointArray.length; i < l; i++) {\n     var color = pointArray[i];\n     for (var componentIndex = 0; componentIndex < 4; componentIndex++) {\n     if (max[componentIndex] < color.rgba[componentIndex]) max[componentIndex] = color.rgba[componentIndex];\n     if (min[componentIndex] > color.rgba[componentIndex]) min[componentIndex] = color.rgba[componentIndex];\n     }\n     }\n     var rd = max[0] - min[0], gd = max[1] - min[1], bd = max[2] - min[2], ad = max[3] - min[3];\n     this._distance.setWhitePoint(rd, gd, bd, ad);\n\n     this._initialDistance = (Math.sqrt(rd * rd + gd * gd + bd * bd + ad * ad) / Math.sqrt(255 * 255 + 255 * 255 + 255 * 255)) * 0.01;\n     */\n\n    this._histogram.sample(image);\n  }\n\n  // reduces histogram to palette, remaps & memoizes reduced colors\n  *quantize() {\n    const idxi32 = this._histogram.getImportanceSortedColorsIDXI32();\n    if (idxi32.length === 0) {\n      throw new Error('No colors in image');\n    }\n\n    yield* this._buildPalette(idxi32);\n  }\n\n  // reduces similar colors from an importance-sorted Uint32 rgba array\n  private *_buildPalette(\n    idxi32: number[],\n  ): IterableIterator<PaletteQuantizerYieldValue> {\n    // reduce histogram to create initial palette\n    // build full rgb palette\n    const palette = new Palette();\n    const colorArray = palette.getPointContainer().getPointArray();\n    const usageArray = new Array(idxi32.length); // tslint:disable-line:prefer-array-literal\n\n    for (let i = 0; i < idxi32.length; i++) {\n      colorArray.push(Point.createByUint32(idxi32[i]));\n      usageArray[i] = 1;\n    }\n\n    const len = colorArray.length;\n    const memDist = [];\n\n    let palLen = len;\n    let thold = this._initialDistance;\n\n    // palette already at or below desired length\n    const tracker = new ProgressTracker(palLen - this._colors, 99);\n    while (palLen > this._colors) {\n      memDist.length = 0;\n\n      // iterate palette\n      for (let i = 0; i < len; i++) {\n        if (tracker.shouldNotify(len - palLen)) {\n          yield {\n            progress: tracker.progress,\n          };\n        }\n\n        if (usageArray[i] === 0) continue;\n        const pxi = colorArray[i];\n        // if (!pxi) continue;\n\n        for (let j = i + 1; j < len; j++) {\n          if (usageArray[j] === 0) continue;\n          const pxj = colorArray[j];\n          // if (!pxj) continue;\n\n          const dist = this._distance.calculateNormalized(pxi, pxj);\n          if (dist < thold) {\n            // store index,rgb,dist\n            memDist.push(new RemovedColor(j, pxj, dist));\n            usageArray[j] = 0;\n            palLen--;\n          }\n        }\n      }\n      // palette reduction pass\n      // console.log(\"palette length: \" + palLen);\n\n      // if palette is still much larger than target, increment by larger initDist\n      thold +=\n        palLen > this._colors * 3\n          ? this._initialDistance\n          : this._distanceIncrement;\n    }\n\n    // if palette is over-reduced, re-add removed colors with largest distances from last round\n    if (palLen < this._colors) {\n      // sort descending\n      stableSort(memDist, (a, b) => b.distance - a.distance);\n\n      let k = 0;\n      while (palLen < this._colors && k < memDist.length) {\n        const removedColor = memDist[k];\n        // re-inject rgb into final palette\n        usageArray[removedColor.index] = 1;\n        palLen++;\n        k++;\n      }\n    }\n\n    let colors = colorArray.length;\n    for (let colorIndex = colors - 1; colorIndex >= 0; colorIndex--) {\n      if (usageArray[colorIndex] === 0) {\n        if (colorIndex !== colors - 1) {\n          colorArray[colorIndex] = colorArray[colors - 1];\n        }\n        --colors;\n      }\n    }\n    colorArray.length = colors;\n\n    palette.sort();\n\n    yield {\n      palette,\n      progress: 100,\n    };\n  }\n}\n","/*\n * Copyright (c) 2015, Leon Sorokin\n * All rights reserved. (MIT Licensed)\n *\n * ColorHistogram.js - an image quantization lib\n */\n\n/**\n * @preserve TypeScript port:\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * colorHistogram.ts - part of Image Quantization Library\n */\nimport { HueStatistics } from '../../utils/hueStatistics';\nimport { PointContainer } from '../../utils/pointContainer';\nimport { stableSort } from '../../utils/arithmetic';\n\ninterface Box {\n  x: number;\n  y: number;\n  h: number;\n  w: number;\n}\n\nexport class ColorHistogram {\n  private static _boxSize = [64, 64];\n  private static _boxPixels = 2;\n  private static _hueGroups = 10;\n\n  // 1 = by global population, 2 = subregion population threshold\n  private _method: number;\n\n  // HueStatistics instance\n  private _hueStats: HueStatistics;\n\n  private _histogram: { [color: string]: number };\n\n  // # of highest-frequency colors to start with for palette reduction\n  private _initColors: number;\n\n  // if > 0, enables hues stats and min-color retention per group\n  private _minHueCols: number;\n\n  constructor(method: number, colors: number) {\n    // 1 = by global population, 2 = subregion population threshold\n    this._method = method;\n\n    // if > 0, enables hues stats and min-color retention per group\n    this._minHueCols = colors << 2; // opts.minHueCols || 0;\n\n    // # of highest-frequency colors to start with for palette reduction\n    this._initColors = colors << 2;\n\n    // HueStatistics instance\n    this._hueStats = new HueStatistics(\n      ColorHistogram._hueGroups,\n      this._minHueCols,\n    );\n\n    this._histogram = Object.create(null); // tslint:disable-line:no-null-keyword\n  }\n\n  sample(pointContainer: PointContainer) {\n    // eslint-disable-next-line default-case\n    switch (this._method) {\n      case 1:\n        this._colorStats1D(pointContainer);\n        break;\n      case 2:\n        this._colorStats2D(pointContainer);\n        break;\n    }\n  }\n\n  getImportanceSortedColorsIDXI32() {\n    // TODO: fix typing issue in stableSort func\n    const sorted = stableSort(\n      Object.keys(this._histogram),\n      (a, b) => this._histogram[b] - this._histogram[a],\n    );\n    if (sorted.length === 0) {\n      return [];\n    }\n\n    let idxi32;\n    switch (this._method) {\n      case 1:\n        const initialColorsLimit = Math.min(sorted.length, this._initColors);\n        const last = sorted[initialColorsLimit - 1];\n        const freq = this._histogram[last];\n\n        idxi32 = sorted.slice(0, initialColorsLimit);\n\n        // add any cut off colors with same freq as last\n        let pos = initialColorsLimit;\n        const len = sorted.length;\n        while (pos < len && this._histogram[sorted[pos]] === freq) {\n          idxi32.push(sorted[pos++]);\n        }\n\n        // inject min huegroup colors\n        this._hueStats.injectIntoArray(idxi32);\n        break;\n\n      case 2:\n        idxi32 = sorted;\n        break;\n\n      default:\n        // TODO: rethink errors\n        throw new Error('Incorrect method');\n    }\n\n    // int32-ify values\n    return idxi32.map(v => +v);\n  }\n\n  // global top-population\n  private _colorStats1D(pointContainer: PointContainer) {\n    const histG = this._histogram;\n    const pointArray = pointContainer.getPointArray();\n    const len = pointArray.length;\n\n    for (let i = 0; i < len; i++) {\n      const col = pointArray[i].uint32;\n\n      // collect hue stats\n      this._hueStats.check(col);\n\n      if (col in histG) {\n        histG[col]++;\n      } else {\n        histG[col] = 1;\n      }\n    }\n  }\n\n  // population threshold within subregions\n  // FIXME: this can over-reduce (few/no colors same?), need a way to keep\n  // important colors that dont ever reach local thresholds (gradients?)\n  private _colorStats2D(pointContainer: PointContainer) {\n    const width = pointContainer.getWidth();\n    const height = pointContainer.getHeight();\n    const pointArray = pointContainer.getPointArray();\n\n    const boxW = ColorHistogram._boxSize[0];\n    const boxH = ColorHistogram._boxSize[1];\n    const area = boxW * boxH;\n    const boxes = this._makeBoxes(width, height, boxW, boxH);\n    const histG = this._histogram;\n\n    boxes.forEach(box => {\n      let effc = Math.round((box.w * box.h) / area) * ColorHistogram._boxPixels;\n      if (effc < 2) effc = 2;\n\n      const histL: Record<string, number> = {};\n      this._iterateBox(box, width, i => {\n        const col = pointArray[i].uint32;\n\n        // collect hue stats\n        this._hueStats.check(col);\n\n        if (col in histG) {\n          histG[col]++;\n        } else if (col in histL) {\n          if (++histL[col] >= effc) {\n            histG[col] = histL[col];\n          }\n        } else {\n          histL[col] = 1;\n        }\n      });\n    });\n\n    // inject min huegroup colors\n    this._hueStats.injectIntoDictionary(histG);\n  }\n\n  // iterates @bbox within a parent rect of width @wid; calls @fn, passing index within parent\n  private _iterateBox(bbox: Box, wid: number, fn: (i: number) => void) {\n    const b = bbox;\n    const i0 = b.y * wid + b.x;\n    const i1 = (b.y + b.h - 1) * wid + (b.x + b.w - 1);\n    const incr = wid - b.w + 1;\n\n    let cnt = 0;\n    let i = i0;\n\n    do {\n      fn.call(this, i);\n      i += ++cnt % b.w === 0 ? incr : 1;\n    } while (i <= i1);\n  }\n\n  /**\n   *    partitions a rectangle of width x height into\n   *    array of boxes stepX x stepY (or less)\n   */\n  private _makeBoxes(\n    width: number,\n    height: number,\n    stepX: number,\n    stepY: number,\n  ) {\n    const wrem = width % stepX;\n    const hrem = height % stepY;\n    const xend = width - wrem;\n    const yend = height - hrem;\n    const boxesArray = [];\n\n    for (let y = 0; y < height; y += stepY) {\n      for (let x = 0; x < width; x += stepX) {\n        boxesArray.push({\n          x,\n          y,\n          w: x === xend ? wrem : stepX,\n          h: y === yend ? hrem : stepY,\n        });\n      }\n    }\n\n    return boxesArray;\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * wuQuant.ts - part of Image Quantization Library\n */\nimport { Palette } from '../../utils/palette';\nimport { Point } from '../../utils/point';\nimport { PointContainer } from '../../utils/pointContainer';\nimport { AbstractDistanceCalculator } from '../../distance/distanceCalculator';\nimport { AbstractPaletteQuantizer } from '../paletteQuantizer';\nimport { PaletteQuantizerYieldValue } from '../paletteQuantizerYieldValue';\nimport { ProgressTracker } from '../../utils';\n\nfunction createArray1D(dimension1: number) {\n  const a = [];\n  for (let k = 0; k < dimension1; k++) {\n    a[k] = 0;\n  }\n  return a;\n}\n\nfunction createArray4D(\n  dimension1: number,\n  dimension2: number,\n  dimension3: number,\n  dimension4: number,\n): number[][][][] {\n  const a = new Array(dimension1);\n  for (let i = 0; i < dimension1; i++) {\n    a[i] = new Array(dimension2);\n    for (let j = 0; j < dimension2; j++) {\n      a[i][j] = new Array(dimension3);\n      for (let k = 0; k < dimension3; k++) {\n        a[i][j][k] = new Array(dimension4);\n        for (let l = 0; l < dimension4; l++) {\n          a[i][j][k][l] = 0;\n        }\n      }\n    }\n  }\n  return a;\n}\n\nfunction createArray3D(\n  dimension1: number,\n  dimension2: number,\n  dimension3: number,\n): number[][][] {\n  const a = new Array(dimension1);\n  for (let i = 0; i < dimension1; i++) {\n    a[i] = new Array(dimension2);\n    for (let j = 0; j < dimension2; j++) {\n      a[i][j] = new Array(dimension3);\n      for (let k = 0; k < dimension3; k++) {\n        a[i][j][k] = 0;\n      }\n    }\n  }\n  return a;\n}\n\nfunction fillArray3D<T>(\n  a: T[][][],\n  dimension1: number,\n  dimension2: number,\n  dimension3: number,\n  value: T,\n) {\n  for (let i = 0; i < dimension1; i++) {\n    a[i] = [];\n    for (let j = 0; j < dimension2; j++) {\n      a[i][j] = [];\n      for (let k = 0; k < dimension3; k++) {\n        a[i][j][k] = value;\n      }\n    }\n  }\n}\n\nfunction fillArray1D<T>(a: T[], dimension1: number, value: T) {\n  for (let i = 0; i < dimension1; i++) {\n    a[i] = value;\n  }\n}\n\nexport class WuColorCube {\n  redMinimum!: number;\n  redMaximum!: number;\n  greenMinimum!: number;\n  greenMaximum!: number;\n  blueMinimum!: number;\n  blueMaximum!: number;\n  volume!: number;\n  alphaMinimum!: number;\n  alphaMaximum!: number;\n}\n\nexport class WuQuant extends AbstractPaletteQuantizer {\n  private static readonly _alpha = 3;\n  private static readonly _red = 2;\n  private static readonly _green = 1;\n  private static readonly _blue = 0;\n\n  private _reds!: number[];\n  private _greens!: number[];\n  private _blues!: number[];\n  private _alphas!: number[];\n  private _sums!: number[];\n\n  private _weights!: number[][][][];\n  private _momentsRed!: number[][][][];\n  private _momentsGreen!: number[][][][];\n  private _momentsBlue!: number[][][][];\n  private _momentsAlpha!: number[][][][];\n  private _moments!: number[][][][];\n  private _table!: number[];\n  private _pixels!: Point[];\n\n  private _cubes!: WuColorCube[];\n  private _colors!: number;\n\n  private _significantBitsPerChannel!: number;\n  private _maxSideIndex!: number;\n  private _alphaMaxSideIndex!: number;\n  private _sideSize!: number;\n  private _alphaSideSize!: number;\n\n  private readonly _distance: AbstractDistanceCalculator;\n\n  constructor(\n    colorDistanceCalculator: AbstractDistanceCalculator,\n    colors = 256,\n    significantBitsPerChannel = 5,\n  ) {\n    super();\n    this._distance = colorDistanceCalculator;\n    this._setQuality(significantBitsPerChannel);\n    this._initialize(colors);\n  }\n\n  sample(image: PointContainer) {\n    const pointArray = image.getPointArray();\n\n    for (let i = 0, l = pointArray.length; i < l; i++) {\n      this._addColor(pointArray[i]);\n    }\n\n    this._pixels = this._pixels.concat(pointArray);\n  }\n\n  *quantize() {\n    yield* this._preparePalette();\n\n    const palette = new Palette();\n\n    // generates palette\n    for (let paletteIndex = 0; paletteIndex < this._colors; paletteIndex++) {\n      if (this._sums[paletteIndex] > 0) {\n        const sum = this._sums[paletteIndex];\n        const r = this._reds[paletteIndex] / sum;\n        const g = this._greens[paletteIndex] / sum;\n        const b = this._blues[paletteIndex] / sum;\n        const a = this._alphas[paletteIndex] / sum;\n\n        const color = Point.createByRGBA(r | 0, g | 0, b | 0, a | 0);\n        palette.add(color);\n      }\n    }\n\n    palette.sort();\n\n    yield {\n      palette,\n      progress: 100,\n    };\n  }\n\n  private *_preparePalette() {\n    // preprocess the colors\n    yield* this._calculateMoments();\n\n    let next = 0;\n    const volumeVariance = createArray1D(this._colors);\n\n    // processes the cubes\n    for (let cubeIndex = 1; cubeIndex < this._colors; ++cubeIndex) {\n      // if cut is possible; make it\n      if (this._cut(this._cubes[next], this._cubes[cubeIndex])) {\n        volumeVariance[next] =\n          this._cubes[next].volume > 1\n            ? this._calculateVariance(this._cubes[next])\n            : 0.0;\n        volumeVariance[cubeIndex] =\n          this._cubes[cubeIndex].volume > 1\n            ? this._calculateVariance(this._cubes[cubeIndex])\n            : 0.0;\n      } else {\n        // the cut was not possible, revert the index\n        volumeVariance[next] = 0.0;\n        cubeIndex--;\n      }\n\n      next = 0;\n      let temp = volumeVariance[0];\n\n      for (let index = 1; index <= cubeIndex; ++index) {\n        if (volumeVariance[index] > temp) {\n          temp = volumeVariance[index];\n          next = index;\n        }\n      }\n\n      if (temp <= 0.0) {\n        this._colors = cubeIndex + 1;\n        break;\n      }\n    }\n\n    const lookupRed = [];\n    const lookupGreen = [];\n    const lookupBlue = [];\n    const lookupAlpha = [];\n\n    // precalculates lookup tables\n    for (let k = 0; k < this._colors; ++k) {\n      const weight = WuQuant._volume(this._cubes[k], this._weights);\n\n      if (weight > 0) {\n        lookupRed[k] =\n          (WuQuant._volume(this._cubes[k], this._momentsRed) / weight) | 0;\n        lookupGreen[k] =\n          (WuQuant._volume(this._cubes[k], this._momentsGreen) / weight) | 0;\n        lookupBlue[k] =\n          (WuQuant._volume(this._cubes[k], this._momentsBlue) / weight) | 0;\n        lookupAlpha[k] =\n          (WuQuant._volume(this._cubes[k], this._momentsAlpha) / weight) | 0;\n      } else {\n        lookupRed[k] = 0;\n        lookupGreen[k] = 0;\n        lookupBlue[k] = 0;\n        lookupAlpha[k] = 0;\n      }\n    }\n\n    this._reds = createArray1D(this._colors + 1);\n    this._greens = createArray1D(this._colors + 1);\n    this._blues = createArray1D(this._colors + 1);\n    this._alphas = createArray1D(this._colors + 1);\n    this._sums = createArray1D(this._colors + 1);\n\n    // scans and adds colors\n    for (let index = 0, l = this._pixels.length; index < l; index++) {\n      const color = this._pixels[index];\n\n      const match = -1;\n\n      let bestMatch = match;\n      let bestDistance = Number.MAX_VALUE;\n\n      for (let lookup = 0; lookup < this._colors; lookup++) {\n        const foundRed = lookupRed[lookup];\n        const foundGreen = lookupGreen[lookup];\n        const foundBlue = lookupBlue[lookup];\n        const foundAlpha = lookupAlpha[lookup];\n\n        const distance = this._distance.calculateRaw(\n          foundRed,\n          foundGreen,\n          foundBlue,\n          foundAlpha,\n          color.r,\n          color.g,\n          color.b,\n          color.a,\n        );\n\n        if (distance < bestDistance) {\n          bestDistance = distance;\n          bestMatch = lookup;\n        }\n      }\n\n      this._reds[bestMatch] += color.r;\n      this._greens[bestMatch] += color.g;\n      this._blues[bestMatch] += color.b;\n      this._alphas[bestMatch] += color.a;\n      this._sums[bestMatch]++;\n    }\n  }\n\n  private _addColor(color: Point) {\n    const bitsToRemove = 8 - this._significantBitsPerChannel;\n    const indexRed = (color.r >> bitsToRemove) + 1;\n    const indexGreen = (color.g >> bitsToRemove) + 1;\n    const indexBlue = (color.b >> bitsToRemove) + 1;\n    const indexAlpha = (color.a >> bitsToRemove) + 1;\n\n    // if(color.a > 10) {\n    this._weights[indexAlpha][indexRed][indexGreen][indexBlue]++;\n    this._momentsRed[indexAlpha][indexRed][indexGreen][indexBlue] += color.r;\n    this._momentsGreen[indexAlpha][indexRed][indexGreen][indexBlue] += color.g;\n    this._momentsBlue[indexAlpha][indexRed][indexGreen][indexBlue] += color.b;\n    this._momentsAlpha[indexAlpha][indexRed][indexGreen][indexBlue] += color.a;\n    this._moments[indexAlpha][indexRed][indexGreen][indexBlue] +=\n      this._table[color.r] +\n      this._table[color.g] +\n      this._table[color.b] +\n      this._table[color.a];\n    // }\n  }\n\n  /**\n   * Converts the histogram to a series of _moments.\n   */\n  private *_calculateMoments(): IterableIterator<PaletteQuantizerYieldValue> {\n    const area: number[] = [];\n    const areaRed: number[] = [];\n    const areaGreen: number[] = [];\n    const areaBlue: number[] = [];\n    const areaAlpha: number[] = [];\n    const area2: number[] = [];\n\n    const xarea = createArray3D(this._sideSize, this._sideSize, this._sideSize);\n    const xareaRed = createArray3D(\n      this._sideSize,\n      this._sideSize,\n      this._sideSize,\n    );\n    const xareaGreen = createArray3D(\n      this._sideSize,\n      this._sideSize,\n      this._sideSize,\n    );\n    const xareaBlue = createArray3D(\n      this._sideSize,\n      this._sideSize,\n      this._sideSize,\n    );\n    const xareaAlpha = createArray3D(\n      this._sideSize,\n      this._sideSize,\n      this._sideSize,\n    );\n    const xarea2 = createArray3D(\n      this._sideSize,\n      this._sideSize,\n      this._sideSize,\n    );\n\n    let trackerProgress = 0;\n    const tracker = new ProgressTracker(\n      this._alphaMaxSideIndex * this._maxSideIndex,\n      99,\n    );\n\n    for (\n      let alphaIndex = 1;\n      alphaIndex <= this._alphaMaxSideIndex;\n      ++alphaIndex\n    ) {\n      fillArray3D<number>(\n        xarea,\n        this._sideSize,\n        this._sideSize,\n        this._sideSize,\n        0,\n      );\n      fillArray3D<number>(\n        xareaRed,\n        this._sideSize,\n        this._sideSize,\n        this._sideSize,\n        0,\n      );\n      fillArray3D<number>(\n        xareaGreen,\n        this._sideSize,\n        this._sideSize,\n        this._sideSize,\n        0,\n      );\n      fillArray3D<number>(\n        xareaBlue,\n        this._sideSize,\n        this._sideSize,\n        this._sideSize,\n        0,\n      );\n      fillArray3D<number>(\n        xareaAlpha,\n        this._sideSize,\n        this._sideSize,\n        this._sideSize,\n        0,\n      );\n      fillArray3D<number>(\n        xarea2,\n        this._sideSize,\n        this._sideSize,\n        this._sideSize,\n        0,\n      );\n\n      for (\n        let redIndex = 1;\n        redIndex <= this._maxSideIndex;\n        ++redIndex, ++trackerProgress\n      ) {\n        if (tracker.shouldNotify(trackerProgress)) {\n          yield {\n            progress: tracker.progress,\n          };\n        }\n\n        fillArray1D<number>(area, this._sideSize, 0);\n        fillArray1D<number>(areaRed, this._sideSize, 0);\n        fillArray1D<number>(areaGreen, this._sideSize, 0);\n        fillArray1D<number>(areaBlue, this._sideSize, 0);\n        fillArray1D<number>(areaAlpha, this._sideSize, 0);\n        fillArray1D<number>(area2, this._sideSize, 0);\n\n        for (\n          let greenIndex = 1;\n          greenIndex <= this._maxSideIndex;\n          ++greenIndex\n        ) {\n          let line = 0;\n          let lineRed = 0;\n          let lineGreen = 0;\n          let lineBlue = 0;\n          let lineAlpha = 0;\n          let line2 = 0.0;\n\n          for (\n            let blueIndex = 1;\n            blueIndex <= this._maxSideIndex;\n            ++blueIndex\n          ) {\n            line += this._weights[alphaIndex][redIndex][greenIndex][blueIndex];\n            lineRed += this._momentsRed[alphaIndex][redIndex][greenIndex][\n              blueIndex\n            ];\n            lineGreen += this._momentsGreen[alphaIndex][redIndex][greenIndex][\n              blueIndex\n            ];\n            lineBlue += this._momentsBlue[alphaIndex][redIndex][greenIndex][\n              blueIndex\n            ];\n            lineAlpha += this._momentsAlpha[alphaIndex][redIndex][greenIndex][\n              blueIndex\n            ];\n            line2 += this._moments[alphaIndex][redIndex][greenIndex][blueIndex];\n\n            area[blueIndex] += line;\n            areaRed[blueIndex] += lineRed;\n            areaGreen[blueIndex] += lineGreen;\n            areaBlue[blueIndex] += lineBlue;\n            areaAlpha[blueIndex] += lineAlpha;\n            area2[blueIndex] += line2;\n\n            xarea[redIndex][greenIndex][blueIndex] =\n              xarea[redIndex - 1][greenIndex][blueIndex] + area[blueIndex];\n            xareaRed[redIndex][greenIndex][blueIndex] =\n              xareaRed[redIndex - 1][greenIndex][blueIndex] +\n              areaRed[blueIndex];\n            xareaGreen[redIndex][greenIndex][blueIndex] =\n              xareaGreen[redIndex - 1][greenIndex][blueIndex] +\n              areaGreen[blueIndex];\n            xareaBlue[redIndex][greenIndex][blueIndex] =\n              xareaBlue[redIndex - 1][greenIndex][blueIndex] +\n              areaBlue[blueIndex];\n            xareaAlpha[redIndex][greenIndex][blueIndex] =\n              xareaAlpha[redIndex - 1][greenIndex][blueIndex] +\n              areaAlpha[blueIndex];\n            xarea2[redIndex][greenIndex][blueIndex] =\n              xarea2[redIndex - 1][greenIndex][blueIndex] + area2[blueIndex];\n\n            this._weights[alphaIndex][redIndex][greenIndex][blueIndex] =\n              this._weights[alphaIndex - 1][redIndex][greenIndex][blueIndex] +\n              xarea[redIndex][greenIndex][blueIndex];\n            this._momentsRed[alphaIndex][redIndex][greenIndex][blueIndex] =\n              this._momentsRed[alphaIndex - 1][redIndex][greenIndex][\n                blueIndex\n              ] + xareaRed[redIndex][greenIndex][blueIndex];\n            this._momentsGreen[alphaIndex][redIndex][greenIndex][blueIndex] =\n              this._momentsGreen[alphaIndex - 1][redIndex][greenIndex][\n                blueIndex\n              ] + xareaGreen[redIndex][greenIndex][blueIndex];\n            this._momentsBlue[alphaIndex][redIndex][greenIndex][blueIndex] =\n              this._momentsBlue[alphaIndex - 1][redIndex][greenIndex][\n                blueIndex\n              ] + xareaBlue[redIndex][greenIndex][blueIndex];\n            this._momentsAlpha[alphaIndex][redIndex][greenIndex][blueIndex] =\n              this._momentsAlpha[alphaIndex - 1][redIndex][greenIndex][\n                blueIndex\n              ] + xareaAlpha[redIndex][greenIndex][blueIndex];\n            this._moments[alphaIndex][redIndex][greenIndex][blueIndex] =\n              this._moments[alphaIndex - 1][redIndex][greenIndex][blueIndex] +\n              xarea2[redIndex][greenIndex][blueIndex];\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Computes the volume of the cube in a specific moment.\n   */\n  private static _volumeFloat(cube: WuColorCube, moment: number[][][][]) {\n    return (\n      moment[cube.alphaMaximum][cube.redMaximum][cube.greenMaximum][\n        cube.blueMaximum\n      ] -\n      moment[cube.alphaMaximum][cube.redMaximum][cube.greenMinimum][\n        cube.blueMaximum\n      ] -\n      moment[cube.alphaMaximum][cube.redMinimum][cube.greenMaximum][\n        cube.blueMaximum\n      ] +\n      moment[cube.alphaMaximum][cube.redMinimum][cube.greenMinimum][\n        cube.blueMaximum\n      ] -\n      moment[cube.alphaMinimum][cube.redMaximum][cube.greenMaximum][\n        cube.blueMaximum\n      ] +\n      moment[cube.alphaMinimum][cube.redMaximum][cube.greenMinimum][\n        cube.blueMaximum\n      ] +\n      moment[cube.alphaMinimum][cube.redMinimum][cube.greenMaximum][\n        cube.blueMaximum\n      ] -\n      moment[cube.alphaMinimum][cube.redMinimum][cube.greenMinimum][\n        cube.blueMaximum\n      ] -\n      (moment[cube.alphaMaximum][cube.redMaximum][cube.greenMaximum][\n        cube.blueMinimum\n      ] -\n        moment[cube.alphaMinimum][cube.redMaximum][cube.greenMaximum][\n          cube.blueMinimum\n        ] -\n        moment[cube.alphaMaximum][cube.redMaximum][cube.greenMinimum][\n          cube.blueMinimum\n        ] +\n        moment[cube.alphaMinimum][cube.redMaximum][cube.greenMinimum][\n          cube.blueMinimum\n        ] -\n        moment[cube.alphaMaximum][cube.redMinimum][cube.greenMaximum][\n          cube.blueMinimum\n        ] +\n        moment[cube.alphaMinimum][cube.redMinimum][cube.greenMaximum][\n          cube.blueMinimum\n        ] +\n        moment[cube.alphaMaximum][cube.redMinimum][cube.greenMinimum][\n          cube.blueMinimum\n        ] -\n        moment[cube.alphaMinimum][cube.redMinimum][cube.greenMinimum][\n          cube.blueMinimum\n        ])\n    );\n  }\n\n  /**\n   * Computes the volume of the cube in a specific moment.\n   */\n  private static _volume(cube: WuColorCube, moment: number[][][][]) {\n    return WuQuant._volumeFloat(cube, moment) | 0;\n  }\n\n  /**\n   * Splits the cube in given position][and color direction.\n   */\n  private static _top(\n    cube: WuColorCube,\n    direction: number,\n    position: number,\n    moment: number[][][][],\n  ) {\n    let result;\n    switch (direction) {\n      case WuQuant._alpha:\n        result =\n          moment[position][cube.redMaximum][cube.greenMaximum][\n            cube.blueMaximum\n          ] -\n          moment[position][cube.redMaximum][cube.greenMinimum][\n            cube.blueMaximum\n          ] -\n          moment[position][cube.redMinimum][cube.greenMaximum][\n            cube.blueMaximum\n          ] +\n          moment[position][cube.redMinimum][cube.greenMinimum][\n            cube.blueMaximum\n          ] -\n          (moment[position][cube.redMaximum][cube.greenMaximum][\n            cube.blueMinimum\n          ] -\n            moment[position][cube.redMaximum][cube.greenMinimum][\n              cube.blueMinimum\n            ] -\n            moment[position][cube.redMinimum][cube.greenMaximum][\n              cube.blueMinimum\n            ] +\n            moment[position][cube.redMinimum][cube.greenMinimum][\n              cube.blueMinimum\n            ]);\n        break;\n\n      case WuQuant._red:\n        result =\n          moment[cube.alphaMaximum][position][cube.greenMaximum][\n            cube.blueMaximum\n          ] -\n          moment[cube.alphaMaximum][position][cube.greenMinimum][\n            cube.blueMaximum\n          ] -\n          moment[cube.alphaMinimum][position][cube.greenMaximum][\n            cube.blueMaximum\n          ] +\n          moment[cube.alphaMinimum][position][cube.greenMinimum][\n            cube.blueMaximum\n          ] -\n          (moment[cube.alphaMaximum][position][cube.greenMaximum][\n            cube.blueMinimum\n          ] -\n            moment[cube.alphaMaximum][position][cube.greenMinimum][\n              cube.blueMinimum\n            ] -\n            moment[cube.alphaMinimum][position][cube.greenMaximum][\n              cube.blueMinimum\n            ] +\n            moment[cube.alphaMinimum][position][cube.greenMinimum][\n              cube.blueMinimum\n            ]);\n        break;\n\n      case WuQuant._green:\n        result =\n          moment[cube.alphaMaximum][cube.redMaximum][position][\n            cube.blueMaximum\n          ] -\n          moment[cube.alphaMaximum][cube.redMinimum][position][\n            cube.blueMaximum\n          ] -\n          moment[cube.alphaMinimum][cube.redMaximum][position][\n            cube.blueMaximum\n          ] +\n          moment[cube.alphaMinimum][cube.redMinimum][position][\n            cube.blueMaximum\n          ] -\n          (moment[cube.alphaMaximum][cube.redMaximum][position][\n            cube.blueMinimum\n          ] -\n            moment[cube.alphaMaximum][cube.redMinimum][position][\n              cube.blueMinimum\n            ] -\n            moment[cube.alphaMinimum][cube.redMaximum][position][\n              cube.blueMinimum\n            ] +\n            moment[cube.alphaMinimum][cube.redMinimum][position][\n              cube.blueMinimum\n            ]);\n        break;\n\n      case WuQuant._blue:\n        result =\n          moment[cube.alphaMaximum][cube.redMaximum][cube.greenMaximum][\n            position\n          ] -\n          moment[cube.alphaMaximum][cube.redMaximum][cube.greenMinimum][\n            position\n          ] -\n          moment[cube.alphaMaximum][cube.redMinimum][cube.greenMaximum][\n            position\n          ] +\n          moment[cube.alphaMaximum][cube.redMinimum][cube.greenMinimum][\n            position\n          ] -\n          (moment[cube.alphaMinimum][cube.redMaximum][cube.greenMaximum][\n            position\n          ] -\n            moment[cube.alphaMinimum][cube.redMaximum][cube.greenMinimum][\n              position\n            ] -\n            moment[cube.alphaMinimum][cube.redMinimum][cube.greenMaximum][\n              position\n            ] +\n            moment[cube.alphaMinimum][cube.redMinimum][cube.greenMinimum][\n              position\n            ]);\n        break;\n      default:\n        throw new Error('impossible');\n    }\n\n    return result | 0;\n  }\n\n  /**\n   * Splits the cube in a given color direction at its minimum.\n   */\n  private static _bottom(\n    cube: WuColorCube,\n    direction: number,\n    moment: number[][][][],\n  ) {\n    switch (direction) {\n      case WuQuant._alpha:\n        return (\n          -moment[cube.alphaMinimum][cube.redMaximum][cube.greenMaximum][\n            cube.blueMaximum\n          ] +\n          moment[cube.alphaMinimum][cube.redMaximum][cube.greenMinimum][\n            cube.blueMaximum\n          ] +\n          moment[cube.alphaMinimum][cube.redMinimum][cube.greenMaximum][\n            cube.blueMaximum\n          ] -\n          moment[cube.alphaMinimum][cube.redMinimum][cube.greenMinimum][\n            cube.blueMaximum\n          ] -\n          (-moment[cube.alphaMinimum][cube.redMaximum][cube.greenMaximum][\n            cube.blueMinimum\n          ] +\n            moment[cube.alphaMinimum][cube.redMaximum][cube.greenMinimum][\n              cube.blueMinimum\n            ] +\n            moment[cube.alphaMinimum][cube.redMinimum][cube.greenMaximum][\n              cube.blueMinimum\n            ] -\n            moment[cube.alphaMinimum][cube.redMinimum][cube.greenMinimum][\n              cube.blueMinimum\n            ])\n        );\n\n      case WuQuant._red:\n        return (\n          -moment[cube.alphaMaximum][cube.redMinimum][cube.greenMaximum][\n            cube.blueMaximum\n          ] +\n          moment[cube.alphaMaximum][cube.redMinimum][cube.greenMinimum][\n            cube.blueMaximum\n          ] +\n          moment[cube.alphaMinimum][cube.redMinimum][cube.greenMaximum][\n            cube.blueMaximum\n          ] -\n          moment[cube.alphaMinimum][cube.redMinimum][cube.greenMinimum][\n            cube.blueMaximum\n          ] -\n          (-moment[cube.alphaMaximum][cube.redMinimum][cube.greenMaximum][\n            cube.blueMinimum\n          ] +\n            moment[cube.alphaMaximum][cube.redMinimum][cube.greenMinimum][\n              cube.blueMinimum\n            ] +\n            moment[cube.alphaMinimum][cube.redMinimum][cube.greenMaximum][\n              cube.blueMinimum\n            ] -\n            moment[cube.alphaMinimum][cube.redMinimum][cube.greenMinimum][\n              cube.blueMinimum\n            ])\n        );\n\n      case WuQuant._green:\n        return (\n          -moment[cube.alphaMaximum][cube.redMaximum][cube.greenMinimum][\n            cube.blueMaximum\n          ] +\n          moment[cube.alphaMaximum][cube.redMinimum][cube.greenMinimum][\n            cube.blueMaximum\n          ] +\n          moment[cube.alphaMinimum][cube.redMaximum][cube.greenMinimum][\n            cube.blueMaximum\n          ] -\n          moment[cube.alphaMinimum][cube.redMinimum][cube.greenMinimum][\n            cube.blueMaximum\n          ] -\n          (-moment[cube.alphaMaximum][cube.redMaximum][cube.greenMinimum][\n            cube.blueMinimum\n          ] +\n            moment[cube.alphaMaximum][cube.redMinimum][cube.greenMinimum][\n              cube.blueMinimum\n            ] +\n            moment[cube.alphaMinimum][cube.redMaximum][cube.greenMinimum][\n              cube.blueMinimum\n            ] -\n            moment[cube.alphaMinimum][cube.redMinimum][cube.greenMinimum][\n              cube.blueMinimum\n            ])\n        );\n\n      case WuQuant._blue:\n        return (\n          -moment[cube.alphaMaximum][cube.redMaximum][cube.greenMaximum][\n            cube.blueMinimum\n          ] +\n          moment[cube.alphaMaximum][cube.redMaximum][cube.greenMinimum][\n            cube.blueMinimum\n          ] +\n          moment[cube.alphaMaximum][cube.redMinimum][cube.greenMaximum][\n            cube.blueMinimum\n          ] -\n          moment[cube.alphaMaximum][cube.redMinimum][cube.greenMinimum][\n            cube.blueMinimum\n          ] -\n          (-moment[cube.alphaMinimum][cube.redMaximum][cube.greenMaximum][\n            cube.blueMinimum\n          ] +\n            moment[cube.alphaMinimum][cube.redMaximum][cube.greenMinimum][\n              cube.blueMinimum\n            ] +\n            moment[cube.alphaMinimum][cube.redMinimum][cube.greenMaximum][\n              cube.blueMinimum\n            ] -\n            moment[cube.alphaMinimum][cube.redMinimum][cube.greenMinimum][\n              cube.blueMinimum\n            ])\n        );\n\n      default:\n        // TODO: why here is return 0, and in this._top there is no default at all (now it is throw error)?\n        return 0;\n    }\n  }\n\n  /**\n   * Calculates statistical variance for a given cube.\n   */\n  private _calculateVariance(cube: WuColorCube) {\n    const volumeRed = WuQuant._volume(cube, this._momentsRed);\n    const volumeGreen = WuQuant._volume(cube, this._momentsGreen);\n    const volumeBlue = WuQuant._volume(cube, this._momentsBlue);\n    const volumeAlpha = WuQuant._volume(cube, this._momentsAlpha);\n    const volumeMoment = WuQuant._volumeFloat(cube, this._moments);\n    const volumeWeight = WuQuant._volume(cube, this._weights);\n    const distance =\n      volumeRed * volumeRed +\n      volumeGreen * volumeGreen +\n      volumeBlue * volumeBlue +\n      volumeAlpha * volumeAlpha;\n\n    return volumeMoment - distance / volumeWeight;\n  }\n\n  /**\n   * Finds the optimal (maximal) position for the cut.\n   */\n  private _maximize(\n    cube: WuColorCube,\n    direction: number,\n    first: number,\n    last: number,\n    wholeRed: number,\n    wholeGreen: number,\n    wholeBlue: number,\n    wholeAlpha: number,\n    wholeWeight: number,\n  ) {\n    const bottomRed = WuQuant._bottom(cube, direction, this._momentsRed) | 0;\n    const bottomGreen =\n      WuQuant._bottom(cube, direction, this._momentsGreen) | 0;\n    const bottomBlue = WuQuant._bottom(cube, direction, this._momentsBlue) | 0;\n    const bottomAlpha =\n      WuQuant._bottom(cube, direction, this._momentsAlpha) | 0;\n    const bottomWeight = WuQuant._bottom(cube, direction, this._weights) | 0;\n\n    let result = 0.0;\n    let cutPosition = -1;\n\n    for (let position = first; position < last; ++position) {\n      // determines the cube cut at a certain position\n      let halfRed =\n        bottomRed + WuQuant._top(cube, direction, position, this._momentsRed);\n      let halfGreen =\n        bottomGreen +\n        WuQuant._top(cube, direction, position, this._momentsGreen);\n      let halfBlue =\n        bottomBlue + WuQuant._top(cube, direction, position, this._momentsBlue);\n      let halfAlpha =\n        bottomAlpha +\n        WuQuant._top(cube, direction, position, this._momentsAlpha);\n      let halfWeight =\n        bottomWeight + WuQuant._top(cube, direction, position, this._weights);\n\n      // the cube cannot be cut at bottom (this would lead to empty cube)\n      if (halfWeight !== 0) {\n        let halfDistance =\n          halfRed * halfRed +\n          halfGreen * halfGreen +\n          halfBlue * halfBlue +\n          halfAlpha * halfAlpha;\n        let temp = halfDistance / halfWeight;\n\n        halfRed = wholeRed - halfRed;\n        halfGreen = wholeGreen - halfGreen;\n        halfBlue = wholeBlue - halfBlue;\n        halfAlpha = wholeAlpha - halfAlpha;\n        halfWeight = wholeWeight - halfWeight;\n\n        if (halfWeight !== 0) {\n          halfDistance =\n            halfRed * halfRed +\n            halfGreen * halfGreen +\n            halfBlue * halfBlue +\n            halfAlpha * halfAlpha;\n          temp += halfDistance / halfWeight;\n\n          if (temp > result) {\n            result = temp;\n            cutPosition = position;\n          }\n        }\n      }\n    }\n\n    return { max: result, position: cutPosition };\n  }\n\n  // Cuts a cube with another one.\n  private _cut(first: WuColorCube, second: WuColorCube) {\n    let direction;\n\n    const wholeRed = WuQuant._volume(first, this._momentsRed);\n    const wholeGreen = WuQuant._volume(first, this._momentsGreen);\n    const wholeBlue = WuQuant._volume(first, this._momentsBlue);\n    const wholeAlpha = WuQuant._volume(first, this._momentsAlpha);\n    const wholeWeight = WuQuant._volume(first, this._weights);\n\n    const red = this._maximize(\n      first,\n      WuQuant._red,\n      first.redMinimum + 1,\n      first.redMaximum,\n      wholeRed,\n      wholeGreen,\n      wholeBlue,\n      wholeAlpha,\n      wholeWeight,\n    );\n    const green = this._maximize(\n      first,\n      WuQuant._green,\n      first.greenMinimum + 1,\n      first.greenMaximum,\n      wholeRed,\n      wholeGreen,\n      wholeBlue,\n      wholeAlpha,\n      wholeWeight,\n    );\n    const blue = this._maximize(\n      first,\n      WuQuant._blue,\n      first.blueMinimum + 1,\n      first.blueMaximum,\n      wholeRed,\n      wholeGreen,\n      wholeBlue,\n      wholeAlpha,\n      wholeWeight,\n    );\n    const alpha = this._maximize(\n      first,\n      WuQuant._alpha,\n      first.alphaMinimum + 1,\n      first.alphaMaximum,\n      wholeRed,\n      wholeGreen,\n      wholeBlue,\n      wholeAlpha,\n      wholeWeight,\n    );\n\n    if (\n      alpha.max >= red.max &&\n      alpha.max >= green.max &&\n      alpha.max >= blue.max\n    ) {\n      direction = WuQuant._alpha;\n\n      // cannot split empty cube\n      if (alpha.position < 0) return false;\n    } else if (\n      red.max >= alpha.max &&\n      red.max >= green.max &&\n      red.max >= blue.max\n    ) {\n      direction = WuQuant._red;\n    } else if (\n      green.max >= alpha.max &&\n      green.max >= red.max &&\n      green.max >= blue.max\n    ) {\n      direction = WuQuant._green;\n    } else {\n      direction = WuQuant._blue;\n    }\n\n    second.redMaximum = first.redMaximum;\n    second.greenMaximum = first.greenMaximum;\n    second.blueMaximum = first.blueMaximum;\n    second.alphaMaximum = first.alphaMaximum;\n\n    // cuts in a certain direction\n    // eslint-disable-next-line default-case\n    switch (direction) {\n      case WuQuant._red:\n        second.redMinimum = first.redMaximum = red.position;\n        second.greenMinimum = first.greenMinimum;\n        second.blueMinimum = first.blueMinimum;\n        second.alphaMinimum = first.alphaMinimum;\n        break;\n\n      case WuQuant._green:\n        second.greenMinimum = first.greenMaximum = green.position;\n        second.redMinimum = first.redMinimum;\n        second.blueMinimum = first.blueMinimum;\n        second.alphaMinimum = first.alphaMinimum;\n        break;\n\n      case WuQuant._blue:\n        second.blueMinimum = first.blueMaximum = blue.position;\n        second.redMinimum = first.redMinimum;\n        second.greenMinimum = first.greenMinimum;\n        second.alphaMinimum = first.alphaMinimum;\n        break;\n\n      case WuQuant._alpha:\n        second.alphaMinimum = first.alphaMaximum = alpha.position;\n        second.blueMinimum = first.blueMinimum;\n        second.redMinimum = first.redMinimum;\n        second.greenMinimum = first.greenMinimum;\n        break;\n    }\n\n    // determines the volumes after cut\n    first.volume =\n      (first.redMaximum - first.redMinimum) *\n      (first.greenMaximum - first.greenMinimum) *\n      (first.blueMaximum - first.blueMinimum) *\n      (first.alphaMaximum - first.alphaMinimum);\n    second.volume =\n      (second.redMaximum - second.redMinimum) *\n      (second.greenMaximum - second.greenMinimum) *\n      (second.blueMaximum - second.blueMinimum) *\n      (second.alphaMaximum - second.alphaMinimum);\n\n    // the cut was successful\n    return true;\n  }\n\n  private _initialize(colors: number) {\n    this._colors = colors;\n\n    // creates all the _cubes\n    this._cubes = [];\n\n    // initializes all the _cubes\n    for (let cubeIndex = 0; cubeIndex < colors; cubeIndex++) {\n      this._cubes[cubeIndex] = new WuColorCube();\n    }\n\n    // resets the reference minimums\n    this._cubes[0].redMinimum = 0;\n    this._cubes[0].greenMinimum = 0;\n    this._cubes[0].blueMinimum = 0;\n    this._cubes[0].alphaMinimum = 0;\n\n    // resets the reference maximums\n    this._cubes[0].redMaximum = this._maxSideIndex;\n    this._cubes[0].greenMaximum = this._maxSideIndex;\n    this._cubes[0].blueMaximum = this._maxSideIndex;\n    this._cubes[0].alphaMaximum = this._alphaMaxSideIndex;\n\n    this._weights = createArray4D(\n      this._alphaSideSize,\n      this._sideSize,\n      this._sideSize,\n      this._sideSize,\n    );\n    this._momentsRed = createArray4D(\n      this._alphaSideSize,\n      this._sideSize,\n      this._sideSize,\n      this._sideSize,\n    );\n    this._momentsGreen = createArray4D(\n      this._alphaSideSize,\n      this._sideSize,\n      this._sideSize,\n      this._sideSize,\n    );\n    this._momentsBlue = createArray4D(\n      this._alphaSideSize,\n      this._sideSize,\n      this._sideSize,\n      this._sideSize,\n    );\n    this._momentsAlpha = createArray4D(\n      this._alphaSideSize,\n      this._sideSize,\n      this._sideSize,\n      this._sideSize,\n    );\n    this._moments = createArray4D(\n      this._alphaSideSize,\n      this._sideSize,\n      this._sideSize,\n      this._sideSize,\n    );\n\n    this._table = [];\n    for (let tableIndex = 0; tableIndex < 256; ++tableIndex) {\n      this._table[tableIndex] = tableIndex * tableIndex;\n    }\n\n    this._pixels = [];\n  }\n\n  private _setQuality(significantBitsPerChannel = 5) {\n    this._significantBitsPerChannel = significantBitsPerChannel;\n    this._maxSideIndex = 1 << this._significantBitsPerChannel;\n    this._alphaMaxSideIndex = this._maxSideIndex;\n\n    this._sideSize = this._maxSideIndex + 1;\n    this._alphaSideSize = this._alphaMaxSideIndex + 1;\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * common.ts - part of Image Quantization Library\n */\nimport { PointContainer } from '../utils/pointContainer';\nimport { Palette } from '../utils/palette';\nimport { ImageQuantizerYieldValue } from './imageQuantizerYieldValue';\n\nexport abstract class AbstractImageQuantizer {\n  abstract quantize(\n    pointContainer: PointContainer,\n    palette: Palette,\n  ): IterableIterator<ImageQuantizerYieldValue>;\n\n  quantizeSync(pointContainer: PointContainer, palette: Palette) {\n    for (const value of this.quantize(pointContainer, palette)) {\n      if (value.pointContainer) {\n        return value.pointContainer;\n      }\n    }\n\n    throw new Error('unreachable');\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * nearestColor.ts - part of Image Quantization Library\n */\nimport { AbstractImageQuantizer } from './imageQuantizer';\nimport { AbstractDistanceCalculator } from '../distance/distanceCalculator';\nimport { PointContainer } from '../utils/pointContainer';\nimport { Palette } from '../utils/palette';\nimport { ImageQuantizerYieldValue } from './imageQuantizerYieldValue';\nimport { ProgressTracker } from '../utils/progressTracker';\n\nexport class NearestColor extends AbstractImageQuantizer {\n  private _distance: AbstractDistanceCalculator;\n\n  constructor(colorDistanceCalculator: AbstractDistanceCalculator) {\n    super();\n    this._distance = colorDistanceCalculator;\n  }\n\n  /**\n   * Mutates pointContainer\n   */\n  *quantize(\n    pointContainer: PointContainer,\n    palette: Palette,\n  ): IterableIterator<ImageQuantizerYieldValue> {\n    const pointArray = pointContainer.getPointArray();\n    const width = pointContainer.getWidth();\n    const height = pointContainer.getHeight();\n\n    const tracker = new ProgressTracker(height, 99);\n    for (let y = 0; y < height; y++) {\n      if (tracker.shouldNotify(y)) {\n        yield {\n          progress: tracker.progress,\n        };\n      }\n      for (let x = 0, idx = y * width; x < width; x++, idx++) {\n        // Image pixel\n        const point = pointArray[idx];\n        // Reduced pixel\n        point.from(palette.getNearestColor(this._distance, point));\n      }\n    }\n\n    yield {\n      pointContainer,\n      progress: 100,\n    };\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * ditherErrorDiffusionArray.ts - part of Image Quantization Library\n */\nimport { AbstractImageQuantizer } from './imageQuantizer';\nimport { AbstractDistanceCalculator } from '../distance/distanceCalculator';\nimport { PointContainer } from '../utils/pointContainer';\nimport { Palette } from '../utils/palette';\nimport { Point } from '../utils/point';\nimport { inRange0to255Rounded } from '../utils/arithmetic';\nimport { ImageQuantizerYieldValue } from './imageQuantizerYieldValue';\nimport { ProgressTracker } from '../utils/progressTracker';\n\n// TODO: is it the best name for this enum \"kernel\"?\nexport enum ErrorDiffusionArrayKernel {\n  FloydSteinberg = 0,\n  FalseFloydSteinberg,\n  Stucki,\n  Atkinson,\n  Jarvis,\n  Burkes,\n  Sierra,\n  TwoSierra,\n  SierraLite,\n}\n\n// http://www.tannerhelland.com/4660/dithering-eleven-algorithms-source-code/\nexport class ErrorDiffusionArray extends AbstractImageQuantizer {\n  private _minColorDistance: number;\n  private _serpentine: boolean;\n  private _kernel!: number[][];\n  /** true = GIMP, false = XNVIEW */\n  private _calculateErrorLikeGIMP: boolean;\n\n  private _distance: AbstractDistanceCalculator;\n\n  constructor(\n    colorDistanceCalculator: AbstractDistanceCalculator,\n    kernel: ErrorDiffusionArrayKernel,\n    serpentine = true,\n    minimumColorDistanceToDither = 0,\n    calculateErrorLikeGIMP = false,\n  ) {\n    super();\n    this._setKernel(kernel);\n\n    this._distance = colorDistanceCalculator;\n    this._minColorDistance = minimumColorDistanceToDither;\n    this._serpentine = serpentine;\n    this._calculateErrorLikeGIMP = calculateErrorLikeGIMP;\n  }\n\n  /**\n   * adapted from http://jsbin.com/iXofIji/2/edit by PAEz\n   * fixed version. it doesn't use image pixels as error storage, also it doesn't have 0.3 + 0.3 + 0.3 + 0.3 = 0 error\n   * Mutates pointContainer\n   */\n  *quantize(\n    pointContainer: PointContainer,\n    palette: Palette,\n  ): IterableIterator<ImageQuantizerYieldValue> {\n    const pointArray = pointContainer.getPointArray();\n    const originalPoint = new Point();\n    const width = pointContainer.getWidth();\n    const height = pointContainer.getHeight();\n    const errorLines: number[][][] = [];\n\n    let dir = 1;\n    let maxErrorLines = 1;\n\n    // initial error lines (number is taken from dithering kernel)\n    for (const kernel of this._kernel) {\n      const kernelErrorLines = kernel[2] + 1;\n      if (maxErrorLines < kernelErrorLines) maxErrorLines = kernelErrorLines;\n    }\n    for (let i = 0; i < maxErrorLines; i++) {\n      this._fillErrorLine((errorLines[i] = []), width);\n    }\n\n    const tracker = new ProgressTracker(height, 99);\n    for (let y = 0; y < height; y++) {\n      if (tracker.shouldNotify(y)) {\n        yield {\n          progress: tracker.progress,\n        };\n      }\n\n      // always serpentine\n      if (this._serpentine) dir *= -1;\n\n      const lni = y * width;\n      const xStart = dir === 1 ? 0 : width - 1;\n      const xEnd = dir === 1 ? width : -1;\n\n      // cyclic shift with erasing\n      this._fillErrorLine(errorLines[0], width);\n      // TODO: why it is needed to cast types here?\n      errorLines.push(errorLines.shift() as number[][]);\n\n      const errorLine = errorLines[0];\n      for (\n        let x = xStart, idx = lni + xStart;\n        x !== xEnd;\n        x += dir, idx += dir\n      ) {\n        // Image pixel\n        const point = pointArray[idx];\n        // originalPoint = new Utils.Point(),\n        const error = errorLine[x];\n\n        originalPoint.from(point);\n\n        const correctedPoint = Point.createByRGBA(\n          inRange0to255Rounded(point.r + error[0]),\n          inRange0to255Rounded(point.g + error[1]),\n          inRange0to255Rounded(point.b + error[2]),\n          inRange0to255Rounded(point.a + error[3]),\n        );\n\n        // Reduced pixel\n        const palettePoint = palette.getNearestColor(\n          this._distance,\n          correctedPoint,\n        );\n        point.from(palettePoint);\n\n        // dithering strength\n        if (this._minColorDistance) {\n          const dist = this._distance.calculateNormalized(point, palettePoint);\n          if (dist < this._minColorDistance) continue;\n        }\n\n        // Component distance\n        let er;\n        let eg;\n        let eb;\n        let ea;\n        if (this._calculateErrorLikeGIMP) {\n          er = correctedPoint.r - palettePoint.r;\n          eg = correctedPoint.g - palettePoint.g;\n          eb = correctedPoint.b - palettePoint.b;\n          ea = correctedPoint.a - palettePoint.a;\n        } else {\n          er = originalPoint.r - palettePoint.r;\n          eg = originalPoint.g - palettePoint.g;\n          eb = originalPoint.b - palettePoint.b;\n          ea = originalPoint.a - palettePoint.a;\n        }\n\n        const dStart = dir === 1 ? 0 : this._kernel.length - 1;\n        const dEnd = dir === 1 ? this._kernel.length : -1;\n\n        for (let i = dStart; i !== dEnd; i += dir) {\n          const x1 = this._kernel[i][1] * dir;\n          const y1 = this._kernel[i][2];\n\n          if (x1 + x >= 0 && x1 + x < width && y1 + y >= 0 && y1 + y < height) {\n            const d = this._kernel[i][0];\n            const e = errorLines[y1][x1 + x];\n\n            e[0] += er * d;\n            e[1] += eg * d;\n            e[2] += eb * d;\n            e[3] += ea * d;\n          }\n        }\n      }\n    }\n\n    yield {\n      pointContainer,\n      progress: 100,\n    };\n  }\n\n  private _fillErrorLine(errorLine: number[][], width: number) {\n    // shrink\n    if (errorLine.length > width) {\n      errorLine.length = width;\n    }\n\n    // reuse existing arrays\n    const l = errorLine.length;\n    for (let i = 0; i < l; i++) {\n      const error = errorLine[i];\n      error[0] = error[1] = error[2] = error[3] = 0;\n    }\n\n    // create missing arrays\n    for (let i = l; i < width; i++) {\n      errorLine[i] = [0.0, 0.0, 0.0, 0.0];\n    }\n  }\n\n  private _setKernel(kernel: ErrorDiffusionArrayKernel) {\n    switch (kernel) {\n      case ErrorDiffusionArrayKernel.FloydSteinberg:\n        this._kernel = [\n          [7 / 16, 1, 0],\n          [3 / 16, -1, 1],\n          [5 / 16, 0, 1],\n          [1 / 16, 1, 1],\n        ];\n        break;\n\n      case ErrorDiffusionArrayKernel.FalseFloydSteinberg:\n        this._kernel = [[3 / 8, 1, 0], [3 / 8, 0, 1], [2 / 8, 1, 1]];\n        break;\n\n      case ErrorDiffusionArrayKernel.Stucki:\n        this._kernel = [\n          [8 / 42, 1, 0],\n          [4 / 42, 2, 0],\n          [2 / 42, -2, 1],\n          [4 / 42, -1, 1],\n          [8 / 42, 0, 1],\n          [4 / 42, 1, 1],\n          [2 / 42, 2, 1],\n          [1 / 42, -2, 2],\n          [2 / 42, -1, 2],\n          [4 / 42, 0, 2],\n          [2 / 42, 1, 2],\n          [1 / 42, 2, 2],\n        ];\n        break;\n\n      case ErrorDiffusionArrayKernel.Atkinson:\n        this._kernel = [\n          [1 / 8, 1, 0],\n          [1 / 8, 2, 0],\n          [1 / 8, -1, 1],\n          [1 / 8, 0, 1],\n          [1 / 8, 1, 1],\n          [1 / 8, 0, 2],\n        ];\n        break;\n\n      case ErrorDiffusionArrayKernel.Jarvis:\n        this._kernel = [\n          // Jarvis, Judice, and Ninke / JJN?\n          [7 / 48, 1, 0],\n          [5 / 48, 2, 0],\n          [3 / 48, -2, 1],\n          [5 / 48, -1, 1],\n          [7 / 48, 0, 1],\n          [5 / 48, 1, 1],\n          [3 / 48, 2, 1],\n          [1 / 48, -2, 2],\n          [3 / 48, -1, 2],\n          [5 / 48, 0, 2],\n          [3 / 48, 1, 2],\n          [1 / 48, 2, 2],\n        ];\n        break;\n\n      case ErrorDiffusionArrayKernel.Burkes:\n        this._kernel = [\n          [8 / 32, 1, 0],\n          [4 / 32, 2, 0],\n          [2 / 32, -2, 1],\n          [4 / 32, -1, 1],\n          [8 / 32, 0, 1],\n          [4 / 32, 1, 1],\n          [2 / 32, 2, 1],\n        ];\n        break;\n\n      case ErrorDiffusionArrayKernel.Sierra:\n        this._kernel = [\n          [5 / 32, 1, 0],\n          [3 / 32, 2, 0],\n          [2 / 32, -2, 1],\n          [4 / 32, -1, 1],\n          [5 / 32, 0, 1],\n          [4 / 32, 1, 1],\n          [2 / 32, 2, 1],\n          [2 / 32, -1, 2],\n          [3 / 32, 0, 2],\n          [2 / 32, 1, 2],\n        ];\n        break;\n\n      case ErrorDiffusionArrayKernel.TwoSierra:\n        this._kernel = [\n          [4 / 16, 1, 0],\n          [3 / 16, 2, 0],\n          [1 / 16, -2, 1],\n          [2 / 16, -1, 1],\n          [3 / 16, 0, 1],\n          [2 / 16, 1, 1],\n          [1 / 16, 2, 1],\n        ];\n        break;\n\n      case ErrorDiffusionArrayKernel.SierraLite:\n        this._kernel = [[2 / 4, 1, 0], [1 / 4, -1, 1], [1 / 4, 0, 1]];\n        break;\n\n      default:\n        throw new Error(`ErrorDiffusionArray: unknown kernel = ${kernel}`);\n    }\n  }\n}\n","/**\n * @preserve\n * MIT License\n *\n * Copyright 2015-2018 Igor Bezkrovnyi\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n *\n * riemersma.ts - part of Image Quantization Library\n */\nimport { AbstractImageQuantizer } from './imageQuantizer';\nimport { hilbertCurve } from './spaceFillingCurves/hilbertCurve';\nimport { AbstractDistanceCalculator } from '../distance/distanceCalculator';\nimport { PointContainer } from '../utils/pointContainer';\nimport { Palette } from '../utils/palette';\nimport { Point } from '../utils/point';\nimport { inRange0to255Rounded } from '../utils/arithmetic';\n\nexport class ErrorDiffusionRiemersma extends AbstractImageQuantizer {\n  private _distance: AbstractDistanceCalculator;\n  private _weights: number[];\n  private _errorQueueSize: number;\n\n  constructor(\n    colorDistanceCalculator: AbstractDistanceCalculator,\n    errorQueueSize = 16,\n    errorPropagation = 1,\n  ) {\n    super();\n    this._distance = colorDistanceCalculator;\n    this._errorQueueSize = errorQueueSize;\n    this._weights = ErrorDiffusionRiemersma._createWeights(\n      errorPropagation,\n      errorQueueSize,\n    );\n  }\n\n  /**\n   * Mutates pointContainer\n   */\n  *quantize(pointContainer: PointContainer, palette: Palette) {\n    const pointArray = pointContainer.getPointArray();\n    const width = pointContainer.getWidth();\n    const height = pointContainer.getHeight();\n    const errorQueue: Array<{\n      r: number;\n      g: number;\n      b: number;\n      a: number;\n    }> = [];\n\n    let head = 0;\n\n    for (let i = 0; i < this._errorQueueSize; i++) {\n      errorQueue[i] = { r: 0, g: 0, b: 0, a: 0 };\n    }\n\n    yield* hilbertCurve(width, height, (x, y) => {\n      const p = pointArray[x + y * width];\n      let { r, g, b, a } = p;\n      for (let i = 0; i < this._errorQueueSize; i++) {\n        const weight = this._weights[i];\n        const e = errorQueue[(i + head) % this._errorQueueSize];\n\n        r += e.r * weight;\n        g += e.g * weight;\n        b += e.b * weight;\n        a += e.a * weight;\n      }\n\n      const correctedPoint = Point.createByRGBA(\n        inRange0to255Rounded(r),\n        inRange0to255Rounded(g),\n        inRange0to255Rounded(b),\n        inRange0to255Rounded(a),\n      );\n\n      const quantizedPoint = palette.getNearestColor(\n        this._distance,\n        correctedPoint,\n      );\n\n      // update head and calculate tail\n      head = (head + 1) % this._errorQueueSize;\n      const tail = (head + this._errorQueueSize - 1) % this._errorQueueSize;\n\n      // update error with new value\n      errorQueue[tail].r = p.r - quantizedPoint.r;\n      errorQueue[tail].g = p.g - quantizedPoint.g;\n      errorQueue[tail].b = p.b - quantizedPoint.b;\n      errorQueue[tail].a = p.a - quantizedPoint.a;\n\n      // update point\n      p.from(quantizedPoint);\n    });\n\n    yield {\n      pointContainer,\n      progress: 100,\n    };\n  }\n\n  private static _createWeights(\n    errorPropagation: number,\n    errorQueueSize: number,\n  ) {\n    const weights = [];\n\n    const multiplier = Math.exp(\n      Math.log(errorQueueSize) / (errorQueueSize - 1),\n    );\n    for (let i = 0, next = 1; i < errorQueueSize; i++) {\n      weights[i] = (((next + 0.5) | 0) / errorQueueSize) * errorPropagation;\n      next *= multiplier;\n    }\n\n    return weights;\n  }\n}\n","import { ProgressTracker } from '../../utils/progressTracker';\nimport { ImageQuantizerYieldValue } from '../imageQuantizerYieldValue';\n\nenum Direction {\n  NONE = 0,\n  UP,\n  LEFT,\n  RIGHT,\n  DOWN,\n}\n\ninterface Data {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  level: number;\n  index: number;\n  tracker: ProgressTracker;\n  callback(x: number, y: number): void;\n}\n\nexport function* hilbertCurve(\n  width: number,\n  height: number,\n  callback: (x: number, y: number) => void,\n) {\n  const maxBound = Math.max(width, height);\n  const level = Math.floor(Math.log(maxBound) / Math.log(2) + 1);\n  const tracker = new ProgressTracker(width * height, 99);\n  const data = {\n    width,\n    height,\n    level,\n    callback,\n    tracker,\n    index: 0,\n    x: 0,\n    y: 0,\n  };\n  yield* walkHilbert(data, Direction.UP);\n  visit(data, Direction.NONE);\n}\n\nfunction* walkHilbert(\n  data: Data,\n  direction: Direction,\n): IterableIterator<ImageQuantizerYieldValue> {\n  if (data.level < 1) return;\n\n  if (data.tracker.shouldNotify(data.index)) {\n    yield { progress: data.tracker.progress };\n  }\n  data.level--;\n  switch (direction) {\n    case Direction.LEFT:\n      yield* walkHilbert(data, Direction.UP);\n      visit(data, Direction.RIGHT);\n      yield* walkHilbert(data, Direction.LEFT);\n      visit(data, Direction.DOWN);\n      yield* walkHilbert(data, Direction.LEFT);\n      visit(data, Direction.LEFT);\n      yield* walkHilbert(data, Direction.DOWN);\n      break;\n\n    case Direction.RIGHT:\n      yield* walkHilbert(data, Direction.DOWN);\n      visit(data, Direction.LEFT);\n      yield* walkHilbert(data, Direction.RIGHT);\n      visit(data, Direction.UP);\n      yield* walkHilbert(data, Direction.RIGHT);\n      visit(data, Direction.RIGHT);\n      yield* walkHilbert(data, Direction.UP);\n      break;\n\n    case Direction.UP:\n      yield* walkHilbert(data, Direction.LEFT);\n      visit(data, Direction.DOWN);\n      yield* walkHilbert(data, Direction.UP);\n      visit(data, Direction.RIGHT);\n      yield* walkHilbert(data, Direction.UP);\n      visit(data, Direction.UP);\n      yield* walkHilbert(data, Direction.RIGHT);\n      break;\n\n    case Direction.DOWN:\n      yield* walkHilbert(data, Direction.RIGHT);\n      visit(data, Direction.UP);\n      yield* walkHilbert(data, Direction.DOWN);\n      visit(data, Direction.LEFT);\n      yield* walkHilbert(data, Direction.DOWN);\n      visit(data, Direction.DOWN);\n      yield* walkHilbert(data, Direction.LEFT);\n      break;\n\n    default:\n      break;\n  }\n  data.level++;\n}\n\nfunction visit(data: Data, direction: Direction) {\n  if (\n    data.x >= 0 &&\n    data.x < data.width &&\n    data.y >= 0 &&\n    data.y < data.height\n  ) {\n    data.callback(data.x, data.y);\n    data.index++;\n  }\n  // eslint-disable-next-line default-case\n  switch (direction) {\n    case Direction.LEFT:\n      data.x--;\n      break;\n    case Direction.RIGHT:\n      data.x++;\n      break;\n    case Direction.UP:\n      data.y--;\n      break;\n    case Direction.DOWN:\n      data.y++;\n      break;\n  }\n}\n","/**\n * @preserve\n * Copyright 2015-2018 Igor Bezkrovnyi\n * All rights reserved. (MIT Licensed)\n *\n * helper.ts - part of Image Quantization Library\n */\nimport 'setimmediate';\nimport * as distance from './distance';\nimport * as image from './image';\nimport * as palette from './palette';\nimport { AbstractDistanceCalculator } from './distance/distanceCalculator';\nimport { PointContainer } from './utils/pointContainer';\nimport { Palette } from './utils/palette';\n\nexport type ColorDistanceFormula =\n  | 'cie94-textiles'\n  | 'cie94-graphic-arts'\n  | 'ciede2000'\n  | 'color-metric'\n  | 'euclidean'\n  | 'euclidean-bt709-noalpha'\n  | 'euclidean-bt709'\n  | 'manhattan'\n  | 'manhattan-bt709'\n  | 'manhattan-nommyde'\n  | 'pngquant';\n\nexport type PaletteQuantization =\n  | 'neuquant'\n  | 'neuquant-float'\n  | 'rgbquant'\n  | 'wuquant';\n\nexport type ImageQuantization =\n  | 'nearest'\n  | 'riemersma'\n  | 'floyd-steinberg'\n  | 'false-floyd-steinberg'\n  | 'stucki'\n  | 'atkinson'\n  | 'jarvis'\n  | 'burkes'\n  | 'sierra'\n  | 'two-sierra'\n  | 'sierra-lite';\n\nexport interface ProgressOptions {\n  onProgress?: (progress: number) => void;\n}\n\nexport interface ApplyPaletteOptions {\n  colorDistanceFormula?: ColorDistanceFormula;\n  imageQuantization?: ImageQuantization;\n}\n\nexport interface BuildPaletteOptions {\n  colorDistanceFormula?: ColorDistanceFormula;\n  paletteQuantization?: PaletteQuantization;\n  colors?: number;\n}\n\nexport function buildPaletteSync(\n  images: PointContainer[],\n  {\n    colorDistanceFormula,\n    paletteQuantization,\n    colors,\n  }: BuildPaletteOptions = {},\n) {\n  const distanceCalculator = colorDistanceFormulaToColorDistance(\n    colorDistanceFormula,\n  );\n  const paletteQuantizer = paletteQuantizationToPaletteQuantizer(\n    distanceCalculator,\n    paletteQuantization,\n    colors,\n  );\n  images.forEach(image => paletteQuantizer.sample(image));\n  return paletteQuantizer.quantizeSync();\n}\n\nexport async function buildPalette(\n  images: PointContainer[],\n  {\n    colorDistanceFormula,\n    paletteQuantization,\n    colors,\n    onProgress,\n  }: BuildPaletteOptions & ProgressOptions = {},\n) {\n  return new Promise<Palette>((resolve, reject) => {\n    const distanceCalculator = colorDistanceFormulaToColorDistance(\n      colorDistanceFormula,\n    );\n    const paletteQuantizer = paletteQuantizationToPaletteQuantizer(\n      distanceCalculator,\n      paletteQuantization,\n      colors,\n    );\n    images.forEach(image => paletteQuantizer.sample(image));\n\n    let palette: Palette;\n    let timerId: NodeJS.Immediate;\n    const iterator = paletteQuantizer.quantize();\n    const next = () => {\n      try {\n        const result = iterator.next();\n        if (result.done) {\n          resolve(palette);\n        } else {\n          if (result.value.palette) palette = result.value.palette;\n          if (onProgress) onProgress(result.value.progress);\n          timerId = setImmediate(next);\n        }\n      } catch (error) {\n        clearImmediate(timerId);\n        reject(error);\n      }\n    };\n    timerId = setImmediate(next);\n  });\n}\n\nexport function applyPaletteSync(\n  image: PointContainer,\n  palette: Palette,\n  { colorDistanceFormula, imageQuantization }: ApplyPaletteOptions = {},\n) {\n  const distanceCalculator = colorDistanceFormulaToColorDistance(\n    colorDistanceFormula,\n  );\n  const imageQuantizer = imageQuantizationToImageQuantizer(\n    distanceCalculator,\n    imageQuantization,\n  );\n  return imageQuantizer.quantizeSync(image, palette);\n}\n\nexport async function applyPalette(\n  image: PointContainer,\n  palette: Palette,\n  {\n    colorDistanceFormula,\n    imageQuantization,\n    onProgress,\n  }: ApplyPaletteOptions & ProgressOptions = {},\n) {\n  return new Promise<PointContainer>((resolve, reject) => {\n    const distanceCalculator = colorDistanceFormulaToColorDistance(\n      colorDistanceFormula,\n    );\n    const imageQuantizer = imageQuantizationToImageQuantizer(\n      distanceCalculator,\n      imageQuantization,\n    );\n\n    let outPointContainer: PointContainer;\n    let timerId: NodeJS.Immediate;\n    const iterator = imageQuantizer.quantize(image, palette);\n    const next = () => {\n      try {\n        const result = iterator.next();\n        if (result.done) {\n          resolve(outPointContainer);\n        } else {\n          if (result.value.pointContainer) {\n            outPointContainer = result.value.pointContainer;\n          }\n          if (onProgress) onProgress(result.value.progress);\n          timerId = setImmediate(next);\n        }\n      } catch (error) {\n        clearImmediate(timerId);\n        reject(error);\n      }\n    };\n    timerId = setImmediate(next);\n  });\n}\n\nfunction colorDistanceFormulaToColorDistance(\n  colorDistanceFormula: ColorDistanceFormula = 'euclidean-bt709',\n) {\n  switch (colorDistanceFormula) {\n    case 'cie94-graphic-arts':\n      return new distance.CIE94GraphicArts();\n    case 'cie94-textiles':\n      return new distance.CIE94Textiles();\n    case 'ciede2000':\n      return new distance.CIEDE2000();\n    case 'color-metric':\n      return new distance.CMetric();\n    case 'euclidean':\n      return new distance.Euclidean();\n    case 'euclidean-bt709':\n      return new distance.EuclideanBT709();\n    case 'euclidean-bt709-noalpha':\n      return new distance.EuclideanBT709NoAlpha();\n    case 'manhattan':\n      return new distance.Manhattan();\n    case 'manhattan-bt709':\n      return new distance.ManhattanBT709();\n    case 'manhattan-nommyde':\n      return new distance.ManhattanNommyde();\n    case 'pngquant':\n      return new distance.PNGQuant();\n    default:\n      throw new Error(`Unknown colorDistanceFormula ${colorDistanceFormula}`);\n  }\n}\n\nfunction imageQuantizationToImageQuantizer(\n  distanceCalculator: AbstractDistanceCalculator,\n  imageQuantization: ImageQuantization = 'floyd-steinberg',\n) {\n  switch (imageQuantization) {\n    case 'nearest':\n      return new image.NearestColor(distanceCalculator);\n    case 'riemersma':\n      return new image.ErrorDiffusionRiemersma(distanceCalculator);\n    case 'floyd-steinberg':\n      return new image.ErrorDiffusionArray(\n        distanceCalculator,\n        image.ErrorDiffusionArrayKernel.FloydSteinberg,\n      );\n    case 'false-floyd-steinberg':\n      return new image.ErrorDiffusionArray(\n        distanceCalculator,\n        image.ErrorDiffusionArrayKernel.FalseFloydSteinberg,\n      );\n    case 'stucki':\n      return new image.ErrorDiffusionArray(\n        distanceCalculator,\n        image.ErrorDiffusionArrayKernel.Stucki,\n      );\n    case 'atkinson':\n      return new image.ErrorDiffusionArray(\n        distanceCalculator,\n        image.ErrorDiffusionArrayKernel.Atkinson,\n      );\n    case 'jarvis':\n      return new image.ErrorDiffusionArray(\n        distanceCalculator,\n        image.ErrorDiffusionArrayKernel.Jarvis,\n      );\n    case 'burkes':\n      return new image.ErrorDiffusionArray(\n        distanceCalculator,\n        image.ErrorDiffusionArrayKernel.Burkes,\n      );\n    case 'sierra':\n      return new image.ErrorDiffusionArray(\n        distanceCalculator,\n        image.ErrorDiffusionArrayKernel.Sierra,\n      );\n    case 'two-sierra':\n      return new image.ErrorDiffusionArray(\n        distanceCalculator,\n        image.ErrorDiffusionArrayKernel.TwoSierra,\n      );\n    case 'sierra-lite':\n      return new image.ErrorDiffusionArray(\n        distanceCalculator,\n        image.ErrorDiffusionArrayKernel.SierraLite,\n      );\n    default:\n      throw new Error(`Unknown imageQuantization ${imageQuantization}`);\n  }\n}\n\nfunction paletteQuantizationToPaletteQuantizer(\n  distanceCalculator: AbstractDistanceCalculator,\n  paletteQuantization: PaletteQuantization = 'wuquant',\n  colors = 256,\n) {\n  switch (paletteQuantization) {\n    case 'neuquant':\n      return new palette.NeuQuant(distanceCalculator, colors);\n    case 'rgbquant':\n      return new palette.RGBQuant(distanceCalculator, colors);\n    case 'wuquant':\n      return new palette.WuQuant(distanceCalculator, colors);\n    case 'neuquant-float':\n      return new palette.NeuQuantFloat(distanceCalculator, colors);\n    default:\n      throw new Error(`Unknown paletteQuantization ${paletteQuantization}`);\n  }\n}\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","\n/**\n * Rounds equivalently to PHP_ROUND_HALF_UP in PHP.\n * @param n input number\n * @returns rounded result\n */\nexport function round_half_up(n: number): number {\n    if(n < 0) {\n        /* Ugly hack that makes sure -1.5 rounds to -2 */\n        n -= 0.0000001;\n    }\n    return Math.round(n);\n}\n\nexport function str_pad(str: string, n: number, padding: string, left?: boolean): string {\n    if(left) {\n        return str.padStart(n, padding);\n    } else\n        return str.padEnd(n, padding);\n}\n\nexport function dechex(n: number): string {\n    return n.toString(16);\n}","// Currently in sync with Node.js lib/assert.js\n// https://github.com/nodejs/node/commit/2a51ae424a513ec9a6aa3466baa0cc1d55dd4f3b\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _require = require('./internal/errors'),\n    _require$codes = _require.codes,\n    ERR_AMBIGUOUS_ARGUMENT = _require$codes.ERR_AMBIGUOUS_ARGUMENT,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_INVALID_ARG_VALUE = _require$codes.ERR_INVALID_ARG_VALUE,\n    ERR_INVALID_RETURN_VALUE = _require$codes.ERR_INVALID_RETURN_VALUE,\n    ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS;\n\nvar AssertionError = require('./internal/assert/assertion_error');\n\nvar _require2 = require('util/'),\n    inspect = _require2.inspect;\n\nvar _require$types = require('util/').types,\n    isPromise = _require$types.isPromise,\n    isRegExp = _require$types.isRegExp;\n\nvar objectAssign = Object.assign ? Object.assign : require('es6-object-assign').assign;\nvar objectIs = Object.is ? Object.is : require('object-is');\nvar errorCache = new Map();\nvar isDeepEqual;\nvar isDeepStrictEqual;\nvar parseExpressionAt;\nvar findNodeAround;\nvar decoder;\n\nfunction lazyLoadComparison() {\n  var comparison = require('./internal/util/comparisons');\n\n  isDeepEqual = comparison.isDeepEqual;\n  isDeepStrictEqual = comparison.isDeepStrictEqual;\n} // Escape control characters but not \\n and \\t to keep the line breaks and\n// indentation intact.\n// eslint-disable-next-line no-control-regex\n\n\nvar escapeSequencesRegExp = /[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f]/g;\nvar meta = [\"\\\\u0000\", \"\\\\u0001\", \"\\\\u0002\", \"\\\\u0003\", \"\\\\u0004\", \"\\\\u0005\", \"\\\\u0006\", \"\\\\u0007\", '\\\\b', '', '', \"\\\\u000b\", '\\\\f', '', \"\\\\u000e\", \"\\\\u000f\", \"\\\\u0010\", \"\\\\u0011\", \"\\\\u0012\", \"\\\\u0013\", \"\\\\u0014\", \"\\\\u0015\", \"\\\\u0016\", \"\\\\u0017\", \"\\\\u0018\", \"\\\\u0019\", \"\\\\u001a\", \"\\\\u001b\", \"\\\\u001c\", \"\\\\u001d\", \"\\\\u001e\", \"\\\\u001f\"];\n\nvar escapeFn = function escapeFn(str) {\n  return meta[str.charCodeAt(0)];\n};\n\nvar warned = false; // The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\nvar NO_EXCEPTION_SENTINEL = {}; // All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided. All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction innerFail(obj) {\n  if (obj.message instanceof Error) throw obj.message;\n  throw new AssertionError(obj);\n}\n\nfunction fail(actual, expected, message, operator, stackStartFn) {\n  var argsLen = arguments.length;\n  var internalMessage;\n\n  if (argsLen === 0) {\n    internalMessage = 'Failed';\n  } else if (argsLen === 1) {\n    message = actual;\n    actual = undefined;\n  } else {\n    if (warned === false) {\n      warned = true;\n      var warn = process.emitWarning ? process.emitWarning : console.warn.bind(console);\n      warn('assert.fail() with more than one argument is deprecated. ' + 'Please use assert.strictEqual() instead or only pass a message.', 'DeprecationWarning', 'DEP0094');\n    }\n\n    if (argsLen === 2) operator = '!=';\n  }\n\n  if (message instanceof Error) throw message;\n  var errArgs = {\n    actual: actual,\n    expected: expected,\n    operator: operator === undefined ? 'fail' : operator,\n    stackStartFn: stackStartFn || fail\n  };\n\n  if (message !== undefined) {\n    errArgs.message = message;\n  }\n\n  var err = new AssertionError(errArgs);\n\n  if (internalMessage) {\n    err.message = internalMessage;\n    err.generatedMessage = true;\n  }\n\n  throw err;\n}\n\nassert.fail = fail; // The AssertionError is defined in internal/error.\n\nassert.AssertionError = AssertionError;\n\nfunction innerOk(fn, argLen, value, message) {\n  if (!value) {\n    var generatedMessage = false;\n\n    if (argLen === 0) {\n      generatedMessage = true;\n      message = 'No value argument passed to `assert.ok()`';\n    } else if (message instanceof Error) {\n      throw message;\n    }\n\n    var err = new AssertionError({\n      actual: value,\n      expected: true,\n      message: message,\n      operator: '==',\n      stackStartFn: fn\n    });\n    err.generatedMessage = generatedMessage;\n    throw err;\n  }\n} // Pure assertion tests whether a value is truthy, as determined\n// by !!value.\n\n\nfunction ok() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  innerOk.apply(void 0, [ok, args.length].concat(args));\n}\n\nassert.ok = ok; // The equality assertion tests shallow, coercive equality with ==.\n\n/* eslint-disable no-restricted-properties */\n\nassert.equal = function equal(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  } // eslint-disable-next-line eqeqeq\n\n\n  if (actual != expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '==',\n      stackStartFn: equal\n    });\n  }\n}; // The non-equality assertion tests for whether two objects are not\n// equal with !=.\n\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  } // eslint-disable-next-line eqeqeq\n\n\n  if (actual == expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '!=',\n      stackStartFn: notEqual\n    });\n  }\n}; // The equivalence assertion tests a deep equality relation.\n\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (isDeepEqual === undefined) lazyLoadComparison();\n\n  if (!isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepEqual',\n      stackStartFn: deepEqual\n    });\n  }\n}; // The non-equivalence assertion tests for any deep inequality.\n\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (isDeepEqual === undefined) lazyLoadComparison();\n\n  if (isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepEqual',\n      stackStartFn: notDeepEqual\n    });\n  }\n};\n/* eslint-enable */\n\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (isDeepEqual === undefined) lazyLoadComparison();\n\n  if (!isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepStrictEqual',\n      stackStartFn: deepStrictEqual\n    });\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\n\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (isDeepEqual === undefined) lazyLoadComparison();\n\n  if (isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepStrictEqual',\n      stackStartFn: notDeepStrictEqual\n    });\n  }\n}\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (!objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'strictEqual',\n      stackStartFn: strictEqual\n    });\n  }\n};\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n\n  if (objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notStrictEqual',\n      stackStartFn: notStrictEqual\n    });\n  }\n};\n\nvar Comparison = function Comparison(obj, keys, actual) {\n  var _this = this;\n\n  _classCallCheck(this, Comparison);\n\n  keys.forEach(function (key) {\n    if (key in obj) {\n      if (actual !== undefined && typeof actual[key] === 'string' && isRegExp(obj[key]) && obj[key].test(actual[key])) {\n        _this[key] = actual[key];\n      } else {\n        _this[key] = obj[key];\n      }\n    }\n  });\n};\n\nfunction compareExceptionKey(actual, expected, key, message, keys, fn) {\n  if (!(key in actual) || !isDeepStrictEqual(actual[key], expected[key])) {\n    if (!message) {\n      // Create placeholder objects to create a nice output.\n      var a = new Comparison(actual, keys);\n      var b = new Comparison(expected, keys, actual);\n      var err = new AssertionError({\n        actual: a,\n        expected: b,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.actual = actual;\n      err.expected = expected;\n      err.operator = fn.name;\n      throw err;\n    }\n\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: fn.name,\n      stackStartFn: fn\n    });\n  }\n}\n\nfunction expectedException(actual, expected, msg, fn) {\n  if (typeof expected !== 'function') {\n    if (isRegExp(expected)) return expected.test(actual); // assert.doesNotThrow does not accept objects.\n\n    if (arguments.length === 2) {\n      throw new ERR_INVALID_ARG_TYPE('expected', ['Function', 'RegExp'], expected);\n    } // Handle primitives properly.\n\n\n    if (_typeof(actual) !== 'object' || actual === null) {\n      var err = new AssertionError({\n        actual: actual,\n        expected: expected,\n        message: msg,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.operator = fn.name;\n      throw err;\n    }\n\n    var keys = Object.keys(expected); // Special handle errors to make sure the name and the message are compared\n    // as well.\n\n    if (expected instanceof Error) {\n      keys.push('name', 'message');\n    } else if (keys.length === 0) {\n      throw new ERR_INVALID_ARG_VALUE('error', expected, 'may not be an empty object');\n    }\n\n    if (isDeepEqual === undefined) lazyLoadComparison();\n    keys.forEach(function (key) {\n      if (typeof actual[key] === 'string' && isRegExp(expected[key]) && expected[key].test(actual[key])) {\n        return;\n      }\n\n      compareExceptionKey(actual, expected, key, msg, keys, fn);\n    });\n    return true;\n  } // Guard instanceof against arrow functions as they don't have a prototype.\n\n\n  if (expected.prototype !== undefined && actual instanceof expected) {\n    return true;\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction getActual(fn) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', 'Function', fn);\n  }\n\n  try {\n    fn();\n  } catch (e) {\n    return e;\n  }\n\n  return NO_EXCEPTION_SENTINEL;\n}\n\nfunction checkIsPromise(obj) {\n  // Accept native ES6 promises and promises that are implemented in a similar\n  // way. Do not accept thenables that use a function as `obj` and that have no\n  // `catch` handler.\n  // TODO: thenables are checked up until they have the correct methods,\n  // but according to documentation, the `then` method should receive\n  // the `fulfill` and `reject` arguments as well or it may be never resolved.\n  return isPromise(obj) || obj !== null && _typeof(obj) === 'object' && typeof obj.then === 'function' && typeof obj.catch === 'function';\n}\n\nfunction waitForActual(promiseFn) {\n  return Promise.resolve().then(function () {\n    var resultPromise;\n\n    if (typeof promiseFn === 'function') {\n      // Return a rejected promise if `promiseFn` throws synchronously.\n      resultPromise = promiseFn(); // Fail in case no promise is returned.\n\n      if (!checkIsPromise(resultPromise)) {\n        throw new ERR_INVALID_RETURN_VALUE('instance of Promise', 'promiseFn', resultPromise);\n      }\n    } else if (checkIsPromise(promiseFn)) {\n      resultPromise = promiseFn;\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('promiseFn', ['Function', 'Promise'], promiseFn);\n    }\n\n    return Promise.resolve().then(function () {\n      return resultPromise;\n    }).then(function () {\n      return NO_EXCEPTION_SENTINEL;\n    }).catch(function (e) {\n      return e;\n    });\n  });\n}\n\nfunction expectsError(stackStartFn, actual, error, message) {\n  if (typeof error === 'string') {\n    if (arguments.length === 4) {\n      throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n    }\n\n    if (_typeof(actual) === 'object' && actual !== null) {\n      if (actual.message === error) {\n        throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error message \\\"\".concat(actual.message, \"\\\" is identical to the message.\"));\n      }\n    } else if (actual === error) {\n      throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error \\\"\".concat(actual, \"\\\" is identical to the message.\"));\n    }\n\n    message = error;\n    error = undefined;\n  } else if (error != null && _typeof(error) !== 'object' && typeof error !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n  }\n\n  if (actual === NO_EXCEPTION_SENTINEL) {\n    var details = '';\n\n    if (error && error.name) {\n      details += \" (\".concat(error.name, \")\");\n    }\n\n    details += message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'rejects' ? 'rejection' : 'exception';\n    innerFail({\n      actual: undefined,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Missing expected \".concat(fnType).concat(details),\n      stackStartFn: stackStartFn\n    });\n  }\n\n  if (error && !expectedException(actual, error, message, stackStartFn)) {\n    throw actual;\n  }\n}\n\nfunction expectsNoError(stackStartFn, actual, error, message) {\n  if (actual === NO_EXCEPTION_SENTINEL) return;\n\n  if (typeof error === 'string') {\n    message = error;\n    error = undefined;\n  }\n\n  if (!error || expectedException(actual, error)) {\n    var details = message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'doesNotReject' ? 'rejection' : 'exception';\n    innerFail({\n      actual: actual,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Got unwanted \".concat(fnType).concat(details, \"\\n\") + \"Actual message: \\\"\".concat(actual && actual.message, \"\\\"\"),\n      stackStartFn: stackStartFn\n    });\n  }\n\n  throw actual;\n}\n\nassert.throws = function throws(promiseFn) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  expectsError.apply(void 0, [throws, getActual(promiseFn)].concat(args));\n};\n\nassert.rejects = function rejects(promiseFn) {\n  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n\n  return waitForActual(promiseFn).then(function (result) {\n    return expectsError.apply(void 0, [rejects, result].concat(args));\n  });\n};\n\nassert.doesNotThrow = function doesNotThrow(fn) {\n  for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n\n  expectsNoError.apply(void 0, [doesNotThrow, getActual(fn)].concat(args));\n};\n\nassert.doesNotReject = function doesNotReject(fn) {\n  for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n\n  return waitForActual(fn).then(function (result) {\n    return expectsNoError.apply(void 0, [doesNotReject, result].concat(args));\n  });\n};\n\nassert.ifError = function ifError(err) {\n  if (err !== null && err !== undefined) {\n    var message = 'ifError got unwanted exception: ';\n\n    if (_typeof(err) === 'object' && typeof err.message === 'string') {\n      if (err.message.length === 0 && err.constructor) {\n        message += err.constructor.name;\n      } else {\n        message += err.message;\n      }\n    } else {\n      message += inspect(err);\n    }\n\n    var newErr = new AssertionError({\n      actual: err,\n      expected: null,\n      operator: 'ifError',\n      message: message,\n      stackStartFn: ifError\n    }); // Make sure we actually have a stack trace!\n\n    var origStack = err.stack;\n\n    if (typeof origStack === 'string') {\n      // This will remove any duplicated frames from the error frames taken\n      // from within `ifError` and add the original error frames to the newly\n      // created ones.\n      var tmp2 = origStack.split('\\n');\n      tmp2.shift(); // Filter all frames existing in err.stack.\n\n      var tmp1 = newErr.stack.split('\\n');\n\n      for (var i = 0; i < tmp2.length; i++) {\n        // Find the first occurrence of the frame.\n        var pos = tmp1.indexOf(tmp2[i]);\n\n        if (pos !== -1) {\n          // Only keep new frames.\n          tmp1 = tmp1.slice(0, pos);\n          break;\n        }\n      }\n\n      newErr.stack = \"\".concat(tmp1.join('\\n'), \"\\n\").concat(tmp2.join('\\n'));\n    }\n\n    throw newErr;\n  }\n}; // Expose a strict only variant of assert\n\n\nfunction strict() {\n  for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    args[_key6] = arguments[_key6];\n  }\n\n  innerOk.apply(void 0, [strict, args.length].concat(args));\n}\n\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;","// Currently in sync with Node.js lib/internal/errors.js\n// https://github.com/nodejs/node/commit/3b044962c48fe313905877a96b5d0894a5404f6f\n\n/* eslint node-core/documented-errors: \"error\" */\n\n/* eslint node-core/alphabetize-errors: \"error\" */\n\n/* eslint node-core/prefer-util-format-errors: \"error\" */\n'use strict'; // The whole point behind this internal module is to allow Node.js to no\n// longer be forced to treat every error message change as a semver-major\n// change. The NodeError classes here all expose a `code` property whose\n// value statically and permanently identifies the error. While the error\n// message may change, the code should not.\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar codes = {}; // Lazy loaded\n\nvar assert;\nvar util;\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inherits(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      var _this;\n\n      _classCallCheck(this, NodeError);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(NodeError).call(this, getMessage(arg1, arg2, arg3)));\n      _this.code = code;\n      return _this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_AMBIGUOUS_ARGUMENT', 'The \"%s\" argument is ambiguous. %s', TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  if (assert === undefined) assert = require('../assert');\n  assert(typeof name === 'string', \"'name' must be a string\"); // determiner: 'must be' or 'must not be'\n\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } // TODO(BridgeAR): Improve the output by showing `null` and similar.\n\n\n  msg += \". Received type \".concat(_typeof(actual));\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_VALUE', function (name, value) {\n  var reason = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'is invalid';\n  if (util === undefined) util = require('util/');\n  var inspected = util.inspect(value);\n\n  if (inspected.length > 128) {\n    inspected = \"\".concat(inspected.slice(0, 128), \"...\");\n  }\n\n  return \"The argument '\".concat(name, \"' \").concat(reason, \". Received \").concat(inspected);\n}, TypeError, RangeError);\ncreateErrorType('ERR_INVALID_RETURN_VALUE', function (input, name, value) {\n  var type;\n\n  if (value && value.constructor && value.constructor.name) {\n    type = \"instance of \".concat(value.constructor.name);\n  } else {\n    type = \"type \".concat(_typeof(value));\n  }\n\n  return \"Expected \".concat(input, \" to be returned from the \\\"\").concat(name, \"\\\"\") + \" function but got \".concat(type, \".\");\n}, TypeError);\ncreateErrorType('ERR_MISSING_ARGS', function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (assert === undefined) assert = require('../assert');\n  assert(args.length > 0, 'At least one arg needs to be specified');\n  var msg = 'The ';\n  var len = args.length;\n  args = args.map(function (a) {\n    return \"\\\"\".concat(a, \"\\\"\");\n  });\n\n  switch (len) {\n    case 1:\n      msg += \"\".concat(args[0], \" argument\");\n      break;\n\n    case 2:\n      msg += \"\".concat(args[0], \" and \").concat(args[1], \" arguments\");\n      break;\n\n    default:\n      msg += args.slice(0, len - 1).join(', ');\n      msg += \", and \".concat(args[len - 1], \" arguments\");\n      break;\n  }\n\n  return \"\".concat(msg, \" must be specified\");\n}, TypeError);\nmodule.exports.codes = codes;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnvRegex = /^$/;\n\nif (process.env.NODE_DEBUG) {\n  var debugEnv = process.env.NODE_DEBUG;\n  debugEnv = debugEnv.replace(/[|\\\\{}()[\\]^$+?.]/g, '\\\\$&')\n    .replace(/\\*/g, '.*')\n    .replace(/,/g, '$|^')\n    .toUpperCase();\n  debugEnvRegex = new RegExp('^' + debugEnv + '$', 'i');\n}\nexports.debuglog = function(set) {\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (debugEnvRegex.test(set)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexports.types = require('./support/types');\n\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\nexports.types.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\nexports.types.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\nexports.types.isNativeError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb.bind(null, null, ret)) },\n            function(rej) { process.nextTick(callbackifyOnRejected.bind(null, rej, cb)) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","// Currently in sync with Node.js lib/internal/util/types.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nvar isArgumentsObject = require('is-arguments');\nvar isGeneratorFunction = require('is-generator-function');\nvar whichTypedArray = require('which-typed-array');\nvar isTypedArray = require('is-typed-array');\n\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\n\nvar BigIntSupported = typeof BigInt !== 'undefined';\nvar SymbolSupported = typeof Symbol !== 'undefined';\n\nvar ObjectToString = uncurryThis(Object.prototype.toString);\n\nvar numberValue = uncurryThis(Number.prototype.valueOf);\nvar stringValue = uncurryThis(String.prototype.valueOf);\nvar booleanValue = uncurryThis(Boolean.prototype.valueOf);\n\nif (BigIntSupported) {\n  var bigIntValue = uncurryThis(BigInt.prototype.valueOf);\n}\n\nif (SymbolSupported) {\n  var symbolValue = uncurryThis(Symbol.prototype.valueOf);\n}\n\nfunction checkBoxedPrimitive(value, prototypeValueOf) {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  try {\n    prototypeValueOf(value);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n\nexports.isArgumentsObject = isArgumentsObject;\nexports.isGeneratorFunction = isGeneratorFunction;\nexports.isTypedArray = isTypedArray;\n\n// Taken from here and modified for better browser support\n// https://github.com/sindresorhus/p-is-promise/blob/cda35a513bda03f977ad5cde3a079d237e82d7ef/index.js\nfunction isPromise(input) {\n\treturn (\n\t\t(\n\t\t\ttypeof Promise !== 'undefined' &&\n\t\t\tinput instanceof Promise\n\t\t) ||\n\t\t(\n\t\t\tinput !== null &&\n\t\t\ttypeof input === 'object' &&\n\t\t\ttypeof input.then === 'function' &&\n\t\t\ttypeof input.catch === 'function'\n\t\t)\n\t);\n}\nexports.isPromise = isPromise;\n\nfunction isArrayBufferView(value) {\n  if (typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView) {\n    return ArrayBuffer.isView(value);\n  }\n\n  return (\n    isTypedArray(value) ||\n    isDataView(value)\n  );\n}\nexports.isArrayBufferView = isArrayBufferView;\n\n\nfunction isUint8Array(value) {\n  return whichTypedArray(value) === 'Uint8Array';\n}\nexports.isUint8Array = isUint8Array;\n\nfunction isUint8ClampedArray(value) {\n  return whichTypedArray(value) === 'Uint8ClampedArray';\n}\nexports.isUint8ClampedArray = isUint8ClampedArray;\n\nfunction isUint16Array(value) {\n  return whichTypedArray(value) === 'Uint16Array';\n}\nexports.isUint16Array = isUint16Array;\n\nfunction isUint32Array(value) {\n  return whichTypedArray(value) === 'Uint32Array';\n}\nexports.isUint32Array = isUint32Array;\n\nfunction isInt8Array(value) {\n  return whichTypedArray(value) === 'Int8Array';\n}\nexports.isInt8Array = isInt8Array;\n\nfunction isInt16Array(value) {\n  return whichTypedArray(value) === 'Int16Array';\n}\nexports.isInt16Array = isInt16Array;\n\nfunction isInt32Array(value) {\n  return whichTypedArray(value) === 'Int32Array';\n}\nexports.isInt32Array = isInt32Array;\n\nfunction isFloat32Array(value) {\n  return whichTypedArray(value) === 'Float32Array';\n}\nexports.isFloat32Array = isFloat32Array;\n\nfunction isFloat64Array(value) {\n  return whichTypedArray(value) === 'Float64Array';\n}\nexports.isFloat64Array = isFloat64Array;\n\nfunction isBigInt64Array(value) {\n  return whichTypedArray(value) === 'BigInt64Array';\n}\nexports.isBigInt64Array = isBigInt64Array;\n\nfunction isBigUint64Array(value) {\n  return whichTypedArray(value) === 'BigUint64Array';\n}\nexports.isBigUint64Array = isBigUint64Array;\n\nfunction isMapToString(value) {\n  return ObjectToString(value) === '[object Map]';\n}\nisMapToString.working = (\n  typeof Map !== 'undefined' &&\n  isMapToString(new Map())\n);\n\nfunction isMap(value) {\n  if (typeof Map === 'undefined') {\n    return false;\n  }\n\n  return isMapToString.working\n    ? isMapToString(value)\n    : value instanceof Map;\n}\nexports.isMap = isMap;\n\nfunction isSetToString(value) {\n  return ObjectToString(value) === '[object Set]';\n}\nisSetToString.working = (\n  typeof Set !== 'undefined' &&\n  isSetToString(new Set())\n);\nfunction isSet(value) {\n  if (typeof Set === 'undefined') {\n    return false;\n  }\n\n  return isSetToString.working\n    ? isSetToString(value)\n    : value instanceof Set;\n}\nexports.isSet = isSet;\n\nfunction isWeakMapToString(value) {\n  return ObjectToString(value) === '[object WeakMap]';\n}\nisWeakMapToString.working = (\n  typeof WeakMap !== 'undefined' &&\n  isWeakMapToString(new WeakMap())\n);\nfunction isWeakMap(value) {\n  if (typeof WeakMap === 'undefined') {\n    return false;\n  }\n\n  return isWeakMapToString.working\n    ? isWeakMapToString(value)\n    : value instanceof WeakMap;\n}\nexports.isWeakMap = isWeakMap;\n\nfunction isWeakSetToString(value) {\n  return ObjectToString(value) === '[object WeakSet]';\n}\nisWeakSetToString.working = (\n  typeof WeakSet !== 'undefined' &&\n  isWeakSetToString(new WeakSet())\n);\nfunction isWeakSet(value) {\n  return isWeakSetToString(value);\n}\nexports.isWeakSet = isWeakSet;\n\nfunction isArrayBufferToString(value) {\n  return ObjectToString(value) === '[object ArrayBuffer]';\n}\nisArrayBufferToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  isArrayBufferToString(new ArrayBuffer())\n);\nfunction isArrayBuffer(value) {\n  if (typeof ArrayBuffer === 'undefined') {\n    return false;\n  }\n\n  return isArrayBufferToString.working\n    ? isArrayBufferToString(value)\n    : value instanceof ArrayBuffer;\n}\nexports.isArrayBuffer = isArrayBuffer;\n\nfunction isDataViewToString(value) {\n  return ObjectToString(value) === '[object DataView]';\n}\nisDataViewToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  typeof DataView !== 'undefined' &&\n  isDataViewToString(new DataView(new ArrayBuffer(1), 0, 1))\n);\nfunction isDataView(value) {\n  if (typeof DataView === 'undefined') {\n    return false;\n  }\n\n  return isDataViewToString.working\n    ? isDataViewToString(value)\n    : value instanceof DataView;\n}\nexports.isDataView = isDataView;\n\n// Store a copy of SharedArrayBuffer in case it's deleted elsewhere\nvar SharedArrayBufferCopy = typeof SharedArrayBuffer !== 'undefined' ? SharedArrayBuffer : undefined;\nfunction isSharedArrayBufferToString(value) {\n  return ObjectToString(value) === '[object SharedArrayBuffer]';\n}\nfunction isSharedArrayBuffer(value) {\n  if (typeof SharedArrayBufferCopy === 'undefined') {\n    return false;\n  }\n\n  if (typeof isSharedArrayBufferToString.working === 'undefined') {\n    isSharedArrayBufferToString.working = isSharedArrayBufferToString(new SharedArrayBufferCopy());\n  }\n\n  return isSharedArrayBufferToString.working\n    ? isSharedArrayBufferToString(value)\n    : value instanceof SharedArrayBufferCopy;\n}\nexports.isSharedArrayBuffer = isSharedArrayBuffer;\n\nfunction isAsyncFunction(value) {\n  return ObjectToString(value) === '[object AsyncFunction]';\n}\nexports.isAsyncFunction = isAsyncFunction;\n\nfunction isMapIterator(value) {\n  return ObjectToString(value) === '[object Map Iterator]';\n}\nexports.isMapIterator = isMapIterator;\n\nfunction isSetIterator(value) {\n  return ObjectToString(value) === '[object Set Iterator]';\n}\nexports.isSetIterator = isSetIterator;\n\nfunction isGeneratorObject(value) {\n  return ObjectToString(value) === '[object Generator]';\n}\nexports.isGeneratorObject = isGeneratorObject;\n\nfunction isWebAssemblyCompiledModule(value) {\n  return ObjectToString(value) === '[object WebAssembly.Module]';\n}\nexports.isWebAssemblyCompiledModule = isWebAssemblyCompiledModule;\n\nfunction isNumberObject(value) {\n  return checkBoxedPrimitive(value, numberValue);\n}\nexports.isNumberObject = isNumberObject;\n\nfunction isStringObject(value) {\n  return checkBoxedPrimitive(value, stringValue);\n}\nexports.isStringObject = isStringObject;\n\nfunction isBooleanObject(value) {\n  return checkBoxedPrimitive(value, booleanValue);\n}\nexports.isBooleanObject = isBooleanObject;\n\nfunction isBigIntObject(value) {\n  return BigIntSupported && checkBoxedPrimitive(value, bigIntValue);\n}\nexports.isBigIntObject = isBigIntObject;\n\nfunction isSymbolObject(value) {\n  return SymbolSupported && checkBoxedPrimitive(value, symbolValue);\n}\nexports.isSymbolObject = isSymbolObject;\n\nfunction isBoxedPrimitive(value) {\n  return (\n    isNumberObject(value) ||\n    isStringObject(value) ||\n    isBooleanObject(value) ||\n    isBigIntObject(value) ||\n    isSymbolObject(value)\n  );\n}\nexports.isBoxedPrimitive = isBoxedPrimitive;\n\nfunction isAnyArrayBuffer(value) {\n  return typeof Uint8Array !== 'undefined' && (\n    isArrayBuffer(value) ||\n    isSharedArrayBuffer(value)\n  );\n}\nexports.isAnyArrayBuffer = isAnyArrayBuffer;\n\n['isProxy', 'isExternal', 'isModuleNamespaceObject'].forEach(function(method) {\n  Object.defineProperty(exports, method, {\n    enumerable: false,\n    value: function() {\n      throw new Error(method + ' is not supported in userland');\n    }\n  });\n});\n","'use strict';\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn $toString(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\t$toString(value) !== '[object Array]' &&\n\t\t$toString(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar undefined;\n\nvar $SyntaxError = SyntaxError;\nvar $Function = Function;\nvar $TypeError = TypeError;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = Object.getPrototypeOf || function (x) { return x.__proto__; }; // eslint-disable-line no-proto\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': RangeError,\n\t'%ReferenceError%': ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('has');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\nvar $max = GetIntrinsic('%Math.max%');\n\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = null;\n\t}\n}\n\nmodule.exports = function callBind(originalFunction) {\n\tvar func = $reflectApply(bind, $call, arguments);\n\tif ($gOPD && $defineProperty) {\n\t\tvar desc = $gOPD(func, 'length');\n\t\tif (desc.configurable) {\n\t\t\t// original length, plus the receiver, minus any additional arguments (after the receiver)\n\t\t\t$defineProperty(\n\t\t\t\tfunc,\n\t\t\t\t'length',\n\t\t\t\t{ value: 1 + $max(0, originalFunction.length - (arguments.length - 1)) }\n\t\t\t);\n\t\t}\n\t}\n\treturn func;\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar fnToStr = Function.prototype.toString;\nvar isFnRegex = /^\\s*(?:function)?\\*/;\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar getProto = Object.getPrototypeOf;\nvar getGeneratorFunc = function () { // eslint-disable-line consistent-return\n\tif (!hasToStringTag) {\n\t\treturn false;\n\t}\n\ttry {\n\t\treturn Function('return function*() {}')();\n\t} catch (e) {\n\t}\n};\nvar GeneratorFunction;\n\nmodule.exports = function isGeneratorFunction(fn) {\n\tif (typeof fn !== 'function') {\n\t\treturn false;\n\t}\n\tif (isFnRegex.test(fnToStr.call(fn))) {\n\t\treturn true;\n\t}\n\tif (!hasToStringTag) {\n\t\tvar str = toStr.call(fn);\n\t\treturn str === '[object GeneratorFunction]';\n\t}\n\tif (!getProto) {\n\t\treturn false;\n\t}\n\tif (typeof GeneratorFunction === 'undefined') {\n\t\tvar generatorFunc = getGeneratorFunc();\n\t\tGeneratorFunction = generatorFunc ? getProto(generatorFunc) : false;\n\t}\n\treturn getProto(fn) === GeneratorFunction;\n};\n","'use strict';\n\nvar forEach = require('foreach');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $slice = callBound('String.prototype.slice');\nvar toStrTags = {};\nvar gOPD = require('es-abstract/helpers/getOwnPropertyDescriptor');\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tif (typeof g[typedArray] === 'function') {\n\t\t\tvar arr = new g[typedArray]();\n\t\t\tif (Symbol.toStringTag in arr) {\n\t\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\t\tif (!descriptor) {\n\t\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t\t}\n\t\t\t\ttoStrTags[typedArray] = descriptor.get;\n\t\t\t}\n\t\t}\n\t});\n}\n\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\tvar foundName = false;\n\tforEach(toStrTags, function (getter, typedArray) {\n\t\tif (!foundName) {\n\t\t\ttry {\n\t\t\t\tvar name = getter.call(value);\n\t\t\t\tif (name === typedArray) {\n\t\t\t\t\tfoundName = name;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t}\n\t});\n\treturn foundName;\n};\n\nvar isTypedArray = require('is-typed-array');\n\nmodule.exports = function whichTypedArray(value) {\n\tif (!isTypedArray(value)) { return false; }\n\tif (!hasToStringTag || !(Symbol.toStringTag in value)) { return $slice($toString(value), 8, -1); }\n\treturn tryTypedArrays(value);\n};\n","\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\n\nmodule.exports = function forEach (obj, fn, ctx) {\n    if (toString.call(fn) !== '[object Function]') {\n        throw new TypeError('iterator must be a function');\n    }\n    var l = obj.length;\n    if (l === +l) {\n        for (var i = 0; i < l; i++) {\n            fn.call(ctx, obj[i], i, obj);\n        }\n    } else {\n        for (var k in obj) {\n            if (hasOwn.call(obj, k)) {\n                fn.call(ctx, obj[k], k, obj);\n            }\n        }\n    }\n};\n\n","'use strict';\n\nvar possibleNames = [\n\t'BigInt64Array',\n\t'BigUint64Array',\n\t'Float32Array',\n\t'Float64Array',\n\t'Int16Array',\n\t'Int32Array',\n\t'Int8Array',\n\t'Uint16Array',\n\t'Uint32Array',\n\t'Uint8Array',\n\t'Uint8ClampedArray'\n];\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\n\nmodule.exports = function availableTypedArrays() {\n\tvar out = [];\n\tfor (var i = 0; i < possibleNames.length; i++) {\n\t\tif (typeof g[possibleNames[i]] === 'function') {\n\t\t\tout[out.length] = possibleNames[i];\n\t\t}\n\t}\n\treturn out;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","'use strict';\n\nvar forEach = require('foreach');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $indexOf = callBound('Array.prototype.indexOf', true) || function indexOf(array, value) {\n\tfor (var i = 0; i < array.length; i += 1) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\nvar $slice = callBound('String.prototype.slice');\nvar toStrTags = {};\nvar gOPD = require('es-abstract/helpers/getOwnPropertyDescriptor');\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tif (Symbol.toStringTag in arr) {\n\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\tif (!descriptor) {\n\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t}\n\t\t\ttoStrTags[typedArray] = descriptor.get;\n\t\t}\n\t});\n}\n\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\tvar anyTrue = false;\n\tforEach(toStrTags, function (getter, typedArray) {\n\t\tif (!anyTrue) {\n\t\t\ttry {\n\t\t\t\tanyTrue = getter.call(value) === typedArray;\n\t\t\t} catch (e) { /**/ }\n\t\t}\n\t});\n\treturn anyTrue;\n};\n\nmodule.exports = function isTypedArray(value) {\n\tif (!value || typeof value !== 'object') { return false; }\n\tif (!hasToStringTag || !(Symbol.toStringTag in value)) {\n\t\tvar tag = $slice($toString(value), 8, -1);\n\t\treturn $indexOf(typedArrays, tag) > -1;\n\t}\n\tif (!gOPD) { return false; }\n\treturn tryTypedArrays(value);\n};\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","// Currently in sync with Node.js lib/internal/assert/assertion_error.js\n// https://github.com/nodejs/node/commit/0817840f775032169ddd70c85ac059f18ffcc81c\n'use strict';\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar _require = require('util/'),\n    inspect = _require.inspect;\n\nvar _require2 = require('../errors'),\n    ERR_INVALID_ARG_TYPE = _require2.codes.ERR_INVALID_ARG_TYPE; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\n\n\nfunction repeat(str, count) {\n  count = Math.floor(count);\n  if (str.length == 0 || count == 0) return '';\n  var maxCount = str.length * count;\n  count = Math.floor(Math.log(count) / Math.log(2));\n\n  while (count) {\n    str += str;\n    count--;\n  }\n\n  str += str.substring(0, maxCount - str.length);\n  return str;\n}\n\nvar blue = '';\nvar green = '';\nvar red = '';\nvar white = '';\nvar kReadableOperator = {\n  deepStrictEqual: 'Expected values to be strictly deep-equal:',\n  strictEqual: 'Expected values to be strictly equal:',\n  strictEqualObject: 'Expected \"actual\" to be reference-equal to \"expected\":',\n  deepEqual: 'Expected values to be loosely deep-equal:',\n  equal: 'Expected values to be loosely equal:',\n  notDeepStrictEqual: 'Expected \"actual\" not to be strictly deep-equal to:',\n  notStrictEqual: 'Expected \"actual\" to be strictly unequal to:',\n  notStrictEqualObject: 'Expected \"actual\" not to be reference-equal to \"expected\":',\n  notDeepEqual: 'Expected \"actual\" not to be loosely deep-equal to:',\n  notEqual: 'Expected \"actual\" to be loosely unequal to:',\n  notIdentical: 'Values identical but not reference-equal:'\n}; // Comparing short primitives should just show === / !== instead of using the\n// diff.\n\nvar kMaxShortLength = 10;\n\nfunction copyError(source) {\n  var keys = Object.keys(source);\n  var target = Object.create(Object.getPrototypeOf(source));\n  keys.forEach(function (key) {\n    target[key] = source[key];\n  });\n  Object.defineProperty(target, 'message', {\n    value: source.message\n  });\n  return target;\n}\n\nfunction inspectValue(val) {\n  // The util.inspect default values could be changed. This makes sure the\n  // error messages contain the necessary information nevertheless.\n  return inspect(val, {\n    compact: false,\n    customInspect: false,\n    depth: 1000,\n    maxArrayLength: Infinity,\n    // Assert compares only enumerable properties (with a few exceptions).\n    showHidden: false,\n    // Having a long line as error is better than wrapping the line for\n    // comparison for now.\n    // TODO(BridgeAR): `breakLength` should be limited as soon as soon as we\n    // have meta information about the inspected properties (i.e., know where\n    // in what line the property starts and ends).\n    breakLength: Infinity,\n    // Assert does not detect proxies currently.\n    showProxy: false,\n    sorted: true,\n    // Inspect getters as we also check them when comparing entries.\n    getters: true\n  });\n}\n\nfunction createErrDiff(actual, expected, operator) {\n  var other = '';\n  var res = '';\n  var lastPos = 0;\n  var end = '';\n  var skipped = false;\n  var actualInspected = inspectValue(actual);\n  var actualLines = actualInspected.split('\\n');\n  var expectedLines = inspectValue(expected).split('\\n');\n  var i = 0;\n  var indicator = ''; // In case both values are objects explicitly mark them as not reference equal\n  // for the `strictEqual` operator.\n\n  if (operator === 'strictEqual' && _typeof(actual) === 'object' && _typeof(expected) === 'object' && actual !== null && expected !== null) {\n    operator = 'strictEqualObject';\n  } // If \"actual\" and \"expected\" fit on a single line and they are not strictly\n  // equal, check further special handling.\n\n\n  if (actualLines.length === 1 && expectedLines.length === 1 && actualLines[0] !== expectedLines[0]) {\n    var inputLength = actualLines[0].length + expectedLines[0].length; // If the character length of \"actual\" and \"expected\" together is less than\n    // kMaxShortLength and if neither is an object and at least one of them is\n    // not `zero`, use the strict equal comparison to visualize the output.\n\n    if (inputLength <= kMaxShortLength) {\n      if ((_typeof(actual) !== 'object' || actual === null) && (_typeof(expected) !== 'object' || expected === null) && (actual !== 0 || expected !== 0)) {\n        // -0 === +0\n        return \"\".concat(kReadableOperator[operator], \"\\n\\n\") + \"\".concat(actualLines[0], \" !== \").concat(expectedLines[0], \"\\n\");\n      }\n    } else if (operator !== 'strictEqualObject') {\n      // If the stderr is a tty and the input length is lower than the current\n      // columns per line, add a mismatch indicator below the output. If it is\n      // not a tty, use a default value of 80 characters.\n      var maxLength = process.stderr && process.stderr.isTTY ? process.stderr.columns : 80;\n\n      if (inputLength < maxLength) {\n        while (actualLines[0][i] === expectedLines[0][i]) {\n          i++;\n        } // Ignore the first characters.\n\n\n        if (i > 2) {\n          // Add position indicator for the first mismatch in case it is a\n          // single line and the input length is less than the column length.\n          indicator = \"\\n  \".concat(repeat(' ', i), \"^\");\n          i = 0;\n        }\n      }\n    }\n  } // Remove all ending lines that match (this optimizes the output for\n  // readability by reducing the number of total changed lines).\n\n\n  var a = actualLines[actualLines.length - 1];\n  var b = expectedLines[expectedLines.length - 1];\n\n  while (a === b) {\n    if (i++ < 2) {\n      end = \"\\n  \".concat(a).concat(end);\n    } else {\n      other = a;\n    }\n\n    actualLines.pop();\n    expectedLines.pop();\n    if (actualLines.length === 0 || expectedLines.length === 0) break;\n    a = actualLines[actualLines.length - 1];\n    b = expectedLines[expectedLines.length - 1];\n  }\n\n  var maxLines = Math.max(actualLines.length, expectedLines.length); // Strict equal with identical objects that are not identical by reference.\n  // E.g., assert.deepStrictEqual({ a: Symbol() }, { a: Symbol() })\n\n  if (maxLines === 0) {\n    // We have to get the result again. The lines were all removed before.\n    var _actualLines = actualInspected.split('\\n'); // Only remove lines in case it makes sense to collapse those.\n    // TODO: Accept env to always show the full error.\n\n\n    if (_actualLines.length > 30) {\n      _actualLines[26] = \"\".concat(blue, \"...\").concat(white);\n\n      while (_actualLines.length > 27) {\n        _actualLines.pop();\n      }\n    }\n\n    return \"\".concat(kReadableOperator.notIdentical, \"\\n\\n\").concat(_actualLines.join('\\n'), \"\\n\");\n  }\n\n  if (i > 3) {\n    end = \"\\n\".concat(blue, \"...\").concat(white).concat(end);\n    skipped = true;\n  }\n\n  if (other !== '') {\n    end = \"\\n  \".concat(other).concat(end);\n    other = '';\n  }\n\n  var printedLines = 0;\n  var msg = kReadableOperator[operator] + \"\\n\".concat(green, \"+ actual\").concat(white, \" \").concat(red, \"- expected\").concat(white);\n  var skippedMsg = \" \".concat(blue, \"...\").concat(white, \" Lines skipped\");\n\n  for (i = 0; i < maxLines; i++) {\n    // Only extra expected lines exist\n    var cur = i - lastPos;\n\n    if (actualLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(expectedLines[i - 2]);\n          printedLines++;\n        }\n\n        res += \"\\n  \".concat(expectedLines[i - 1]);\n        printedLines++;\n      } // Mark the current line as the last diverging one.\n\n\n      lastPos = i; // Add the expected line to the cache.\n\n      other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLines[i]);\n      printedLines++; // Only extra actual lines exist\n    } else if (expectedLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(actualLines[i - 2]);\n          printedLines++;\n        }\n\n        res += \"\\n  \".concat(actualLines[i - 1]);\n        printedLines++;\n      } // Mark the current line as the last diverging one.\n\n\n      lastPos = i; // Add the actual line to the result.\n\n      res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLines[i]);\n      printedLines++; // Lines diverge\n    } else {\n      var expectedLine = expectedLines[i];\n      var actualLine = actualLines[i]; // If the lines diverge, specifically check for lines that only diverge by\n      // a trailing comma. In that case it is actually identical and we should\n      // mark it as such.\n\n      var divergingLines = actualLine !== expectedLine && (!endsWith(actualLine, ',') || actualLine.slice(0, -1) !== expectedLine); // If the expected line has a trailing comma but is otherwise identical,\n      // add a comma at the end of the actual line. Otherwise the output could\n      // look weird as in:\n      //\n      //   [\n      //     1         // No comma at the end!\n      // +   2\n      //   ]\n      //\n\n      if (divergingLines && endsWith(expectedLine, ',') && expectedLine.slice(0, -1) === actualLine) {\n        divergingLines = false;\n        actualLine += ',';\n      }\n\n      if (divergingLines) {\n        // If the last diverging line is more than one line above and the\n        // current line is at least line three, add some of the former lines and\n        // also add dots to indicate skipped entries.\n        if (cur > 1 && i > 2) {\n          if (cur > 4) {\n            res += \"\\n\".concat(blue, \"...\").concat(white);\n            skipped = true;\n          } else if (cur > 3) {\n            res += \"\\n  \".concat(actualLines[i - 2]);\n            printedLines++;\n          }\n\n          res += \"\\n  \".concat(actualLines[i - 1]);\n          printedLines++;\n        } // Mark the current line as the last diverging one.\n\n\n        lastPos = i; // Add the actual line to the result and cache the expected diverging\n        // line so consecutive diverging lines show up as +++--- and not +-+-+-.\n\n        res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLine);\n        other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLine);\n        printedLines += 2; // Lines are identical\n      } else {\n        // Add all cached information to the result before adding other things\n        // and reset the cache.\n        res += other;\n        other = ''; // If the last diverging line is exactly one line above or if it is the\n        // very first line, add the line to the result.\n\n        if (cur === 1 || i === 0) {\n          res += \"\\n  \".concat(actualLine);\n          printedLines++;\n        }\n      }\n    } // Inspected object to big (Show ~20 rows max)\n\n\n    if (printedLines > 20 && i < maxLines - 2) {\n      return \"\".concat(msg).concat(skippedMsg, \"\\n\").concat(res, \"\\n\").concat(blue, \"...\").concat(white).concat(other, \"\\n\") + \"\".concat(blue, \"...\").concat(white);\n    }\n  }\n\n  return \"\".concat(msg).concat(skipped ? skippedMsg : '', \"\\n\").concat(res).concat(other).concat(end).concat(indicator);\n}\n\nvar AssertionError =\n/*#__PURE__*/\nfunction (_Error) {\n  _inherits(AssertionError, _Error);\n\n  function AssertionError(options) {\n    var _this;\n\n    _classCallCheck(this, AssertionError);\n\n    if (_typeof(options) !== 'object' || options === null) {\n      throw new ERR_INVALID_ARG_TYPE('options', 'Object', options);\n    }\n\n    var message = options.message,\n        operator = options.operator,\n        stackStartFn = options.stackStartFn;\n    var actual = options.actual,\n        expected = options.expected;\n    var limit = Error.stackTraceLimit;\n    Error.stackTraceLimit = 0;\n\n    if (message != null) {\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(AssertionError).call(this, String(message)));\n    } else {\n      if (process.stderr && process.stderr.isTTY) {\n        // Reset on each call to make sure we handle dynamically set environment\n        // variables correct.\n        if (process.stderr && process.stderr.getColorDepth && process.stderr.getColorDepth() !== 1) {\n          blue = \"\\x1B[34m\";\n          green = \"\\x1B[32m\";\n          white = \"\\x1B[39m\";\n          red = \"\\x1B[31m\";\n        } else {\n          blue = '';\n          green = '';\n          white = '';\n          red = '';\n        }\n      } // Prevent the error stack from being visible by duplicating the error\n      // in a very close way to the original in case both sides are actually\n      // instances of Error.\n\n\n      if (_typeof(actual) === 'object' && actual !== null && _typeof(expected) === 'object' && expected !== null && 'stack' in actual && actual instanceof Error && 'stack' in expected && expected instanceof Error) {\n        actual = copyError(actual);\n        expected = copyError(expected);\n      }\n\n      if (operator === 'deepStrictEqual' || operator === 'strictEqual') {\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(AssertionError).call(this, createErrDiff(actual, expected, operator)));\n      } else if (operator === 'notDeepStrictEqual' || operator === 'notStrictEqual') {\n        // In case the objects are equal but the operator requires unequal, show\n        // the first object and say A equals B\n        var base = kReadableOperator[operator];\n        var res = inspectValue(actual).split('\\n'); // In case \"actual\" is an object, it should not be reference equal.\n\n        if (operator === 'notStrictEqual' && _typeof(actual) === 'object' && actual !== null) {\n          base = kReadableOperator.notStrictEqualObject;\n        } // Only remove lines in case it makes sense to collapse those.\n        // TODO: Accept env to always show the full error.\n\n\n        if (res.length > 30) {\n          res[26] = \"\".concat(blue, \"...\").concat(white);\n\n          while (res.length > 27) {\n            res.pop();\n          }\n        } // Only print a single input.\n\n\n        if (res.length === 1) {\n          _this = _possibleConstructorReturn(this, _getPrototypeOf(AssertionError).call(this, \"\".concat(base, \" \").concat(res[0])));\n        } else {\n          _this = _possibleConstructorReturn(this, _getPrototypeOf(AssertionError).call(this, \"\".concat(base, \"\\n\\n\").concat(res.join('\\n'), \"\\n\")));\n        }\n      } else {\n        var _res = inspectValue(actual);\n\n        var other = '';\n        var knownOperators = kReadableOperator[operator];\n\n        if (operator === 'notDeepEqual' || operator === 'notEqual') {\n          _res = \"\".concat(kReadableOperator[operator], \"\\n\\n\").concat(_res);\n\n          if (_res.length > 1024) {\n            _res = \"\".concat(_res.slice(0, 1021), \"...\");\n          }\n        } else {\n          other = \"\".concat(inspectValue(expected));\n\n          if (_res.length > 512) {\n            _res = \"\".concat(_res.slice(0, 509), \"...\");\n          }\n\n          if (other.length > 512) {\n            other = \"\".concat(other.slice(0, 509), \"...\");\n          }\n\n          if (operator === 'deepEqual' || operator === 'equal') {\n            _res = \"\".concat(knownOperators, \"\\n\\n\").concat(_res, \"\\n\\nshould equal\\n\\n\");\n          } else {\n            other = \" \".concat(operator, \" \").concat(other);\n          }\n        }\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(AssertionError).call(this, \"\".concat(_res).concat(other)));\n      }\n    }\n\n    Error.stackTraceLimit = limit;\n    _this.generatedMessage = !message;\n    Object.defineProperty(_assertThisInitialized(_this), 'name', {\n      value: 'AssertionError [ERR_ASSERTION]',\n      enumerable: false,\n      writable: true,\n      configurable: true\n    });\n    _this.code = 'ERR_ASSERTION';\n    _this.actual = actual;\n    _this.expected = expected;\n    _this.operator = operator;\n\n    if (Error.captureStackTrace) {\n      // eslint-disable-next-line no-restricted-syntax\n      Error.captureStackTrace(_assertThisInitialized(_this), stackStartFn);\n    } // Create error message including the error code in the name.\n\n\n    _this.stack; // Reset the name.\n\n    _this.name = 'AssertionError';\n    return _possibleConstructorReturn(_this);\n  }\n\n  _createClass(AssertionError, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.name, \" [\").concat(this.code, \"]: \").concat(this.message);\n    }\n  }, {\n    key: inspect.custom,\n    value: function value(recurseTimes, ctx) {\n      // This limits the `actual` and `expected` property default inspection to\n      // the minimum depth. Otherwise those values would be too verbose compared\n      // to the actual error message which contains a combined view of these two\n      // input values.\n      return inspect(this, _objectSpread({}, ctx, {\n        customInspect: false,\n        depth: 0\n      }));\n    }\n  }]);\n\n  return AssertionError;\n}(_wrapNativeSuper(Error));\n\nmodule.exports = AssertionError;","/**\n * Code refactored from Mozilla Developer Network:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n */\n\n'use strict';\n\nfunction assign(target, firstSource) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert first argument to object');\n  }\n\n  var to = Object(target);\n  for (var i = 1; i < arguments.length; i++) {\n    var nextSource = arguments[i];\n    if (nextSource === undefined || nextSource === null) {\n      continue;\n    }\n\n    var keysArray = Object.keys(Object(nextSource));\n    for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n      var nextKey = keysArray[nextIndex];\n      var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n      if (desc !== undefined && desc.enumerable) {\n        to[nextKey] = nextSource[nextKey];\n      }\n    }\n  }\n  return to;\n}\n\nfunction polyfill() {\n  if (!Object.assign) {\n    Object.defineProperty(Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign\n    });\n  }\n}\n\nmodule.exports = {\n  assign: assign,\n  polyfill: polyfill\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Object);\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar origDefineProperty = Object.defineProperty;\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar arePropertyDescriptorsSupported = function () {\n\tvar obj = {};\n\ttry {\n\t\torigDefineProperty(obj, 'x', { enumerable: false, value: obj });\n\t\t// eslint-disable-next-line no-unused-vars, no-restricted-syntax\n\t\tfor (var _ in obj) { // jscs:ignore disallowUnusedVariables\n\t\t\treturn false;\n\t\t}\n\t\treturn obj.x === obj;\n\t} catch (e) { /* this is IE 8. */\n\t\treturn false;\n\t}\n};\nvar supportsDescriptors = origDefineProperty && arePropertyDescriptorsSupported();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object && (!isFunction(predicate) || !predicate())) {\n\t\treturn;\n\t}\n\tif (supportsDescriptors) {\n\t\torigDefineProperty(object, name, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: value,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\tobject[name] = value;\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\nvar numberIsNaN = function (value) {\n\treturn value !== value;\n};\n\nmodule.exports = function is(a, b) {\n\tif (a === 0 && b === 0) {\n\t\treturn 1 / a === 1 / b;\n\t}\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (numberIsNaN(a) && numberIsNaN(b)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\treturn typeof Object.is === 'function' ? Object.is : implementation;\n};\n","'use strict';\n\nvar getPolyfill = require('./polyfill');\nvar define = require('define-properties');\n\nmodule.exports = function shimObjectIs() {\n\tvar polyfill = getPolyfill();\n\tdefine(Object, { is: polyfill }, {\n\t\tis: function testObjectIs() {\n\t\t\treturn Object.is !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","// Currently in sync with Node.js lib/internal/util/comparisons.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar regexFlagsSupported = /a/g.flags !== undefined;\n\nvar arrayFromSet = function arrayFromSet(set) {\n  var array = [];\n  set.forEach(function (value) {\n    return array.push(value);\n  });\n  return array;\n};\n\nvar arrayFromMap = function arrayFromMap(map) {\n  var array = [];\n  map.forEach(function (value, key) {\n    return array.push([key, value]);\n  });\n  return array;\n};\n\nvar objectIs = Object.is ? Object.is : require('object-is');\nvar objectGetOwnPropertySymbols = Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols : function () {\n  return [];\n};\nvar numberIsNaN = Number.isNaN ? Number.isNaN : require('is-nan');\n\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\n\nvar hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\nvar propertyIsEnumerable = uncurryThis(Object.prototype.propertyIsEnumerable);\nvar objectToString = uncurryThis(Object.prototype.toString);\n\nvar _require$types = require('util/').types,\n    isAnyArrayBuffer = _require$types.isAnyArrayBuffer,\n    isArrayBufferView = _require$types.isArrayBufferView,\n    isDate = _require$types.isDate,\n    isMap = _require$types.isMap,\n    isRegExp = _require$types.isRegExp,\n    isSet = _require$types.isSet,\n    isNativeError = _require$types.isNativeError,\n    isBoxedPrimitive = _require$types.isBoxedPrimitive,\n    isNumberObject = _require$types.isNumberObject,\n    isStringObject = _require$types.isStringObject,\n    isBooleanObject = _require$types.isBooleanObject,\n    isBigIntObject = _require$types.isBigIntObject,\n    isSymbolObject = _require$types.isSymbolObject,\n    isFloat32Array = _require$types.isFloat32Array,\n    isFloat64Array = _require$types.isFloat64Array;\n\nfunction isNonIndex(key) {\n  if (key.length === 0 || key.length > 10) return true;\n\n  for (var i = 0; i < key.length; i++) {\n    var code = key.charCodeAt(i);\n    if (code < 48 || code > 57) return true;\n  } // The maximum size for an array is 2 ** 32 -1.\n\n\n  return key.length === 10 && key >= Math.pow(2, 32);\n}\n\nfunction getOwnNonIndexProperties(value) {\n  return Object.keys(value).filter(isNonIndex).concat(objectGetOwnPropertySymbols(value).filter(Object.prototype.propertyIsEnumerable.bind(value)));\n} // Taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\n\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n\n  if (y < x) {\n    return 1;\n  }\n\n  return 0;\n}\n\nvar ONLY_ENUMERABLE = undefined;\nvar kStrict = true;\nvar kLoose = false;\nvar kNoIterator = 0;\nvar kIsArray = 1;\nvar kIsSet = 2;\nvar kIsMap = 3; // Check if they have the same source and flags\n\nfunction areSimilarRegExps(a, b) {\n  return regexFlagsSupported ? a.source === b.source && a.flags === b.flags : RegExp.prototype.toString.call(a) === RegExp.prototype.toString.call(b);\n}\n\nfunction areSimilarFloatArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n\n  for (var offset = 0; offset < a.byteLength; offset++) {\n    if (a[offset] !== b[offset]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction areSimilarTypedArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n\n  return compare(new Uint8Array(a.buffer, a.byteOffset, a.byteLength), new Uint8Array(b.buffer, b.byteOffset, b.byteLength)) === 0;\n}\n\nfunction areEqualArrayBuffers(buf1, buf2) {\n  return buf1.byteLength === buf2.byteLength && compare(new Uint8Array(buf1), new Uint8Array(buf2)) === 0;\n}\n\nfunction isEqualBoxedPrimitive(val1, val2) {\n  if (isNumberObject(val1)) {\n    return isNumberObject(val2) && objectIs(Number.prototype.valueOf.call(val1), Number.prototype.valueOf.call(val2));\n  }\n\n  if (isStringObject(val1)) {\n    return isStringObject(val2) && String.prototype.valueOf.call(val1) === String.prototype.valueOf.call(val2);\n  }\n\n  if (isBooleanObject(val1)) {\n    return isBooleanObject(val2) && Boolean.prototype.valueOf.call(val1) === Boolean.prototype.valueOf.call(val2);\n  }\n\n  if (isBigIntObject(val1)) {\n    return isBigIntObject(val2) && BigInt.prototype.valueOf.call(val1) === BigInt.prototype.valueOf.call(val2);\n  }\n\n  return isSymbolObject(val2) && Symbol.prototype.valueOf.call(val1) === Symbol.prototype.valueOf.call(val2);\n} // Notes: Type tags are historical [[Class]] properties that can be set by\n// FunctionTemplate::SetClassName() in C++ or Symbol.toStringTag in JS\n// and retrieved using Object.prototype.toString.call(obj) in JS\n// See https://tc39.github.io/ecma262/#sec-object.prototype.tostring\n// for a list of tags pre-defined in the spec.\n// There are some unspecified tags in the wild too (e.g. typed array tags).\n// Since tags can be altered, they only serve fast failures\n//\n// Typed arrays and buffers are checked by comparing the content in their\n// underlying ArrayBuffer. This optimization requires that it's\n// reasonable to interpret their underlying memory in the same way,\n// which is checked by comparing their type tags.\n// (e.g. a Uint8Array and a Uint16Array with the same memory content\n// could still be different because they will be interpreted differently).\n//\n// For strict comparison, objects should have\n// a) The same built-in type tags\n// b) The same prototypes.\n\n\nfunction innerDeepEqual(val1, val2, strict, memos) {\n  // All identical values are equivalent, as determined by ===.\n  if (val1 === val2) {\n    if (val1 !== 0) return true;\n    return strict ? objectIs(val1, val2) : true;\n  } // Check more closely if val1 and val2 are equal.\n\n\n  if (strict) {\n    if (_typeof(val1) !== 'object') {\n      return typeof val1 === 'number' && numberIsNaN(val1) && numberIsNaN(val2);\n    }\n\n    if (_typeof(val2) !== 'object' || val1 === null || val2 === null) {\n      return false;\n    }\n\n    if (Object.getPrototypeOf(val1) !== Object.getPrototypeOf(val2)) {\n      return false;\n    }\n  } else {\n    if (val1 === null || _typeof(val1) !== 'object') {\n      if (val2 === null || _typeof(val2) !== 'object') {\n        // eslint-disable-next-line eqeqeq\n        return val1 == val2;\n      }\n\n      return false;\n    }\n\n    if (val2 === null || _typeof(val2) !== 'object') {\n      return false;\n    }\n  }\n\n  var val1Tag = objectToString(val1);\n  var val2Tag = objectToString(val2);\n\n  if (val1Tag !== val2Tag) {\n    return false;\n  }\n\n  if (Array.isArray(val1)) {\n    // Check for sparse arrays and general fast path\n    if (val1.length !== val2.length) {\n      return false;\n    }\n\n    var keys1 = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n    var keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n\n    if (keys1.length !== keys2.length) {\n      return false;\n    }\n\n    return keyCheck(val1, val2, strict, memos, kIsArray, keys1);\n  } // [browserify] This triggers on certain types in IE (Map/Set) so we don't\n  // wan't to early return out of the rest of the checks. However we can check\n  // if the second value is one of these values and the first isn't.\n\n\n  if (val1Tag === '[object Object]') {\n    // return keyCheck(val1, val2, strict, memos, kNoIterator);\n    if (!isMap(val1) && isMap(val2) || !isSet(val1) && isSet(val2)) {\n      return false;\n    }\n  }\n\n  if (isDate(val1)) {\n    if (!isDate(val2) || Date.prototype.getTime.call(val1) !== Date.prototype.getTime.call(val2)) {\n      return false;\n    }\n  } else if (isRegExp(val1)) {\n    if (!isRegExp(val2) || !areSimilarRegExps(val1, val2)) {\n      return false;\n    }\n  } else if (isNativeError(val1) || val1 instanceof Error) {\n    // Do not compare the stack as it might differ even though the error itself\n    // is otherwise identical.\n    if (val1.message !== val2.message || val1.name !== val2.name) {\n      return false;\n    }\n  } else if (isArrayBufferView(val1)) {\n    if (!strict && (isFloat32Array(val1) || isFloat64Array(val1))) {\n      if (!areSimilarFloatArrays(val1, val2)) {\n        return false;\n      }\n    } else if (!areSimilarTypedArrays(val1, val2)) {\n      return false;\n    } // Buffer.compare returns true, so val1.length === val2.length. If they both\n    // only contain numeric keys, we don't need to exam further than checking\n    // the symbols.\n\n\n    var _keys = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n\n    var _keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n\n    if (_keys.length !== _keys2.length) {\n      return false;\n    }\n\n    return keyCheck(val1, val2, strict, memos, kNoIterator, _keys);\n  } else if (isSet(val1)) {\n    if (!isSet(val2) || val1.size !== val2.size) {\n      return false;\n    }\n\n    return keyCheck(val1, val2, strict, memos, kIsSet);\n  } else if (isMap(val1)) {\n    if (!isMap(val2) || val1.size !== val2.size) {\n      return false;\n    }\n\n    return keyCheck(val1, val2, strict, memos, kIsMap);\n  } else if (isAnyArrayBuffer(val1)) {\n    if (!areEqualArrayBuffers(val1, val2)) {\n      return false;\n    }\n  } else if (isBoxedPrimitive(val1) && !isEqualBoxedPrimitive(val1, val2)) {\n    return false;\n  }\n\n  return keyCheck(val1, val2, strict, memos, kNoIterator);\n}\n\nfunction getEnumerables(val, keys) {\n  return keys.filter(function (k) {\n    return propertyIsEnumerable(val, k);\n  });\n}\n\nfunction keyCheck(val1, val2, strict, memos, iterationType, aKeys) {\n  // For all remaining Object pairs, including Array, objects and Maps,\n  // equivalence is determined by having:\n  // a) The same number of owned enumerable properties\n  // b) The same set of keys/indexes (although not necessarily the same order)\n  // c) Equivalent values for every corresponding key/index\n  // d) For Sets and Maps, equal contents\n  // Note: this accounts for both named and indexed properties on Arrays.\n  if (arguments.length === 5) {\n    aKeys = Object.keys(val1);\n    var bKeys = Object.keys(val2); // The pair must have the same number of owned properties.\n\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n  } // Cheap key test\n\n\n  var i = 0;\n\n  for (; i < aKeys.length; i++) {\n    if (!hasOwnProperty(val2, aKeys[i])) {\n      return false;\n    }\n  }\n\n  if (strict && arguments.length === 5) {\n    var symbolKeysA = objectGetOwnPropertySymbols(val1);\n\n    if (symbolKeysA.length !== 0) {\n      var count = 0;\n\n      for (i = 0; i < symbolKeysA.length; i++) {\n        var key = symbolKeysA[i];\n\n        if (propertyIsEnumerable(val1, key)) {\n          if (!propertyIsEnumerable(val2, key)) {\n            return false;\n          }\n\n          aKeys.push(key);\n          count++;\n        } else if (propertyIsEnumerable(val2, key)) {\n          return false;\n        }\n      }\n\n      var symbolKeysB = objectGetOwnPropertySymbols(val2);\n\n      if (symbolKeysA.length !== symbolKeysB.length && getEnumerables(val2, symbolKeysB).length !== count) {\n        return false;\n      }\n    } else {\n      var _symbolKeysB = objectGetOwnPropertySymbols(val2);\n\n      if (_symbolKeysB.length !== 0 && getEnumerables(val2, _symbolKeysB).length !== 0) {\n        return false;\n      }\n    }\n  }\n\n  if (aKeys.length === 0 && (iterationType === kNoIterator || iterationType === kIsArray && val1.length === 0 || val1.size === 0)) {\n    return true;\n  } // Use memos to handle cycles.\n\n\n  if (memos === undefined) {\n    memos = {\n      val1: new Map(),\n      val2: new Map(),\n      position: 0\n    };\n  } else {\n    // We prevent up to two map.has(x) calls by directly retrieving the value\n    // and checking for undefined. The map can only contain numbers, so it is\n    // safe to check for undefined only.\n    var val2MemoA = memos.val1.get(val1);\n\n    if (val2MemoA !== undefined) {\n      var val2MemoB = memos.val2.get(val2);\n\n      if (val2MemoB !== undefined) {\n        return val2MemoA === val2MemoB;\n      }\n    }\n\n    memos.position++;\n  }\n\n  memos.val1.set(val1, memos.position);\n  memos.val2.set(val2, memos.position);\n  var areEq = objEquiv(val1, val2, strict, aKeys, memos, iterationType);\n  memos.val1.delete(val1);\n  memos.val2.delete(val2);\n  return areEq;\n}\n\nfunction setHasEqualElement(set, val1, strict, memo) {\n  // Go looking.\n  var setValues = arrayFromSet(set);\n\n  for (var i = 0; i < setValues.length; i++) {\n    var val2 = setValues[i];\n\n    if (innerDeepEqual(val1, val2, strict, memo)) {\n      // Remove the matching element to make sure we do not check that again.\n      set.delete(val2);\n      return true;\n    }\n  }\n\n  return false;\n} // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#Loose_equality_using\n// Sadly it is not possible to detect corresponding values properly in case the\n// type is a string, number, bigint or boolean. The reason is that those values\n// can match lots of different string values (e.g., 1n == '+00001').\n\n\nfunction findLooseMatchingPrimitives(prim) {\n  switch (_typeof(prim)) {\n    case 'undefined':\n      return null;\n\n    case 'object':\n      // Only pass in null as object!\n      return undefined;\n\n    case 'symbol':\n      return false;\n\n    case 'string':\n      prim = +prim;\n    // Loose equal entries exist only if the string is possible to convert to\n    // a regular number and not NaN.\n    // Fall through\n\n    case 'number':\n      if (numberIsNaN(prim)) {\n        return false;\n      }\n\n  }\n\n  return true;\n}\n\nfunction setMightHaveLoosePrim(a, b, prim) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) return altValue;\n  return b.has(altValue) && !a.has(altValue);\n}\n\nfunction mapMightHaveLoosePrim(a, b, prim, item, memo) {\n  var altValue = findLooseMatchingPrimitives(prim);\n\n  if (altValue != null) {\n    return altValue;\n  }\n\n  var curB = b.get(altValue);\n\n  if (curB === undefined && !b.has(altValue) || !innerDeepEqual(item, curB, false, memo)) {\n    return false;\n  }\n\n  return !a.has(altValue) && innerDeepEqual(item, curB, false, memo);\n}\n\nfunction setEquiv(a, b, strict, memo) {\n  // This is a lazily initiated Set of entries which have to be compared\n  // pairwise.\n  var set = null;\n  var aValues = arrayFromSet(a);\n\n  for (var i = 0; i < aValues.length; i++) {\n    var val = aValues[i]; // Note: Checking for the objects first improves the performance for object\n    // heavy sets but it is a minor slow down for primitives. As they are fast\n    // to check this improves the worst case scenario instead.\n\n    if (_typeof(val) === 'object' && val !== null) {\n      if (set === null) {\n        set = new Set();\n      } // If the specified value doesn't exist in the second set its an not null\n      // object (or non strict only: a not matching primitive) we'll need to go\n      // hunting for something thats deep-(strict-)equal to it. To make this\n      // O(n log n) complexity we have to copy these values in a new set first.\n\n\n      set.add(val);\n    } else if (!b.has(val)) {\n      if (strict) return false; // Fast path to detect missing string, symbol, undefined and null values.\n\n      if (!setMightHaveLoosePrim(a, b, val)) {\n        return false;\n      }\n\n      if (set === null) {\n        set = new Set();\n      }\n\n      set.add(val);\n    }\n  }\n\n  if (set !== null) {\n    var bValues = arrayFromSet(b);\n\n    for (var _i = 0; _i < bValues.length; _i++) {\n      var _val = bValues[_i]; // We have to check if a primitive value is already\n      // matching and only if it's not, go hunting for it.\n\n      if (_typeof(_val) === 'object' && _val !== null) {\n        if (!setHasEqualElement(set, _val, strict, memo)) return false;\n      } else if (!strict && !a.has(_val) && !setHasEqualElement(set, _val, strict, memo)) {\n        return false;\n      }\n    }\n\n    return set.size === 0;\n  }\n\n  return true;\n}\n\nfunction mapHasEqualEntry(set, map, key1, item1, strict, memo) {\n  // To be able to handle cases like:\n  //   Map([[{}, 'a'], [{}, 'b']]) vs Map([[{}, 'b'], [{}, 'a']])\n  // ... we need to consider *all* matching keys, not just the first we find.\n  var setValues = arrayFromSet(set);\n\n  for (var i = 0; i < setValues.length; i++) {\n    var key2 = setValues[i];\n\n    if (innerDeepEqual(key1, key2, strict, memo) && innerDeepEqual(item1, map.get(key2), strict, memo)) {\n      set.delete(key2);\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction mapEquiv(a, b, strict, memo) {\n  var set = null;\n  var aEntries = arrayFromMap(a);\n\n  for (var i = 0; i < aEntries.length; i++) {\n    var _aEntries$i = _slicedToArray(aEntries[i], 2),\n        key = _aEntries$i[0],\n        item1 = _aEntries$i[1];\n\n    if (_typeof(key) === 'object' && key !== null) {\n      if (set === null) {\n        set = new Set();\n      }\n\n      set.add(key);\n    } else {\n      // By directly retrieving the value we prevent another b.has(key) check in\n      // almost all possible cases.\n      var item2 = b.get(key);\n\n      if (item2 === undefined && !b.has(key) || !innerDeepEqual(item1, item2, strict, memo)) {\n        if (strict) return false; // Fast path to detect missing string, symbol, undefined and null\n        // keys.\n\n        if (!mapMightHaveLoosePrim(a, b, key, item1, memo)) return false;\n\n        if (set === null) {\n          set = new Set();\n        }\n\n        set.add(key);\n      }\n    }\n  }\n\n  if (set !== null) {\n    var bEntries = arrayFromMap(b);\n\n    for (var _i2 = 0; _i2 < bEntries.length; _i2++) {\n      var _bEntries$_i = _slicedToArray(bEntries[_i2], 2),\n          key = _bEntries$_i[0],\n          item = _bEntries$_i[1];\n\n      if (_typeof(key) === 'object' && key !== null) {\n        if (!mapHasEqualEntry(set, a, key, item, strict, memo)) return false;\n      } else if (!strict && (!a.has(key) || !innerDeepEqual(a.get(key), item, false, memo)) && !mapHasEqualEntry(set, a, key, item, false, memo)) {\n        return false;\n      }\n    }\n\n    return set.size === 0;\n  }\n\n  return true;\n}\n\nfunction objEquiv(a, b, strict, keys, memos, iterationType) {\n  // Sets and maps don't have their entries accessible via normal object\n  // properties.\n  var i = 0;\n\n  if (iterationType === kIsSet) {\n    if (!setEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsMap) {\n    if (!mapEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsArray) {\n    for (; i < a.length; i++) {\n      if (hasOwnProperty(a, i)) {\n        if (!hasOwnProperty(b, i) || !innerDeepEqual(a[i], b[i], strict, memos)) {\n          return false;\n        }\n      } else if (hasOwnProperty(b, i)) {\n        return false;\n      } else {\n        // Array is sparse.\n        var keysA = Object.keys(a);\n\n        for (; i < keysA.length; i++) {\n          var key = keysA[i];\n\n          if (!hasOwnProperty(b, key) || !innerDeepEqual(a[key], b[key], strict, memos)) {\n            return false;\n          }\n        }\n\n        if (keysA.length !== Object.keys(b).length) {\n          return false;\n        }\n\n        return true;\n      }\n    }\n  } // The pair must have equivalent values for every corresponding key.\n  // Possibly expensive deep test:\n\n\n  for (i = 0; i < keys.length; i++) {\n    var _key = keys[i];\n\n    if (!innerDeepEqual(a[_key], b[_key], strict, memos)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isDeepEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kLoose);\n}\n\nfunction isDeepStrictEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kStrict);\n}\n\nmodule.exports = {\n  isDeepEqual: isDeepEqual,\n  isDeepStrictEqual: isDeepStrictEqual\n};","'use strict';\n\nvar callBind = require('call-bind');\nvar define = require('define-properties');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Number);\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function isNaN(value) {\n\treturn value !== value;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\tif (Number.isNaN && Number.isNaN(NaN) && !Number.isNaN('a')) {\n\t\treturn Number.isNaN;\n\t}\n\treturn implementation;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar getPolyfill = require('./polyfill');\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function shimNumberIsNaN() {\n\tvar polyfill = getPolyfill();\n\tdefine(Number, { isNaN: polyfill }, {\n\t\tisNaN: function testIsNaN() {\n\t\t\treturn Number.isNaN !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","const Selector = {\n  CUSTOMFILE: '.custom-file input[type=\"file\"]',\n  CUSTOMFILELABEL: '.custom-file-label',\n  FORM: 'form',\n  INPUT: 'input',\n}\n\nexport default Selector\n","import Selector from './selector'\n\nconst textNodeType = 3\nconst getDefaultText = (input) => {\n  let defaultText = ''\n\n  const label = input.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n  if (label) {\n    defaultText = label.textContent\n  }\n\n  return defaultText\n}\n\nconst findFirstChildNode = (element) => {\n  if (element.childNodes.length > 0) {\n    const childNodes = [].slice.call(element.childNodes)\n\n    for (let i = 0; i < childNodes.length; i++) {\n      const node = childNodes[i]\n      if (node.nodeType !== textNodeType) {\n        return node\n      }\n    }\n  }\n\n  return element\n}\n\nconst restoreDefaultText = (input) => {\n  const defaultText = input.bsCustomFileInput.defaultText\n  const label = input.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n  if (label) {\n    const element = findFirstChildNode(label)\n\n    element.textContent = defaultText\n  }\n}\n\nexport {\n  getDefaultText,\n  findFirstChildNode,\n  restoreDefaultText,\n}\n","import { findFirstChildNode, restoreDefaultText } from './util'\nimport Selector from './selector'\n\nconst fileApi = !!window.File\nconst FAKE_PATH = 'fakepath'\nconst FAKE_PATH_SEPARATOR = '\\\\'\n\nconst getSelectedFiles = (input) => {\n  if (input.hasAttribute('multiple') && fileApi) {\n    return [].slice.call(input.files)\n      .map((file) => file.name)\n      .join(', ')\n  }\n\n  if (input.value.indexOf(FAKE_PATH) !== -1) {\n    const splittedValue = input.value.split(FAKE_PATH_SEPARATOR)\n\n    return splittedValue[splittedValue.length - 1]\n  }\n\n  return input.value\n}\n\nfunction handleInputChange() {\n  const label = this.parentNode.querySelector(Selector.CUSTOMFILELABEL)\n\n  if (label) {\n    const element = findFirstChildNode(label)\n    const inputValue = getSelectedFiles(this)\n\n    if (inputValue.length) {\n      element.textContent = inputValue\n    } else {\n      restoreDefaultText(this)\n    }\n  }\n}\n\nfunction handleFormReset() {\n  const customFileList = [].slice.call(this.querySelectorAll(Selector.INPUT))\n    .filter((input) => !!input.bsCustomFileInput)\n\n  for (let i = 0, len = customFileList.length; i < len; i++) {\n    restoreDefaultText(customFileList[i])\n  }\n}\n\nexport {\n  handleInputChange,\n  handleFormReset,\n}\n","import { getDefaultText, restoreDefaultText } from './util'\nimport { handleFormReset, handleInputChange } from './eventHandlers'\nimport Selector from './selector'\n\nconst customProperty = 'bsCustomFileInput'\nconst Event = {\n  FORMRESET   : 'reset',\n  INPUTCHANGE : 'change',\n}\n\nconst bsCustomFileInput = {\n  init(inputSelector = Selector.CUSTOMFILE, formSelector = Selector.FORM) {\n    const customFileInputList = [].slice.call(document.querySelectorAll(inputSelector))\n    const formList = [].slice.call(document.querySelectorAll(formSelector))\n\n    for (let i = 0, len = customFileInputList.length; i < len; i++) {\n      const input = customFileInputList[i]\n\n      Object.defineProperty(input, customProperty, {\n        value: {\n          defaultText: getDefaultText(input),\n        },\n        writable: true,\n      })\n\n      handleInputChange.call(input)\n      input.addEventListener(Event.INPUTCHANGE, handleInputChange)\n    }\n\n    for (let i = 0, len = formList.length; i < len; i++) {\n      formList[i].addEventListener(Event.FORMRESET, handleFormReset)\n      Object.defineProperty(formList[i], customProperty, {\n        value: true,\n        writable: true,\n      })\n    }\n  },\n\n  destroy() {\n    const formList = [].slice.call(document.querySelectorAll(Selector.FORM))\n      .filter((form) => !!form.bsCustomFileInput)\n    const customFileInputList = [].slice.call(document.querySelectorAll(Selector.INPUT))\n      .filter((input) => !!input.bsCustomFileInput)\n\n    for (let i = 0, len = customFileInputList.length; i < len; i++) {\n      const input = customFileInputList[i]\n\n      restoreDefaultText(input)\n      input[customProperty] = undefined\n\n      input.removeEventListener(Event.INPUTCHANGE, handleInputChange)\n    }\n\n    for (let i = 0, len = formList.length; i < len; i++) {\n      formList[i].removeEventListener(Event.FORMRESET, handleFormReset)\n      formList[i][customProperty] = undefined\n    }\n  },\n}\n\nexport default bsCustomFileInput\n","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","import bsCustomFileInput from 'bs-custom-file-input';\nimport { convertImageBlob } from '../lib/convert';\nimport { ImageMode, ImageModeUtil, OutputMode, BINARY_FORMAT_PREFIX } from '../lib/enums';\nimport { saveAs } from 'file-saver';\nimport { resolve } from 'path';\nimport { rejects } from 'assert';\n\nfunction updateNameTextboxes() {\n    const input = $(\"#customFile\")[0];\n    const $nameContainer = $(\".name-container\");\n    const numExistingFields = $nameContainer.children().length;\n    const totalLength = Math.max(numExistingFields, input.files.length);\n    for(var i = 0; i < totalLength; i++) {\n        if(i >= numExistingFields)\n            $nameContainer.append(`<input type=\"text\" name=\"name${i}\" id=\"name${i}\" class=\"form-control\" placeholder=\"Variable name of image ${i+1}\" style=\"height:unset\">`);\n        else if(i >= input.files.length) {\n            $nameContainer.get(0).removeChild($nameContainer.children().get(i));\n        }\n    }\n    $(\".name-row\").css(\"display\", input.files.length > 0 ? \"\" : \"none\");\n}\n\nfunction updateListedBinaryFormats() {\n    const needBinaryFormat = ImageModeUtil.isTrueColor($(\"#cf\").val());\n    $(\"#format\").children(\"option\").each(function() {\n        if(!$(this).val().startsWith(\"bin\")) {\n            /* bail out if not binary format */\n            return;\n        }\n        if($(this).val().startsWith(\"bin_\")) {\n            /* has color code afterward */\n            $(this).prop(\"disabled\", !needBinaryFormat);\n            $(this).prop(\"hidden\", !needBinaryFormat);\n        } else {\n            /* has no color code */\n            $(this).prop(\"disabled\", needBinaryFormat);\n            $(this).prop(\"hidden\", needBinaryFormat);\n        }\n    });\n    /* Don't allow using disabled options */\n    if($(\"#format option:selected\").prop(\"disabled\"))\n        $(\"#format\").val(\"c_array\");\n}\n\n$(document).ready(function () {\n    bsCustomFileInput.init();\n    updateNameTextboxes();\n    updateListedBinaryFormats();\n});\n\n$(\"#customFile\").change(updateNameTextboxes);\n$(\"#cf\").on(\"change\", updateListedBinaryFormats);\n\n$(\"#format\").on(\"change\", function() {\n    const needsDisable = $(\"#format\").val() != \"c_array\";\n    if(needsDisable)\n        $(\"endian-checkbox\").prop(\"checked\", false);\n    $(\"#endian-checkbox\").prop(\"disabled\", needsDisable);\n})\n\n$(\"#convert-button\").on(\"click\", async() => {\n    $(\"#convert-button\").attr(\"disabled\", true);\n    /** @type {HTMLInputElement} */\n    const input = $(\"#customFile\")[0];\n    for(var i = 0; i < input.files.length; i++) {\n        const file = input.files[i];\n        if(file) {\n            const reader = new FileReader();\n            await new Promise((resolve, reject) => {\n                const outputType = $(\"#format\").val();\n                let outputMode, binaryFormat;\n                const requestedCf = ImageMode[$(\"#cf\").val()];\n                if(outputType == \"c_array\")\n                    outputMode = OutputMode.C;\n                else {\n                    outputMode = OutputMode.BIN;\n                    const needBinaryFormat = ImageModeUtil.isTrueColor(requestedCf);\n                    if(needBinaryFormat) {\n                        const binFormatMap = {\n                            \"bin_332\": ImageMode.ICF_TRUE_COLOR_ARGB8332,\n                            \"bin_565\": ImageMode.ICF_TRUE_COLOR_ARGB8565,\n                            \"bin_565_swap\": ImageMode.ICF_TRUE_COLOR_ARGB8565_RBSWAP,\n                            \"bin_888\": ImageMode.ICF_TRUE_COLOR_ARGB8888\n                        }\n                        binaryFormat = binFormatMap[outputType];\n                        if(typeof binaryFormat == 'undefined')\n                            throw new Error(\"Binary format not found: \" + binFormatRequest);\n                    }\n                }\n                async function doConvert(blob) {\n                    let imageName = $(\"#name\" + i).val();\n                    if (imageName == \"\") {\n                        imageName = file.name.split('.')[0];\n                    }\n\n                    const swapEndian = outputMode == OutputMode.C && document.querySelector(\"#endian-checkbox\").checked;\n                    const imageString = await convertImageBlob(blob, { cf: requestedCf, imageName: imageName, outName: imageName, swapEndian: swapEndian, outputFormat: outputMode, binaryFormat });\n                    console.log(imageString);\n                    var blob = new Blob([ imageString ], {\n                        type: outputMode == OutputMode.BIN ? \"binary/octet-stream\" : \"text/x-c;charset=utf-8\"\n                    });\n                    saveAs(blob, imageName + \".\" + (outputMode == OutputMode.BIN ? \"bin\" : \"c\"));\n                    resolve();\n                }\n                if($(\"#cf\").val().startsWith(\"CF_RAW\")) {\n                    reader.readAsArrayBuffer(file);\n                    reader.onload = function(e) {\n                        console.log(\"loaded\");\n                        /** @type {ArrayBuffer} */\n                        const buf = e.target.result;\n                        doConvert(new Uint8Array(buf));\n                    }\n                } else {\n                    reader.onload = function(e) {\n                        var image = new Image();\n                        image.onload = function() {\n                            console.log(\"loaded\");\n                            doConvert(image);\n                        };\n\n                        image.onerror = function(e) {\n                            reject(e);\n                        };\n                        image.src = e.target.result;\n                    }\n                    reader.readAsDataURL(file);\n                }\n            });\n        }\n    }\n    $(\"#convert-button\").removeAttr(\"disabled\");\n});\n\n/* FIXME: temporary hack to fix setImmediate issue */\nwindow.setImmediate = (fn) => setTimeout(fn, 0);\n"],"names":["Converter","getNumPasses","this","cf","$kBR3Q","ImageMode","CF_RGB565A8","CF_RAW","CF_RAW_ALPHA","d_array","Array","from","imageData","raw_len","length","indent","options","useLegacyFooterOrder","numValuesPerRow","str","map","val","i","$7qiEM","str_pad","dechex","join","substr","palette_size","CF_INDEXED_1_BIT","CF_INDEXED_2_BIT","CF_INDEXED_4_BIT","CF_INDEXED_8_BIT","d_out","pointContainer","$j8dGY","PointContainer","fromUint8Array","w","h","palette","$lj8c8","buildPalette","colors","color_arr","palettePointArray","getPointContainer","getPointArray","paletteColors","point","uint32","i1","push","b","g","r","a","outPointArray","applyPalette","forEach","arrayIndex","index","indexOf","Error","oldColorFormat","needsFormatSwap","outputFormat","OutputMode","BIN","ImageModeUtil","isTrueColor","binaryFormat","pass","y","dith_reset","x","conv_px","C","format_to_c_array","$lv_cf","CF_TRUE_COLOR","CF_TRUE_COLOR_ALPHA","CF_TRUE_COLOR_CHROMA","CF_ALPHA_1_BIT","CF_ALPHA_2_BIT","CF_ALPHA_4_BIT","CF_ALPHA_8_BIT","$header_32bit","finalBinary","Uint8Array","buffer","get_c_header","out_name","$c_header","$attr_name","toUpperCase","$cf","CF_RAW_CHROMA","replace","get_c_footer","data_size","header_cf","imagemode_to_enum_name","array_push","arr","v","isset","undefined","startIndex","alpha","c","ICF_TRUE_COLOR_ARGB8565","ICF_TRUE_COLOR_ARGB8565_RBSWAP","ICF_TRUE_COLOR_ARGB8332","ICF_TRUE_COLOR_ARGB8888","dith_next","c8","r_act","g_act","b_act","c16","p","dith","r_nerr","g_nerr","b_nerr","r_earr","g_earr","b_earr","classify_pixel","round_half_up","value","bits","tmp","Math","round","c_array","y_end","x_end","swapEndian","chroma","isNotRaw","convertImageBlob","img","options1","c_res_array","bin_res_blob","outName","c_creator","ctx","$j7jZc","createCanvas","width","height","getContext","drawImage","getImageData","data","Promise","all","Object","assign","convert","binaryConv","imagePath","loadImage","eval","fs","readFileSync","$parcel$interopDefault","$5JWYT","parse","name","$cc04548a2788fa3f$export$2e2bcd8739ae039","$deae2c9364c28e5b$export$cd3d1f114b139967","$deae2c9364c28e5b$export$fe58198efe02b173","document","createElement","src","resolve","reject","image","cleanup","onload","onerror","$60bea7f28a066bd1$var$weightRe","RegExp","$60bea7f28a066bd1$var$styleRe","$60bea7f28a066bd1$var$variantRe","$60bea7f28a066bd1$var$stretchRe","$60bea7f28a066bd1$var$sizeFamilyRe","$60bea7f28a066bd1$var$cache","module","exports","sizeFamily","exec","font","weight","style","stretch","variant","size","parseFloat","unit","family","substring","$42dee82bb85223a3$var$assertPath","path","TypeError","JSON","stringify","$42dee82bb85223a3$var$normalizeStringPosix","allowAboveRoot","code","res","lastSegmentLength","lastSlash","dots","charCodeAt","lastSlashIndex","lastIndexOf","slice","$42dee82bb85223a3$var$posix","cwd","resolvedPath","resolvedAbsolute","arguments","$37xsB","normalize","isAbsolute","trailingSeparator","joined","arg","relative","to","fromStart","fromEnd","fromLen","toStart","toLen","lastCommonSep","fromCode","out","_makeLong","dirname","hasRoot","end","matchedSlash","basename","ext","start","extIdx","firstNonSlashEnd","extname","startDot","startPart","preDotState","format","pathObject","sep","dir","root","base","$42dee82bb85223a3$var$_format","ret","delimiter","win32","posix","$245bfb0f623498d7$var$cachedSetTimeout","$245bfb0f623498d7$var$cachedClearTimeout","$245bfb0f623498d7$var$process","$245bfb0f623498d7$var$defaultSetTimout","$245bfb0f623498d7$var$defaultClearTimeout","$245bfb0f623498d7$var$runTimeout","fun","setTimeout","e","call","clearTimeout","e1","$245bfb0f623498d7$var$currentQueue","$245bfb0f623498d7$var$queue","$245bfb0f623498d7$var$draining","$245bfb0f623498d7$var$queueIndex","$245bfb0f623498d7$var$cleanUpNextTick","concat","$245bfb0f623498d7$var$drainQueue","timeout","len","run","marker","$245bfb0f623498d7$var$runClearTimeout","$245bfb0f623498d7$var$Item","array","$245bfb0f623498d7$var$noop","nextTick","args","prototype","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","chdir","umask","$aa44e987acc195b7$export$8fdc94333f850fd0","$aa44e987acc195b7$export$270e6e36ebde1e15","mode","startsWith","$aa44e987acc195b7$export$98d0c6b2ee3d39ed","$709c94506a210857$export$8743009a87fcb00f","$709c94506a210857$export$d141bba7fdc215a3","$709c94506a210857$export$4a5767248b18ef41","$e02f54d2907ca005$var$correctGamma","n","$e02f54d2907ca005$export$fca6d690f89f5907","z","$5bfd5e1f925236e5$export$b5ba70b240f8f7f","min","$ecbYb","min3","max","max3","delta","l","s","$582a5f5bbdf964a3$export$429f6664de4d6783","PI","$582a5f5bbdf964a3$export$22cda90bd12095a9","m","$582a5f5bbdf964a3$export$b393be5a551404be","$582a5f5bbdf964a3$export$6d279704a4749429","low","high","$582a5f5bbdf964a3$export$5eb0b6af50caf977","$582a5f5bbdf964a3$export$e89438c49214667d","$582a5f5bbdf964a3$export$c7d3d1f96a700512","arrayToSort","callback","type","sorted","ord","create","sort","ord2","$1075e7e6e59f7470$export$1cd42a60c721c525","xyz","$3Fz8P","rgb2xyz","$LSYnY","xyz2lab","$8d00de38dbd42930$var$pivot","$8d00de38dbd42930$export$f80b0695d2cca109","L","$d81d789192ba7d91$var$pivot","$d81d789192ba7d91$export$b44d3ebc207ccb62","$ad23e4b3cdc717c7$var$correctGamma","$ad23e4b3cdc717c7$export$22cbacf088b0f5c6","inRange0to255Rounded","$a6574f47a6d56a39$export$e7127f011d23e988","setWhitePoint","_whitePoint","_maxDistance","calculateRaw","calculateNormalized","colorA","colorB","_setDefaults","$997e235a1aee6106$export$e480508b99dd93a3","$1mvH2","AbstractDistanceCalculator","r1","g1","b1","a1","r2","g2","b2","a2","lab1","$aMvXd","rgb2lab","inRange0to255","lab2","dL","dA","dB","c1","sqrt","dC","deltaH","dAlpha","_kA","_Kl","_K1","_K2","$997e235a1aee6106$export$81bb094e3f22633d","$997e235a1aee6106$export$ae7acddce86269cc","$d73b8a78cc626be8$export$6c017bfb366f2dbf","ap","hp","atan2","_deg360InRad","ahp","aCp","aCp_to_7","R_C","_pow25to7","delta_theta","_deg30InRad","exp","_deg275InRad","_deg25InRad","sin","cos","_deg6InRad","_deg63InRad","C1pC2p","h_bar","h1p","h2p","hpSum","_deg180InRad","dhp","dE2","calculateRawInLab","Lab1","Lab2","L1","L2","pow_a_C1_C2_to_7","G","a1p","a2p","C1p","C2p","_calculatehp","abs","dLp","dCp","dHp","_calculate_dHp","_calculate_ahp","aLp_minus_50_square","dCpSC","dHpSH","_calculateT","_calculateRT","degrees2radians","$db6e0cf8f4838494$export$bc1dbe338b7db412","rmean","dE","$7988157b278cb568$export$a7ed6210e4463398","dR","dG","_kR","_kG","_kB","$7988157b278cb568$export$e6b4701be0d92392","$7988157b278cb568$export$c91ee8fe7e1bae05","$3Axkt","Y","RED","GREEN","BLUE","$7988157b278cb568$export$9f449413b7eb5250","$e85a6c204a8e8d83$export$27a21b2cb0d08dcd","$e85a6c204a8e8d83$export$629a80614180ea94","$e85a6c204a8e8d83$export$87575544adca7156","$e85a6c204a8e8d83$export$292f30b4313c8567","$208ffc99b91e18cc$export$7ec0afefac0284e7","alphas","_colordifferenceCh","black","white","$2149d8540e356696$export$70df152740e2947f","quantizeSync","quantize","$fd890882a795cd9f$var$Neuron","toPoint","$d4hJY","Point","createByRGBA","subtract","defaultValue","$fd890882a795cd9f$export$a14dcb64913a57eb","$aALn8","AbstractPaletteQuantizer","sample","_pointArray","_init","_learn","_buildPalette","progress","_freq","_bias","_radPower","_network","_networkSize","$fd890882a795cd9f$var$networkBiasShift","_initialBias","sampleFactor","_sampleFactor","pointsNumber","_minpicturebytes","alphadec","pointsToSample","step","_nCycles","_initAlpha","radius","_radiusBias","rad","_radiusBiasShift","_radBias","_prime1","_prime2","_prime3","_prime4","tracker","$vJED7","ProgressTracker","pointIndex","shouldNotify","neuronIndex","_contest","_alterSingle","_alterNeighbour","_radiusDecrease","j","$gEVkb","Palette","neuron","add","al","lo","hi","k","_alphaRadBias","bestd","bestbiasd","bestpos","bestbiaspos","dist","_distance","biasdist","_initialBiasShift","betafreq","_betaShift","_gammaShift","_beta","_betaGamma","colorDistanceCalculator","super","_alphaBiasShift","_radBiasShift","_alphaRadBiasShift","$c0ec9f8f6c7e5580$export$364fbd678050ba26","hue","segmentsNumber","seg","mid","$c0ec9f8f6c7e5580$export$e2fbaa661ec19dbf","color","_pointContainer","setWidth","has","getNearestColor","_getNearestIndex","_nearestPointFromCache","key","_i32idx","idx","minimalDistance","Number","MAX_VALUE","distance","hslA","$jozBT","rgb2hsl","hslB","hueA","hueDiff","lA","getLuminosity","lB","satDiff","$7gSrT","setHeight","$5bdb015049da323e$export$aa228b91e9e8f5cb","getWidth","_width","getHeight","_height","clone","createByUint32","toUint32Array","uint32Array","Uint32Array","toUint8Array","naturalWidth","naturalHeight","canvas","fromHTMLCanvasElement","imgData","fromImageData","uint8Array","toString","fromUint32Array","container","byteOffset","byteLength","BYTES_PER_ELEMENT","$593a25192f80451e$export$baf26146a414f24a","quadruplet","_loadUINT32","_loadQuadruplet","red","green","blue","_loadRGBA","rgba","useAlphaChannel","$c9ac004ec500eb7b$var$HueGroup","num","cols","$c9ac004ec500eb7b$export$332cee2a78692576","check","i32","_groupsFull","_numGroups","hg","hueGroup","gr","_stats","_minCols","injectIntoDictionary","histG","col","injectIntoArray","numGroups","minCols","$f5ce213d370dfa2f$export$50a55323bc54fb79","current","_last","_step","_progressRange","_range","valueRange","progressRange","steps","$ba043ccff0effc71$var$NeuronFloat","$ba043ccff0effc71$export$1ac44bf113e76a86","$ba043ccff0effc71$var$networkBiasShift","$35b3a45f1aac5144$var$RemovedColor","$35b3a45f1aac5144$export$b4d1279f50c64a23","_histogram","idxi32","getImportanceSortedColorsIDXI32","colorArray","usageArray","memDist","palLen","thold","_initialDistance","_colors","pxi","pxj","_distanceIncrement","stableSort","colorIndex","method","$fDA6m","ColorHistogram","$15f8d8e98c24240f$export$4411783de4adca20","_method","_colorStats1D","_colorStats2D","keys","initialColorsLimit","_initColors","last","freq","pos","_hueStats","pointArray","boxW","_boxSize","boxH","area","boxes","_makeBoxes","box","effc","_boxPixels","histL","_iterateBox","bbox","wid","fn","i0","incr","cnt","stepX","stepY","wrem","hrem","xend","yend","boxesArray","_minHueCols","$fHlqI","HueStatistics","_hueGroups","$c48564379331dcb1$var$createArray1D","dimension1","$c48564379331dcb1$var$createArray4D","dimension2","dimension3","dimension4","$c48564379331dcb1$var$createArray3D","$c48564379331dcb1$var$fillArray3D","$c48564379331dcb1$var$fillArray1D","$c48564379331dcb1$export$2b25e654b17874ab","$c48564379331dcb1$export$d85bc251ce90584a","_addColor","_pixels","_preparePalette","paletteIndex","_sums","sum","_reds","_greens","_blues","_alphas","_calculateMoments","next","volumeVariance","cubeIndex","_cut","_cubes","volume","_calculateVariance","temp","lookupRed","lookupGreen","lookupBlue","lookupAlpha","_volume","_weights","_momentsRed","_momentsGreen","_momentsBlue","_momentsAlpha","bestMatch","bestDistance","lookup","foundRed","foundGreen","foundBlue","foundAlpha","bitsToRemove","_significantBitsPerChannel","indexRed","indexGreen","indexBlue","indexAlpha","_moments","_table","areaRed","areaGreen","areaBlue","areaAlpha","area2","xarea","_sideSize","xareaRed","xareaGreen","xareaBlue","xareaAlpha","xarea2","trackerProgress","_alphaMaxSideIndex","_maxSideIndex","alphaIndex","redIndex","greenIndex","line","lineRed","lineGreen","lineBlue","lineAlpha","line2","blueIndex","static","cube","moment","alphaMaximum","redMaximum","greenMaximum","blueMaximum","greenMinimum","redMinimum","alphaMinimum","blueMinimum","_volumeFloat","direction","position","result","_alpha","_red","_green","_blue","volumeRed","volumeGreen","volumeBlue","volumeAlpha","_maximize","first","wholeRed","wholeGreen","wholeBlue","wholeAlpha","wholeWeight","bottomRed","_bottom","bottomGreen","bottomBlue","bottomAlpha","bottomWeight","cutPosition","halfRed","_top","halfGreen","halfBlue","halfAlpha","halfWeight","halfDistance","second","_initialize","_alphaSideSize","tableIndex","_setQuality","significantBitsPerChannel","$571bab5390c5f48c$export$391ba0d40f5d63f4","$68c59c2dd8c39402$export$70ee0f0d0123bdb3","$2vpgI","AbstractImageQuantizer","$f756a21577dcc29c$export$8356cd805ac56a5a","$f756a21577dcc29c$export$f3fceb7690a85289","originalPoint","errorLines","maxErrorLines","kernel","_kernel","kernelErrorLines","_fillErrorLine","_serpentine","lni","xStart","xEnd","shift","errorLine","error","correctedPoint","palettePoint","_minColorDistance","er","eg","eb","ea","_calculateErrorLikeGIMP","dStart","dEnd","x1","y1","d","_setKernel","FloydSteinberg","FalseFloydSteinberg","Stucki","Atkinson","Jarvis","Burkes","Sierra","TwoSierra","SierraLite","serpentine","minimumColorDistanceToDither","calculateErrorLikeGIMP","$a00287d7fc794790$export$9fccad07108e10cd","errorQueue","head","_errorQueueSize","$khpli","hilbertCurve","quantizedPoint","tail","errorPropagation","errorQueueSize","weights","multiplier","log","_createWeights","Direction","$97d91f2c39a5537e$export$3296febcb4558101","maxBound","floor","$97d91f2c39a5537e$var$walkHilbert","$97d91f2c39a5537e$var$Direction","UP","$97d91f2c39a5537e$var$visit","NONE","level","LEFT","RIGHT","DOWN","$382a4efe76302131$export$210de7974a8bcbe7","images","colorDistanceFormula","paletteQuantization","onProgress","paletteQuantizer","$382a4efe76302131$var$paletteQuantizationToPaletteQuantizer","$382a4efe76302131$var$colorDistanceFormulaToColorDistance","timerId","iterator","done","setImmediate","clearImmediate","$382a4efe76302131$export$d1a2a691e346564c","imageQuantization","outPointContainer","$382a4efe76302131$var$imageQuantizationToImageQuantizer","$94yT3","CIE94GraphicArts","CIE94Textiles","$6xQn4","CIEDE2000","$2pWqt","CMetric","$7b2Kp","Euclidean","EuclideanBT709","EuclideanBT709NoAlpha","$1GnlG","Manhattan","ManhattanBT709","ManhattanNommyde","$3c61P","PNGQuant","distanceCalculator","$3r2sE","NearestColor","$90zXR","ErrorDiffusionRiemersma","$51NiE","ErrorDiffusionArray","ErrorDiffusionArrayKernel","$kAJYY","NeuQuant","$iESki","RGBQuant","$cNTWi","WuQuant","$2nR1H","NeuQuantFloat","global","registerImmediate","html","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","process","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","event","port2","documentElement","script","onreadystatechange","removeChild","appendChild","random","source","addEventListener","attachEvent","Function","task","self","$parcel$global","$a2254c7fbb8bce16$export$5be764a9afb31bc4","$a2254c7fbb8bce16$export$b466cb0782d45353","padding","left","padStart","padEnd","$a2254c7fbb8bce16$export$984e705772977724","$d155ddb8b4252095$var$_typeof","obj1","Symbol","obj","constructor","$d155ddb8b4252095$var$isDeepEqual","$d155ddb8b4252095$var$isDeepStrictEqual","$d155ddb8b4252095$var$_require$codes","codes","$d155ddb8b4252095$var$ERR_AMBIGUOUS_ARGUMENT","ERR_AMBIGUOUS_ARGUMENT","$d155ddb8b4252095$var$ERR_INVALID_ARG_TYPE","ERR_INVALID_ARG_TYPE","$d155ddb8b4252095$var$ERR_INVALID_ARG_VALUE","ERR_INVALID_ARG_VALUE","$d155ddb8b4252095$var$ERR_INVALID_RETURN_VALUE","ERR_INVALID_RETURN_VALUE","$d155ddb8b4252095$var$ERR_MISSING_ARGS","ERR_MISSING_ARGS","$d155ddb8b4252095$var$inspect","inspect","types","$d155ddb8b4252095$var$isPromise","$d155ddb8b4252095$require$_require$types","isPromise","$d155ddb8b4252095$var$isRegExp","isRegExp","$d155ddb8b4252095$var$objectAssign","parcelRequire","$d155ddb8b4252095$var$objectIs","is","Map","$d155ddb8b4252095$var$lazyLoadComparison","comparison","isDeepEqual","isDeepStrictEqual","$d155ddb8b4252095$var$warned","$d155ddb8b4252095$var$assert","$d155ddb8b4252095$var$ok","$d155ddb8b4252095$var$NO_EXCEPTION_SENTINEL","$d155ddb8b4252095$var$innerFail","message","$eoNg3","$d155ddb8b4252095$var$innerOk","argLen","generatedMessage","err","actual","expected","operator","stackStartFn","_len","_key","fail","$d155ddb8b4252095$var$fail","internalMessage","argsLen","warn","emitWarning","console","bind","errArgs","AssertionError","ok","equal","notEqual","deepEqual","notDeepEqual","deepStrictEqual","notDeepStrictEqual","$d155ddb8b4252095$var$notDeepStrictEqual","strictEqual","notStrictEqual","$d155ddb8b4252095$var$Comparison","Comparison","_this","instance","Constructor","$d155ddb8b4252095$var$_classCallCheck","test","$d155ddb8b4252095$var$compareExceptionKey","$d155ddb8b4252095$var$expectedException","msg","isPrototypeOf","$d155ddb8b4252095$var$getActual","$d155ddb8b4252095$var$checkIsPromise","then","catch","$d155ddb8b4252095$var$waitForActual","promiseFn","resultPromise","$d155ddb8b4252095$var$expectsError","details","fnType","$d155ddb8b4252095$var$expectsNoError","$d155ddb8b4252095$var$strict","_len6","_key6","throws","_len2","_key2","rejects","_len3","_key3","doesNotThrow","_len4","_key4","doesNotReject","_len5","_key5","ifError","newErr","origStack","stack","tmp2","split","tmp1","strict","$bd19c85654dc3cd6$export$e45cb6485273080e","$bd19c85654dc3cd6$var$_typeof","$bd19c85654dc3cd6$var$_possibleConstructorReturn","ReferenceError","$bd19c85654dc3cd6$var$_assertThisInitialized","$bd19c85654dc3cd6$var$_getPrototypeOf","o1","setPrototypeOf","o","__proto__","$bd19c85654dc3cd6$var$_setPrototypeOf","o2","p1","$bd19c85654dc3cd6$var$assert","$bd19c85654dc3cd6$var$util","$bd19c85654dc3cd6$var$codes","$bd19c85654dc3cd6$var$createErrorType","Base","NodeError1","_Base","NodeError","arg1","arg2","arg3","$bd19c85654dc3cd6$var$_classCallCheck","getMessage","subClass","superClass","writable","configurable","$bd19c85654dc3cd6$var$_inherits","$bd19c85654dc3cd6$var$oneOf","thing","isArray","String","determiner","search","this_len","$bd19c85654dc3cd6$var$endsWith","$bd19c85654dc3cd6$var$includes","reason","inspected","RangeError","input","$9d41b635aa94432d$var$getOwnPropertyDescriptors","getOwnPropertyDescriptors","descriptors","getOwnPropertyDescriptor","$9d41b635aa94432d$var$formatRegExp","f","$9d41b635aa94432d$var$isString","objects","$9d41b635aa94432d$var$inspect","_","$9d41b635aa94432d$var$isNull","$9d41b635aa94432d$var$isObject","deprecate","noDeprecation","warned","throwDeprecation","traceDeprecation","trace","$9d41b635aa94432d$var$debugs","$9d41b635aa94432d$var$debugEnvRegex","opts","seen","stylize","$9d41b635aa94432d$var$stylizeNoColor","depth","$9d41b635aa94432d$var$isBoolean","showHidden","_extend","$9d41b635aa94432d$var$isUndefined","customInspect","$9d41b635aa94432d$var$stylizeWithColor","$9d41b635aa94432d$var$formatValue","styleType","styles","recurseTimes","$9d41b635aa94432d$var$isFunction","primitive","simple","$9d41b635aa94432d$var$isNumber","$9d41b635aa94432d$var$formatPrimitive","visibleKeys","hash","$9d41b635aa94432d$var$arrayToHash","getOwnPropertyNames","$9d41b635aa94432d$var$isError","$9d41b635aa94432d$var$formatError","$9d41b635aa94432d$var$isRegExp","$9d41b635aa94432d$var$isDate","Date","output","braces","$9d41b635aa94432d$var$isArray","toUTCString","$9d41b635aa94432d$var$hasOwnProperty","$9d41b635aa94432d$var$formatProperty","match","$9d41b635aa94432d$var$formatArray","pop","numLinesEst","reduce","prev","cur","$9d41b635aa94432d$var$reduceToSingleString","desc","get","set","ar","re","$9d41b635aa94432d$var$objectToString","$9d41b635aa94432d$var$pad","debuglog","pid","bold","italic","underline","inverse","grey","cyan","magenta","yellow","special","number","boolean","null","string","date","regexp","isBoolean","isNull","isNullOrUndefined","isNumber","isString","isSymbol","isUndefined","isObject","isDate","isError","isNativeError","isFunction","isPrimitive","isBuffer","$9d41b635aa94432d$var$months","$9d41b635aa94432d$var$timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","prop","hasOwnProperty","inherits","origin","$9d41b635aa94432d$var$kCustomPromisifiedSymbol","$9d41b635aa94432d$var$callbackifyOnRejected","cb","newReason","promisify","original","defineProperty","enumerable","promiseResolve","promiseReject","promise","defineProperties","custom","callbackify","callbackified","maybeCb","rej","$68f9c9e743dc550a$var$uncurryThis","$68f9c9e743dc550a$var$BigIntSupported","BigInt","$68f9c9e743dc550a$var$SymbolSupported","$68f9c9e743dc550a$var$ObjectToString","$68f9c9e743dc550a$var$numberValue","valueOf","$68f9c9e743dc550a$var$stringValue","$68f9c9e743dc550a$var$booleanValue","Boolean","$68f9c9e743dc550a$var$bigIntValue","$68f9c9e743dc550a$var$symbolValue","$68f9c9e743dc550a$var$checkBoxedPrimitive","prototypeValueOf","$68f9c9e743dc550a$var$isMapToString","$68f9c9e743dc550a$var$isSetToString","$68f9c9e743dc550a$var$isWeakMapToString","$68f9c9e743dc550a$var$isWeakSetToString","$68f9c9e743dc550a$var$isArrayBufferToString","$68f9c9e743dc550a$var$isArrayBuffer","ArrayBuffer","working","$68f9c9e743dc550a$var$isDataViewToString","$68f9c9e743dc550a$var$isDataView","DataView","isArgumentsObject","$33ATq","isGeneratorFunction","$gfzD0","isTypedArray","$a1Y2D","isArrayBufferView","isView","isUint8Array","$xZNi6","isUint8ClampedArray","isUint16Array","isUint32Array","isInt8Array","isInt16Array","isInt32Array","isFloat32Array","isFloat64Array","isBigInt64Array","isBigUint64Array","isMap","Set","isSet","WeakMap","isWeakMap","WeakSet","isWeakSet","isArrayBuffer","isDataView","$68f9c9e743dc550a$var$SharedArrayBufferCopy","SharedArrayBuffer","$68f9c9e743dc550a$var$isSharedArrayBufferToString","$68f9c9e743dc550a$var$isSharedArrayBuffer","$68f9c9e743dc550a$var$isNumberObject","$68f9c9e743dc550a$var$isStringObject","$68f9c9e743dc550a$var$isBooleanObject","$68f9c9e743dc550a$var$isBigIntObject","$68f9c9e743dc550a$var$isSymbolObject","isSharedArrayBuffer","isAsyncFunction","isMapIterator","isSetIterator","isGeneratorObject","isWebAssemblyCompiledModule","isNumberObject","isStringObject","isBooleanObject","isBigIntObject","isSymbolObject","isBoxedPrimitive","isAnyArrayBuffer","$239e451262c048c1$var$hasToStringTag","$239e451262c048c1$var$$toString","$4ljNk","$239e451262c048c1$var$isStandardArguments","toStringTag","$239e451262c048c1$var$isLegacyArguments","callee","$239e451262c048c1$var$supportsStandardArguments","isLegacyArguments","$emOU2","getOwnPropertySymbols","sym","symObj","syms","propertyIsEnumerable","descriptor","$32987a62e6c48de3$var$$indexOf","$6etss","$e25QO","allowMissing","intrinsic","$a375ca72d6ef3c75$var$undefined","$a375ca72d6ef3c75$var$$SyntaxError","SyntaxError","$a375ca72d6ef3c75$var$$Function","$a375ca72d6ef3c75$var$$TypeError","$a375ca72d6ef3c75$var$getEvalledConstructor","expressionSyntax","$a375ca72d6ef3c75$var$$gOPD","$a375ca72d6ef3c75$var$throwTypeError","$a375ca72d6ef3c75$var$ThrowTypeError","calleeThrows","gOPDthrows","$a375ca72d6ef3c75$var$hasSymbols","$a375ca72d6ef3c75$var$getProto","$a375ca72d6ef3c75$var$needsEval","$a375ca72d6ef3c75$var$TypedArray","$a375ca72d6ef3c75$var$INTRINSICS","AggregateError","Atomics","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","EvalError","Float32Array","Float64Array","FinalizationRegistry","Int8Array","Int16Array","Int32Array","isFinite","isNaN","parseInt","Proxy","Reflect","Uint8ClampedArray","Uint16Array","URIError","WeakRef","$a375ca72d6ef3c75$var$doEval","doEval","gen","$a375ca72d6ef3c75$var$LEGACY_ALIASES","$a375ca72d6ef3c75$var$$concat","$9Gm9x","$a375ca72d6ef3c75$var$$spliceApply","splice","$a375ca72d6ef3c75$var$$replace","$a375ca72d6ef3c75$var$$strSlice","$a375ca72d6ef3c75$var$rePropName","$a375ca72d6ef3c75$var$reEscapeChar","$a375ca72d6ef3c75$var$stringToPath","quote","subString","$a375ca72d6ef3c75$var$getBaseIntrinsic","alias","intrinsicName","$2ol56","parts","intrinsicBaseName","intrinsicRealName","skipFurtherCaching","isOwn","part","$698f80c181efe059$var$origSymbol","$lJaWU","$fd164b333f666c6b$var$ERROR_MESSAGE","$fd164b333f666c6b$var$slice","$fd164b333f666c6b$var$toStr","$fd164b333f666c6b$var$funcType","that","target","bound","binder","boundLength","boundArgs","Empty","$489ae69ea6624a0a$var$$apply","$489ae69ea6624a0a$var$$call","$489ae69ea6624a0a$var$$reflectApply","$489ae69ea6624a0a$var$$gOPD","$489ae69ea6624a0a$var$$defineProperty","$489ae69ea6624a0a$var$$max","originalFunction","func","$489ae69ea6624a0a$var$applyBind","$bd49af119f0678d5$var$GeneratorFunction","$bd49af119f0678d5$var$toStr","$bd49af119f0678d5$var$fnToStr","$bd49af119f0678d5$var$isFnRegex","$bd49af119f0678d5$var$hasToStringTag","$bd49af119f0678d5$var$getProto","generatorFunc","$bd49af119f0678d5$var$getGeneratorFunc","$0663042fadaeab26$var$$toString","$0663042fadaeab26$var$hasToStringTag","$0663042fadaeab26$var$g","globalThis","$0663042fadaeab26$var$typedArrays","$ggCP0","$0663042fadaeab26$var$$slice","$0663042fadaeab26$var$toStrTags","$0663042fadaeab26$var$getPrototypeOf","$est86","$gdR2d","typedArray","proto","superProto","foundName","getter","$0663042fadaeab26$var$tryTypedArrays","$bcf6ffda1efe3a62$var$hasOwn","$bcf6ffda1efe3a62$var$toString","$bd7c4126bd1db95c$var$possibleNames","$bd7c4126bd1db95c$var$g","$a86a46c3596901d0$var$$gOPD","$74d8925c25394fc9$var$$toString","$74d8925c25394fc9$var$hasToStringTag","$74d8925c25394fc9$var$g","$74d8925c25394fc9$var$typedArrays","$74d8925c25394fc9$var$$indexOf","$74d8925c25394fc9$var$$slice","$74d8925c25394fc9$var$toStrTags","$74d8925c25394fc9$var$getPrototypeOf","tag","anyTrue","$74d8925c25394fc9$var$tryTypedArrays","copy","fill","readUInt8","ctor","superCtor","super_","TempCtor","$a7b9842e0ff6ef12$var$_defineProperty","$a7b9842e0ff6ef12$var$_defineProperties","props","$a7b9842e0ff6ef12$var$_possibleConstructorReturn","$a7b9842e0ff6ef12$var$_typeof","$a7b9842e0ff6ef12$var$_assertThisInitialized","$a7b9842e0ff6ef12$var$_wrapNativeSuper","Class1","_cache","Class","Wrapper","$a7b9842e0ff6ef12$var$_construct","$a7b9842e0ff6ef12$var$_getPrototypeOf","$a7b9842e0ff6ef12$var$_setPrototypeOf","$a7b9842e0ff6ef12$var$isNativeReflectConstruct","construct","sham","Parent1","args1","Class2","Parent","$a7b9842e0ff6ef12$var$inspect","$a7b9842e0ff6ef12$var$ERR_INVALID_ARG_TYPE","$a7b9842e0ff6ef12$var$endsWith","$a7b9842e0ff6ef12$var$blue","$a7b9842e0ff6ef12$var$green","$a7b9842e0ff6ef12$var$red","$a7b9842e0ff6ef12$var$white","$a7b9842e0ff6ef12$var$kReadableOperator","strictEqualObject","notStrictEqualObject","notIdentical","$a7b9842e0ff6ef12$var$copyError","$a7b9842e0ff6ef12$var$inspectValue","compact","maxArrayLength","Infinity","breakLength","showProxy","getters","$a7b9842e0ff6ef12$var$createErrDiff","other","lastPos","skipped","actualInspected","actualLines","expectedLines","indicator","inputLength","stderr","isTTY","columns","count","maxCount","$a7b9842e0ff6ef12$var$repeat","maxLines","_actualLines","printedLines","skippedMsg","expectedLine","actualLine","divergingLines","$a7b9842e0ff6ef12$var$AssertionError","_Error","$a7b9842e0ff6ef12$var$_classCallCheck","limit","stackTraceLimit","getColorDepth","_res","knownOperators","captureStackTrace","protoProps","staticProps","$a7b9842e0ff6ef12$var$_inherits","ownKeys","filter","$a7b9842e0ff6ef12$var$_objectSpread","$d3a985b662fd8534$var$assign","firstSource","nextSource","keysArray","nextIndex","nextKey","polyfill","$920cf700273e81a3$var$polyfill","$5qpyC","$6iqIF","getPolyfill","implementation","$hM7Kd","shim","$c65wR","$012edb75714dee12$var$hasSymbols","$012edb75714dee12$var$toStr","$012edb75714dee12$var$concat","$012edb75714dee12$var$origDefineProperty","$012edb75714dee12$var$supportsDescriptors","$012edb75714dee12$var$arePropertyDescriptorsSupported","$012edb75714dee12$var$defineProperty","object","predicate","$012edb75714dee12$var$defineProperties","predicates","$7ClMh","supportsDescriptors","$58bcf99a6330cf96$var$slice","$58bcf99a6330cf96$var$origKeys","$58bcf99a6330cf96$var$keysShim","$58bcf99a6330cf96$var$originalKeys","keysWorksWithArguments","$iFSds","$d9861c8654f757ee$var$toStr","isArgs","$80ceee09e0b6c9cf$var$keysShim","$80ceee09e0b6c9cf$var$has","$80ceee09e0b6c9cf$var$toStr","$80ceee09e0b6c9cf$var$isArgs","$80ceee09e0b6c9cf$var$isEnumerable","$80ceee09e0b6c9cf$var$hasDontEnumBug","$80ceee09e0b6c9cf$var$hasProtoEnumBug","$80ceee09e0b6c9cf$var$dontEnums","$80ceee09e0b6c9cf$var$equalsConstructorPrototype","$80ceee09e0b6c9cf$var$excludedKeys","$applicationCache","$console","$external","$frame","$frameElement","$frames","$innerHeight","$innerWidth","$onmozfullscreenchange","$onmozfullscreenerror","$outerHeight","$outerWidth","$pageXOffset","$pageYOffset","$parent","$scrollLeft","$scrollTop","$scrollX","$scrollY","$self","$webkitIndexedDB","$webkitStorageInfo","$window","$80ceee09e0b6c9cf$var$hasAutomationEqualityBug","window","isArguments","theKeys","skipProto","skipConstructor","$80ceee09e0b6c9cf$var$equalsConstructorPrototypeIfNotBuggy","$cf0ced3956c620f0$var$numberIsNaN","$36c21b0472e6021a$var$_slicedToArray","$36c21b0472e6021a$var$_arrayWithHoles","_arr","_n","_d","_e","_s","_i","$36c21b0472e6021a$var$_iterableToArrayLimit","$36c21b0472e6021a$var$_nonIterableRest","$36c21b0472e6021a$var$_typeof","$36c21b0472e6021a$var$regexFlagsSupported","flags","$36c21b0472e6021a$var$arrayFromSet","$36c21b0472e6021a$var$arrayFromMap","$36c21b0472e6021a$var$objectIs","$36c21b0472e6021a$var$objectGetOwnPropertySymbols","$36c21b0472e6021a$var$numberIsNaN","$36c21b0472e6021a$var$uncurryThis","$36c21b0472e6021a$var$hasOwnProperty","$36c21b0472e6021a$var$propertyIsEnumerable","$36c21b0472e6021a$var$objectToString","$36c21b0472e6021a$var$isAnyArrayBuffer","$36c21b0472e6021a$require$_require$types","$36c21b0472e6021a$var$isArrayBufferView","$36c21b0472e6021a$var$isDate","$36c21b0472e6021a$var$isMap","$36c21b0472e6021a$var$isRegExp","$36c21b0472e6021a$var$isSet","$36c21b0472e6021a$var$isNativeError","$36c21b0472e6021a$var$isBoxedPrimitive","$36c21b0472e6021a$var$isNumberObject","$36c21b0472e6021a$var$isStringObject","$36c21b0472e6021a$var$isBooleanObject","$36c21b0472e6021a$var$isBigIntObject","$36c21b0472e6021a$var$isSymbolObject","$36c21b0472e6021a$var$isFloat32Array","$36c21b0472e6021a$var$isFloat64Array","$36c21b0472e6021a$var$isNonIndex","pow","$36c21b0472e6021a$var$getOwnNonIndexProperties","$36c21b0472e6021a$var$compare","$36c21b0472e6021a$var$innerDeepEqual","val1","val2","memos","buf1","buf2","val1Tag","keys1","keys2","$36c21b0472e6021a$var$keyCheck","getTime","$36c21b0472e6021a$var$areSimilarTypedArrays","offset","$36c21b0472e6021a$var$areSimilarFloatArrays","_keys","_keys2","$36c21b0472e6021a$var$isEqualBoxedPrimitive","$36c21b0472e6021a$var$getEnumerables","iterationType","aKeys","bKeys","symbolKeysA","symbolKeysB","_symbolKeysB","val2MemoA","val2MemoB","areEq","$36c21b0472e6021a$var$objEquiv","delete","$36c21b0472e6021a$var$setHasEqualElement","memo","setValues","$36c21b0472e6021a$var$findLooseMatchingPrimitives","prim","$36c21b0472e6021a$var$setMightHaveLoosePrim","altValue","$36c21b0472e6021a$var$mapMightHaveLoosePrim","item","curB","$36c21b0472e6021a$var$mapHasEqualEntry","key1","item1","key2","aValues","bValues","_val","$36c21b0472e6021a$var$setEquiv","aEntries","_aEntries$i","item2","bEntries","_i2","_bEntries$_i","$36c21b0472e6021a$var$mapEquiv","keysA","$1d254bfc9f184efe$var$polyfill","$6rKO5","$c0ivd","$fjMD9","NaN","Selector","getDefaultText","defaultText","label","parentNode","querySelector","textContent","findFirstChildNode","element","childNodes","node","nodeType","restoreDefaultText","bsCustomFileInput","fileApi","File","handleInputChange","inputValue","hasAttribute","files","file","splittedValue","getSelectedFiles","handleFormReset","customFileList","querySelectorAll","customProperty","Event","init","inputSelector","formSelector","customFileInputList","formList","destroy","form","removeEventListener","$01dec14f48c987b0$var$updateNameTextboxes","$","$nameContainer","numExistingFields","children","totalLength","append","css","$01dec14f48c987b0$var$updateListedBinaryFormats","needBinaryFormat","each","$2c9203204d7e8b31$exports","XMLHttpRequest","open","responseType","response","send","d1","status","dispatchEvent","MouseEvent","createEvent","initMouseEvent","f1","navigator","userAgent","saveAs","HTMLAnchorElement","URL","webkitURL","download","rel","href","location","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","autoBom","Blob","body","innerText","HTMLElement","safari","FileReader","onloadend","readAsDataURL","define","amd","FileSaver","ready","$083d63e86da8d710$exports","change","needsDisable","async","attr","reader","outputType","outputMode","requestedCf","binFormatMap","bin_332","bin_565","bin_565_swap","bin_888","binFormatRequest","doConvert","blob","imageName","checked","imageString","$fVNxI","readAsArrayBuffer","buf","Image","removeAttr"],"version":3,"file":"index.fccfd786.js.map"}